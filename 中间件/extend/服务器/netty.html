<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Netty | doc</title>
    <meta name="description" content="在线文档">
    <link rel="preload stylesheet" href="/assets/style.edc773f7.css" as="style">
    
    <script type="module" src="/assets/app.e04742be.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.8048b864.js">
    <link rel="modulepreload" href="/assets/chunks/theme.8ad05ab5.js">
    <link rel="modulepreload" href="/assets/中间件_extend_服务器_netty.md.3be37f4c.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-a0fd61f4><div class="container" data-v-a0fd61f4><div class="title" data-v-a0fd61f4><div class="VPNavBarTitle has-sidebar" data-v-a0fd61f4 data-v-86d1bed8><a class="title" href="/" data-v-86d1bed8><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-8426fc1a><!--]--><!--[-->TheWe1<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-a0fd61f4><div class="curtain" data-v-a0fd61f4></div><div class="content-body" data-v-a0fd61f4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-a0fd61f4><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a0fd61f4 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>研发提效</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/%E8%A7%84%E8%8C%83/MySQL%E8%A7%84%E8%8C%83.html" data-v-43f1e123><!--[-->规范<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/%E7%AC%94%E8%AE%B0/dev.html" data-v-43f1e123><!--[-->笔记<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>生产事件</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/%E7%94%9F%E4%BA%A7%E4%BA%8B%E4%BB%B6/%E7%BA%BF%E4%B8%8A%E7%8E%AF%E5%A2%83%E6%8C%87%E6%A0%87%E5%AE%9A%E4%B9%89.html" data-v-43f1e123><!--[-->线上环境指标定义<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/%E7%94%9F%E4%BA%A7%E4%BA%8B%E4%BB%B6/%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BD%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" data-v-43f1e123><!--[-->如何做好性能优化<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/%E7%94%9F%E4%BA%A7%E4%BA%8B%E4%BB%B6/%E5%A6%82%E4%BD%95%E6%8E%92%E6%9F%A5%E7%94%9F%E4%BA%A7%E9%97%AE%E9%A2%98.html" data-v-43f1e123><!--[-->如何排查生产问题<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>系统设计</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BD%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1.html" data-v-43f1e123><!--[-->如何做好架构设计<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/index.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>更新日志</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a0fd61f4 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-e6aabb21 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a0fd61f4 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/liuxiaowei2018" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a0fd61f4 data-v-40855f84 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/liuxiaowei2018" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a0fd61f4 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-5a346dfe data-v-79c8c1df><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-79c8c1df><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-79c8c1df><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-79c8c1df>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-79c8c1df data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-5a346dfe data-v-b00e2fdd><div class="curtain" data-v-b00e2fdd></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b00e2fdd><span class="visually-hidden" id="sidebar-aria-label" data-v-b00e2fdd> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>数据库</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E9%97%B4%E4%BB%B6/db/postgresql/postgreSQL.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>PostgreSQL</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E9%97%B4%E4%BB%B6/db/oracle/oracle.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Oracle</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E9%97%B4%E4%BB%B6/db/tidb/tiDB.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>TiDB</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>数据库中间件-连接池</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E9%97%B4%E4%BB%B6/druid/druid.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>druid</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>数据库中间件-ETL</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E9%97%B4%E4%BB%B6/canal/canal.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>canal</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>消息中间件</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>kafka</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/pulsar.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>pulsar</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>分布式任务</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/extend/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1/xxlJob.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>xxlJob</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/extend/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1/powerJob.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>powerJob</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>工作流</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/extend/%E5%B7%A5%E4%BD%9C%E6%B5%81/%E5%B7%A5%E4%BD%9C%E6%B5%81%E6%A6%82%E8%BF%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>工作流概述</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>工作流框架</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/extend/%E5%B7%A5%E4%BD%9C%E6%B5%81/flowable.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>flowable</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/extend/%E5%B7%A5%E4%BD%9C%E6%B5%81/compileflow.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>compileflow</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/extend/%E5%B7%A5%E4%BD%9C%E6%B5%81/liteflow.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>liteflow</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>权限设计</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/extend/%E6%9D%83%E9%99%90%E6%A1%86%E6%9E%B6/%E6%9D%83%E9%99%90%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%BF%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>权限设计概述</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>权限框架</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/extend/%E6%9D%83%E9%99%90%E6%A1%86%E6%9E%B6/oauth2.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>oauth2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/extend/%E6%9D%83%E9%99%90%E6%A1%86%E6%9E%B6/saToken.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>saToken</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-d330b1bb><div class="content" data-v-d330b1bb><div class="outline-marker" data-v-d330b1bb></div><div class="outline-title" role="heading" aria-level="2" data-v-d330b1bb>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d330b1bb><span class="visually-hidden" id="doc-outline-aria-label" data-v-d330b1bb> Table of Contents for current page </span><ul class="root" data-v-d330b1bb data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _%E4%B8%AD%E9%97%B4%E4%BB%B6_extend_%E6%9C%8D%E5%8A%A1%E5%99%A8_netty" data-v-6b87e69f><div><h1 id="netty" tabindex="-1">Netty <a class="header-anchor" href="#netty" aria-label="Permalink to &quot;Netty&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#reactor模型">Reactor模型</a></li><li><a href="#netty架构">Netty架构</a></li><li><a href="#重点模块">重点模块</a></li><li><a href="#核心组件">核心组件</a></li><li><a href="#bootstrap-详解">Bootstrap 详解</a></li><li><a href="#eventloop-详解">EventLoop 详解</a></li></ul></nav><blockquote><p>官方文档：<a href="https://netty.io/" target="_blank" rel="noreferrer">https://netty.io/</a></p></blockquote><h3 id="reactor模型" tabindex="-1">Reactor模型 <a class="header-anchor" href="#reactor模型" aria-label="Permalink to &quot;Reactor模型&quot;">​</a></h3><p>将关注的 I/O 事件注册到多路复用器上，一旦有 I/O 事件触发，将事件分发到事件处理器中，执行就绪 I/O 事件对应的处理函数中。模型中有三个重要的组件：</p><ul><li>多路复用器：由操作系统提供接口，Linux 提供的 I/O 复用接口有select、poll、epoll 。</li><li>事件分离器：将多路复用器返回的就绪事件分发到事件处理器中。</li><li>事件处理器：处理就绪事件处理函数。</li></ul><p>Reactor 有 3 种模型实现：</p><ol><li>单 Reactor 单线程模型</li><li>单 Reactor 多线程模型</li><li>多 Reactor 多线程模型</li></ol><h4 id="单-reactor-单线程模型" tabindex="-1">单 Reactor 单线程模型 <a class="header-anchor" href="#单-reactor-单线程模型" aria-label="Permalink to &quot;单 Reactor 单线程模型&quot;">​</a></h4><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301555058.png" alt="image-20220705102600425"></p><p>这是最基础的单 Reactor 单线程模型。</p><p>Reactor 线程，负责多路分离套接字。</p><ul><li>有新连接到来触发 <code>OP_ACCEPT</code> 事件之后， 交由 Acceptor 进行处理。</li><li>有 IO 读写事件之后，交给 Handler 处理。</li></ul><p>Acceptor 主要任务是构造 Handler 。</p><ul><li>在获取到 Client 相关的 SocketChannel 之后，绑定到相应的 Handler 上。</li><li>对应的 SocketChannel 有读写事件之后，基于 Reactor 分发，Handler 就可以处理了。</li></ul><p><strong>注意，所有的 IO 事件都绑定到 Selector 上，由 Reactor 统一分发</strong>。</p><hr><p>该模型适用于处理器链中业务处理组件能快速完成的场景。不过，这种单线程模型不能充分利用多核资源，<strong>所以实际使用的不多</strong>。</p><h4 id="单-reactor-多线程模型" tabindex="-1">单 Reactor 多线程模型 <a class="header-anchor" href="#单-reactor-多线程模型" aria-label="Permalink to &quot;单 Reactor 多线程模型&quot;">​</a></h4><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301555832.png" alt="image-20220705102820676"></p><p>相对于第一种单线程的模式来说，在处理业务逻辑，也就是获取到 IO 的读写事件之后，交由线程池来处理，这样可以减小主 Reactor 的性能开销，从而更专注的做事件分发工作了，从而提升整个应用的吞吐。</p><h4 id="多-reactor-多线程模型" tabindex="-1">多 Reactor 多线程模型 <a class="header-anchor" href="#多-reactor-多线程模型" aria-label="Permalink to &quot;多 Reactor 多线程模型&quot;">​</a></h4><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301556440.png" alt="image-20220705104900263"></p><p>第三种模型比起第二种模型，是将 Reactor 分成两部分：</p><ol><li>mainReactor 负责监听 ServerSocketChannel ，用来处理客户端新连接的建立，并将建立的客户端的 SocketChannel 指定注册给 subReactor 。</li><li>subReactor 维护自己的 Selector ，基于 mainReactor 建立的客户端的 SocketChannel 多路分离 IO 读写事件，读写网络数据。对于业务处理的功能，另外扔给 worker 线程池来完成。</li></ol><h3 id="netty架构" tabindex="-1">Netty架构 <a class="header-anchor" href="#netty架构" aria-label="Permalink to &quot;Netty架构&quot;">​</a></h3><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301556513.png" alt="image-20220704194116443"></p><ul><li>Core：核心部分，是底层的网络通用抽象和部分实现。 <ul><li>Extensible Event Model ：可拓展的事件模型。Netty 是基于事件模型的网络应用框架。</li><li>Universal Communication API ：通用的通信 API 层。Netty 定义了一套抽象的通用通信层的 API 。</li><li>Zero-Copy-Capable Rich Byte Buffer ：支持零拷贝特性的 Byte Buffer 实现。</li></ul></li><li>Transport Services：传输( 通信 )服务，具体的网络传输的定义与实现。 <ul><li>Socket &amp; Datagram ：TCP 和 UDP 的传输实现。</li><li>HTTP Tunnel ：HTTP 通道的传输实现。</li><li>In-VM Piple ：JVM 内部的传输实现。</li></ul></li><li><strong>Protocol Support</strong> ：协议支持。Netty 对于一些通用协议的编解码实现。例如：HTTP、Redis、DNS 等等。</li></ul><h3 id="重点模块" tabindex="-1">重点模块 <a class="header-anchor" href="#重点模块" aria-label="Permalink to &quot;重点模块&quot;">​</a></h3><ul><li>本图省略<strong>非主要依赖</strong>。例如，<code>handler-proxy</code> 对 <code>codec</code> 有依赖，但是并未画出。</li><li>本图省略<strong>非主要的项目</strong>。例如，<code>resolver</code>、<code>testsuite</code>、<code>example</code> 等等。</li></ul><h4 id="common" tabindex="-1">common <a class="header-anchor" href="#common" aria-label="Permalink to &quot;common&quot;">​</a></h4><p><code>common</code> 项目，该项目是一个通用的工具类项目，几乎被所有的其它项目依赖使用，它提供了一些数据类型处理工具类，并发编程以及多线程的扩展，计数器等等通用的工具类。</p><h4 id="buffer" tabindex="-1">buffer <a class="header-anchor" href="#buffer" aria-label="Permalink to &quot;buffer&quot;">​</a></h4><p><code>buffer</code> 项目，实现了 Netty 架构图中的 Zero-Copy-Capable Rich Byte Buffer，该项目下是 Netty 自行实现的一个 Byte Buffer 字节缓冲区。该包的实现相对于 JDK 自带的 ByteBuffer 有很多<strong>优点</strong>：无论是 API 的功能，使用体验，性能都要更加优秀。它提供了**一系列( 多种 )**的抽象定义以及实现，以满足不同场景下的需要。</p><h4 id="transport" tabindex="-1">transport <a class="header-anchor" href="#transport" aria-label="Permalink to &quot;transport&quot;">​</a></h4><p><code>transport</code> 项目，实现了 Netty 架构图中 Transport Services、Universal Communication API 和 Extensible Event Model 等多部分内容，该项目是网络传输通道的抽象和实现。它定义通信的统一通信 API ，统一了 JDK 的 OIO、NIO ( 不包括 AIO )等多种编程接口。</p><p>另外，它提供了多个子项目，实现不同的传输类型。例如：<code>transport-native-epoll</code>、<code>transport-native-kqueue</code>、<code>transport-rxtx</code>、<code>transport-udt</code> 和 <code>transport-sctp</code> 等等。</p><h4 id="codec" tabindex="-1">codec <a class="header-anchor" href="#codec" aria-label="Permalink to &quot;codec&quot;">​</a></h4><p><code>codec</code> 项目，该项目是协议编解码的抽象与<strong>部分</strong>实现：JSON、Google Protocol、Base64、XML 等等。</p><p>另外，它提供了多个子项目，实现不同协议的编解码。例如：<code>codec-dns</code>、<code>codec-haproxy</code>、<code>codec-http</code>、<code>codec-http2</code>、<code>codec-mqtt</code>、<code>codec-redis</code>、<code>codec-memcached</code>、<code>codec-smtp</code>、<code>codec-socks</code>、<code>codec-stomp</code>、<code>codec-xml</code> 等等。</p><h4 id="handler" tabindex="-1">handler <a class="header-anchor" href="#handler" aria-label="Permalink to &quot;handler&quot;">​</a></h4><p><code>handler</code> 项目，该项目是提供<strong>内置的</strong>连接通道处理器( ChannelHandler )实现类。例如：SSL 处理器、日志处理器等等。</p><h4 id="example" tabindex="-1">example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;example&quot;">​</a></h4><p><code>example</code> 项目，该项目是提供各种 Netty 使用示例。</p><h4 id="其它模块" tabindex="-1">其它模块 <a class="header-anchor" href="#其它模块" aria-label="Permalink to &quot;其它模块&quot;">​</a></h4><ul><li><p><code>all</code> ：All In One 的 <code>pom</code> 声明。</p></li><li><p><code>bom</code> ：Netty Bill Of Materials 的缩写 。</p></li><li><p><code>microbench</code> ：微基准测试。</p></li><li><p><code>resolver</code> ：终端( Endpoint ) 的地址解析器。</p></li><li><p><code>resolver-dns</code></p></li><li><p><code>tarball</code> ：All In One 打包工具。</p></li><li><p><code>testsuite</code> ：测试集。</p></li><li><p><code>testsuite-autobahhn</code></p></li><li><p><code>testsuite-http2</code></p></li><li><p><code>testsuite-osgi</code></p></li></ul><h3 id="核心组件" tabindex="-1">核心组件 <a class="header-anchor" href="#核心组件" aria-label="Permalink to &quot;核心组件&quot;">​</a></h3><p>Netty 有如下几个核心组件：</p><ul><li>Bootstrap &amp; ServerBootstrap</li><li>Channel</li><li>ChannelFuture</li><li>EventLoop &amp; EventLoopGroup</li><li>ChannelHandler</li><li>ChannelPipeline</li></ul><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301556754.png" alt="image-20220705100437055"></p><h4 id="bootstrap-serverbootstrap" tabindex="-1">Bootstrap &amp; ServerBootstrap <a class="header-anchor" href="#bootstrap-serverbootstrap" aria-label="Permalink to &quot;Bootstrap &amp; ServerBootstrap&quot;">​</a></h4><p>这 2 个类都继承了AbstractBootstrap，因此它们有很多相同的方法和职责。它们都是<strong>启动器</strong>，能够帮助 Netty 使用者更加方便地组装和配置 Netty ，也可以更方便地启动 Netty 应用程序。相比使用者自己从头去将 Netty 的各部分组装起来要方便得多，降低了使用者的学习和使用成本。它们是我们使用 Netty 的入口和最重要的 API ，可以通过它来连接到一个主机和端口上，也可以通过它来绑定到一个本地的端口上。</p><p>它们和其它组件之间的关系是它们将 Netty 的其它组件进行组装和配置，所以它们会组合和直接或间接依赖其它的类。</p><p>Bootstrap 用于启动一个 Netty TCP 客户端，或者 UDP 的一端。</p><ul><li>通常使用 <code>#connet(...)</code> 方法连接到远程的主机和端口，作为一个 Netty TCP 客户端。</li><li>也可以通过 <code>#bind(...)</code> 方法绑定本地的一个端口，作为 UDP 的一端。</li><li>仅仅需要使用<strong>一个</strong> EventLoopGroup 。</li></ul><p>ServerBootstrap 往往是用于启动一个 Netty 服务端。</p><ul><li>通常使用 <code>#bind(...)</code> 方法绑定本地的端口上，然后等待客户端的连接。</li><li>使用<strong>两个</strong> EventLoopGroup 对象( 当然这个对象可以引用同一个对象 )：第一个用于处理它本地 Socket <strong>连接</strong>的 IO 事件处理，而第二个责负责处理远程客户端的 IO 事件处理。</li></ul><h4 id="channel" tabindex="-1">Channel <a class="header-anchor" href="#channel" aria-label="Permalink to &quot;Channel&quot;">​</a></h4><p>Channel 是 Netty 网络操作抽象类，它除了包括基本的 I/O 操作，如 bind、connect、read、write 之外，还包括了 Netty 框架相关的一些功能，如获取该 Channel 的 EventLoop 。</p><h4 id="eventloop-eventloopgroup" tabindex="-1">EventLoop &amp;&amp; EventLoopGroup <a class="header-anchor" href="#eventloop-eventloopgroup" aria-label="Permalink to &quot;EventLoop &amp;&amp; EventLoopGroup&quot;">​</a></h4><p>Netty 基于<strong>事件驱动模型</strong>，使用不同的事件来通知我们状态的改变或者操作状态的改变。它定义了在整个连接的生命周期里当有事件发生的时候处理的核心抽象。</p><p>Channel 为Netty 网络操作抽象类，EventLoop 负责处理注册到其上的 Channel 处理 I/O 操作，两者配合参与 I/O 操作。</p><p>EventLoopGroup 是一个 EventLoop 的分组，它可以获取到一个或者多个 EventLoop 对象，因此它提供了迭代出 EventLoop 对象的方法。</p><ul><li>一个 EventLoopGroup 包含一个或多个 EventLoop ，即 EventLoopGroup : EventLoop = <code>1 : n</code> 。</li><li>一个 EventLoop 在它的生命周期内，只能与一个 Thread 绑定，即 EventLoop : Thread = <code>1 : 1</code> 。</li><li>所有有 EventLoop 处理的 I/O 事件都将在它<strong>专有</strong>的 Thread 上被处理，从而保证线程安全，即 Thread : EventLoop = <code>1 : 1</code>。</li><li>一个 Channel 在它的生命周期内只能注册到一个 EventLoop 上，即 Channel : EventLoop = <code>n : 1</code> 。</li><li>一个 EventLoop 可被分配至一个或多个 Channel ，即 EventLoop : Channel = <code>1 : n</code> 。</li></ul><p>当一个连接到达时，Netty 就会创建一个 Channel，然后从 EventLoopGroup 中分配一个 EventLoop 来给这个 Channel 绑定上，在该 Channel 的整个生命周期中都是有这个绑定的 EventLoop 来服务的。</p><h4 id="channelfuture" tabindex="-1">ChannelFuture <a class="header-anchor" href="#channelfuture" aria-label="Permalink to &quot;ChannelFuture&quot;">​</a></h4><p>Netty 为异步非阻塞，即所有的 I/O 操作都为异步的，因此，我们不能立刻得知消息是否已经被处理了。Netty 提供了 ChannelFuture 接口，通过该接口的 <code>#addListener(...)</code> 方法，注册一个 ChannelFutureListener，当操作执行成功或者失败时，监听就会自动触发返回结果。</p><h4 id="channelhandler" tabindex="-1">ChannelHandler <a class="header-anchor" href="#channelhandler" aria-label="Permalink to &quot;ChannelHandler&quot;">​</a></h4><p>ChannelHandler ，连接通道处理器，我们使用 Netty 中<strong>最常用</strong>的组件。ChannelHandler 主要用来处理各种事件，这里的事件很广泛，比如可以是连接、数据接收、异常、数据转换等。</p><p>ChannelHandler 有两个核心子类 ChannelInboundHandler 和 ChannelOutboundHandler，其中 ChannelInboundHandler 用于接收、处理入站( Inbound )的数据和事件，而 ChannelOutboundHandler 则相反，用于接收、处理出站( Outbound )的数据和事件。</p><ul><li>ChannelInboundHandler 的实现类还包括一系列的 <strong>Decoder</strong> 类，对输入字节流进行解码。</li><li>ChannelOutboundHandler 的实现类还包括一系列的 <strong>Encoder</strong> 类，对输入字节流进行编码。</li></ul><p>ChannelDuplexHandler 可以<strong>同时</strong>用于接收、处理入站和出站的数据和时间。</p><p>ChannelHandler 还有其它的一系列的抽象实现 Adapter ，以及一些用于编解码具体协议的 ChannelHandler 实现类。</p><h4 id="channelpipeline" tabindex="-1">ChannelPipeline <a class="header-anchor" href="#channelpipeline" aria-label="Permalink to &quot;ChannelPipeline&quot;">​</a></h4><p>ChannelPipeline 为 ChannelHandler 的<strong>链</strong>，提供了一个容器并定义了用于沿着链传播入站和出站事件流的 API 。一个数据或者事件可能会被多个 Handler 处理，在这个过程中，数据或者事件经流 ChannelPipeline ，由 ChannelHandler 处理。在这个处理过程中，一个 ChannelHandler 接收数据后处理完成后交给下一个 ChannelHandler，或者什么都不做直接交给下一个 ChannelHandler。</p><ul><li>当一个数据流进入 ChannelPipeline 时，它会从 ChannelPipeline 头部开始，传给第一个 ChannelInboundHandler 。当第一个处理完后再传给下一个，一直传递到管道的尾部。</li><li>与之相对应的是，当数据被写出时，它会从管道的尾部开始，先经过管道尾部的“最后”一个ChannelOutboundHandler ，当它处理完成后会传递给前一个 ChannelOutboundHandler 。</li></ul><p>当 ChannelHandler 被添加到 ChannelPipeline 时，它将会被分配一个 <strong>ChannelHandlerContext</strong> ，它代表了 ChannelHandler 和 ChannelPipeline 之间的绑定。其中 ChannelHandler 添加到 ChannelPipeline 中，通过 ChannelInitializer 来实现，过程如下：</p><ol><li>一个 ChannelInitializer 的实现对象，被设置到了 BootStrap 或 ServerBootStrap 中。</li><li>当 <code>ChannelInitializer#initChannel()</code> 方法被调用时，ChannelInitializer 将在 ChannelPipeline 中创建<strong>一组</strong>自定义的 ChannelHandler 对象。</li><li>ChannelInitializer 将它自己从 ChannelPipeline 中移除。</li></ol><h3 id="bootstrap-详解" tabindex="-1">Bootstrap 详解 <a class="header-anchor" href="#bootstrap-详解" aria-label="Permalink to &quot;Bootstrap 详解&quot;">​</a></h3><h4 id="服务端-serverbootstrap-示例" tabindex="-1">服务端-ServerBootstrap 示例 <a class="header-anchor" href="#服务端-serverbootstrap-示例" aria-label="Permalink to &quot;服务端-ServerBootstrap 示例&quot;">​</a></h4><h4 id="客户端-bootstrap-示例" tabindex="-1">客户端-Bootstrap 示例 <a class="header-anchor" href="#客户端-bootstrap-示例" aria-label="Permalink to &quot;客户端-Bootstrap 示例&quot;">​</a></h4><h3 id="eventloop-详解" tabindex="-1">EventLoop 详解 <a class="header-anchor" href="#eventloop-详解" aria-label="Permalink to &quot;EventLoop 详解&quot;">​</a></h3><h4 id="服务端-eventloop" tabindex="-1">服务端-EventLoop <a class="header-anchor" href="#服务端-eventloop" aria-label="Permalink to &quot;服务端-EventLoop&quot;">​</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 创建两个 EventLoopGroup 对象</span></span>
<span class="line"><span style="color:#E1E4E8;">EventLoopGroup bossGroup </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NioEventLoopGroup</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">); </span><span style="color:#6A737D;">// 创建 boss 线程组 用于服务端接受客户端的连接</span></span>
<span class="line"><span style="color:#E1E4E8;">EventLoopGroup workerGroup </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NioEventLoopGroup</span><span style="color:#E1E4E8;">(); </span><span style="color:#6A737D;">// 创建 worker 线程组 用于进行 SocketChannel 的数据读写</span></span>
<span class="line"><span style="color:#6A737D;">// 创建 ServerBootstrap 对象</span></span>
<span class="line"><span style="color:#E1E4E8;">ServerBootstrap b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ServerBootstrap</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#6A737D;">// 设置使用的 EventLoopGroup</span></span>
<span class="line"><span style="color:#E1E4E8;">b.</span><span style="color:#B392F0;">group</span><span style="color:#E1E4E8;">(bossGroup, workerGroup);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 创建两个 EventLoopGroup 对象</span></span>
<span class="line"><span style="color:#24292E;">EventLoopGroup bossGroup </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NioEventLoopGroup</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">); </span><span style="color:#6A737D;">// 创建 boss 线程组 用于服务端接受客户端的连接</span></span>
<span class="line"><span style="color:#24292E;">EventLoopGroup workerGroup </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NioEventLoopGroup</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// 创建 worker 线程组 用于进行 SocketChannel 的数据读写</span></span>
<span class="line"><span style="color:#6A737D;">// 创建 ServerBootstrap 对象</span></span>
<span class="line"><span style="color:#24292E;">ServerBootstrap b </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ServerBootstrap</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">// 设置使用的 EventLoopGroup</span></span>
<span class="line"><span style="color:#24292E;">b.</span><span style="color:#6F42C1;">group</span><span style="color:#24292E;">(bossGroup, workerGroup);</span></span></code></pre></div><ul><li>对于 Netty NIO 服务端来说，创建两个 EventLoopGroup 。 <ul><li><code>bossGroup</code> 对应 Reactor 模式的 mainReactor ，用于服务端接受客户端的连接。比较特殊的是，传入了方法参数 <code>nThreads = 1</code> ，表示只使用一个 EventLoop ，即只使用一个 Reactor 。这个也符合我们上面提到的，“<em>通常，mainReactor 只需要一个，因为它一个线程就可以处理</em>”。</li><li><code>workerGroup</code> 对应 Reactor 模式的 subReactor ，用于进行 SocketChannel 的数据读写。对于 EventLoopGroup ，如果未传递方法参数 <code>nThreads</code> ，表示使用 CPU 个数 Reactor 。这个也符合我们上面提到的，“<em>通常，subReactor 的个数和 CPU 个数相等，每个 subReactor 独占一个线程来处理</em>”。</li></ul></li><li>因为使用两个 EventLoopGroup ，所以符合【多 Reactor 多线程模型】的多 Reactor 的要求。实际在使用时，<code>workerGroup</code> 在读完数据时，具体的业务逻辑处理，我们会提交到<strong>专门的业务逻辑线程池</strong>，例如在 Dubbo 或 Motan 这两个 RPC 框架中。这样一来，就完全符合【多 Reactor 多线程模型】。</li><li>那么可能有胖友可能和我有一样的疑问，<code>bossGroup</code> 如果配置多个线程，是否可以使用<strong>多个 mainReactor</strong> 呢？我们来分析一波，一个 Netty NIO 服务端<strong>同一时间</strong>，只能 bind 一个端口，那么只能使用一个 Selector 处理客户端连接事件。又因为，Selector 操作是非线程安全的，所以无法在多个 EventLoop ( 多个线程 )中，同时操作。所以这样就导致，即使 <code>bossGroup</code> 配置多个线程，实际能够使用的也就是一个线程。</li><li>那么如果一定要多个 mainReactor 呢？创建多个 Netty NIO 服务端，并绑定多个端口。</li></ul><h4 id="客户端-eventloop" tabindex="-1">客户端-EventLoop <a class="header-anchor" href="#客户端-eventloop" aria-label="Permalink to &quot;客户端-EventLoop&quot;">​</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 创建一个 EventLoopGroup 对象</span></span>
<span class="line"><span style="color:#E1E4E8;">EventLoopGroup group </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NioEventLoopGroup</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#6A737D;">// 创建 Bootstrap 对象</span></span>
<span class="line"><span style="color:#E1E4E8;">Bootstrap b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Bootstrap</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#6A737D;">// 设置使用的 EventLoopGroup</span></span>
<span class="line"><span style="color:#E1E4E8;">b.</span><span style="color:#B392F0;">group</span><span style="color:#E1E4E8;">(group);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 创建一个 EventLoopGroup 对象</span></span>
<span class="line"><span style="color:#24292E;">EventLoopGroup group </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NioEventLoopGroup</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">// 创建 Bootstrap 对象</span></span>
<span class="line"><span style="color:#24292E;">Bootstrap b </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Bootstrap</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">// 设置使用的 EventLoopGroup</span></span>
<span class="line"><span style="color:#24292E;">b.</span><span style="color:#6F42C1;">group</span><span style="color:#24292E;">(group);</span></span></code></pre></div><ul><li>对于 Netty NIO 客户端来说，仅创建一个 EventLoopGroup 。</li><li>一个 EventLoop 可以对应一个 Reactor 。因为 EventLoopGroup 是 EventLoop 的分组，所以对等理解，EventLoopGroup 是<strong>一种</strong> Reactor 的分组。</li><li>一个 Bootstrap 的启动，只能发起对一个远程的地址。所以只会使用一个 NIO Selector ，也就是说仅使用<strong>一个</strong> Reactor 。即使，我们在声明使用一个 EventLoopGroup ，该 EventLoopGroup 也只会分配一个 EventLoop 对 IO 事件进行处理。</li><li>因为 Reactor 模型主要使用服务端的开发中，如果套用在 Netty NIO 客户端中，到底使用了哪一种模式呢？ <ul><li>如果只有一个业务线程使用 Netty NIO 客户端，那么可以认为是【单 Reactor <strong>单</strong>线程模型】。</li><li>如果有<strong>多个</strong>业务线程使用 Netty NIO 客户端，那么可以认为是【单 Reactor <strong>多</strong>线程模型】。</li></ul></li><li>那么 Netty NIO 客户端是否能够使用【多 Reactor 多线程模型】呢？创建多个 Netty NIO 客户端，连接同一个服务端。那么多个 Netty 客户端就可以认为符合多 Reactor 多线程模型了。 <ul><li>一般情况下，我们不会这么干。</li><li>当然，实际也有这样的示例。例如 Dubbo 或 Motan 这两个 RPC 框架，支持通过配置，同一个 Consumer 对同一个 Provider 实例同时建立多个客户端连接。</li></ul></li></ul><h4 id="eventloopgroup" tabindex="-1">EventLoopGroup <a class="header-anchor" href="#eventloopgroup" aria-label="Permalink to &quot;EventLoopGroup&quot;">​</a></h4><p>EventLoopGroup 是一个 EventLoop 的分组，它可以获取到一个或者多个 EventLoop 对象，因此它提供了迭代出 EventLoop 对象的方法。</p><h5 id="eventexecutorgroup" tabindex="-1">EventExecutorGroup <a class="header-anchor" href="#eventexecutorgroup" aria-label="Permalink to &quot;EventExecutorGroup&quot;">​</a></h5><p><code>io.netty.util.concurrent.EventExecutorGroup</code> ，实现 Iterable、ScheduledExecutorService 接口，EventExecutor ( 事件执行器 )的分组接口。代码如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// ========== 自定义接口 ==========</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">boolean</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isShuttingDown</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 优雅关闭</span></span>
<span class="line"><span style="color:#E1E4E8;">Future</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">shutdownGracefully</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">Future</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">shutdownGracefully</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> quietPeriod, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> timeout, TimeUnit unit);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Future</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">terminationFuture</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 选择一个 EventExecutor 对象</span></span>
<span class="line"><span style="color:#E1E4E8;">EventExecutor </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">(); </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ========== 实现自 Iterable 接口 ==========</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#E1E4E8;">Iterator</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">EventExecutor</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">iterator</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ========== 实现自 ExecutorService 接口 ==========</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#E1E4E8;">Future</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">(Runnable task);</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> Future</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">(Runnable task, T result);</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> Future</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">(Callable</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> task);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Deprecated</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">shutdown</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Deprecated</span></span>
<span class="line"><span style="color:#E1E4E8;">List</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">Runnable</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">shutdownNow</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ========== 实现自 ScheduledExecutorService 接口 ==========</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#E1E4E8;">ScheduledFuture</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">schedule</span><span style="color:#E1E4E8;">(Runnable command, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> delay, TimeUnit unit);</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">V</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> ScheduledFuture</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">V</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">schedule</span><span style="color:#E1E4E8;">(Callable</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">V</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> callable, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> delay, TimeUnit unit);</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#E1E4E8;">ScheduledFuture</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">scheduleAtFixedRate</span><span style="color:#E1E4E8;">(Runnable command, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> initialDelay, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> period, TimeUnit unit);</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#E1E4E8;">ScheduledFuture</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">scheduleWithFixedDelay</span><span style="color:#E1E4E8;">(Runnable command, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> initialDelay, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> delay, TimeUnit unit);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// ========== 自定义接口 ==========</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">boolean</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isShuttingDown</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 优雅关闭</span></span>
<span class="line"><span style="color:#24292E;">Future</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">shutdownGracefully</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">Future</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">shutdownGracefully</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> quietPeriod, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> timeout, TimeUnit unit);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Future</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">terminationFuture</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 选择一个 EventExecutor 对象</span></span>
<span class="line"><span style="color:#24292E;">EventExecutor </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">(); </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ========== 实现自 Iterable 接口 ==========</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">Iterator</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">EventExecutor</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">iterator</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ========== 实现自 ExecutorService 接口 ==========</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">Future</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(Runnable task);</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> Future</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(Runnable task, T result);</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> Future</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(Callable</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> task);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Deprecated</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">shutdown</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Deprecated</span></span>
<span class="line"><span style="color:#24292E;">List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Runnable</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">shutdownNow</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ========== 实现自 ScheduledExecutorService 接口 ==========</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">ScheduledFuture</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">schedule</span><span style="color:#24292E;">(Runnable command, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> delay, TimeUnit unit);</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">V</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> ScheduledFuture</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">V</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">schedule</span><span style="color:#24292E;">(Callable</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">V</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> callable, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> delay, TimeUnit unit);</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">ScheduledFuture</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">scheduleAtFixedRate</span><span style="color:#24292E;">(Runnable command, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> initialDelay, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> period, TimeUnit unit);</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">ScheduledFuture</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">scheduleWithFixedDelay</span><span style="color:#24292E;">(Runnable command, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> initialDelay, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> delay, TimeUnit unit);</span></span></code></pre></div><ul><li>接口方法返回类型为 Future 不是 Java 原生的 <code>java.util.concurrent.Future</code> ，而是 Netty 自己实现的 Future 接口。</li><li>EventExecutorGroup 自身不执行任务，而是将任务 <code>#submit(...)</code> 或 <code>#schedule(...)</code> 给自己管理的 EventExecutor 的分组。至于提交给哪一个 EventExecutor ，一般是通过 <code>#next()</code> 方法，选择一个 EventExecutor 。</li></ul><h5 id="abstracteventexecutorgroup" tabindex="-1">AbstractEventExecutorGroup <a class="header-anchor" href="#abstracteventexecutorgroup" aria-label="Permalink to &quot;AbstractEventExecutorGroup&quot;">​</a></h5><p><code>io.netty.util.concurrent.AbstractEventExecutorGroup</code> ，实现 EventExecutorGroup 接口，EventExecutor ( 事件执行器 )的分组抽象类。</p><h6 id="submit" tabindex="-1">submit <a class="header-anchor" href="#submit" aria-label="Permalink to &quot;submit&quot;">​</a></h6><p><code>#submit(...)</code> 方法，提交<strong>一个</strong>普通任务到 EventExecutor 中。代码如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> Future</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">(Runnable task) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">(task);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> Future</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">(Runnable task, T result) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">(task, result);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> Future</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">(Callable</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> task) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">(task);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Future</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(Runnable task) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(task);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> Future</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(Runnable task, T result) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(task, result);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> Future</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(Callable</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> task) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(task);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><ul><li>提交的 EventExecutor ，通过 <code>#next()</code> 方法选择。</li></ul><h6 id="schedule" tabindex="-1">schedule <a class="header-anchor" href="#schedule" aria-label="Permalink to &quot;schedule&quot;">​</a></h6><p><code>#schedule(...)</code> 方法，提交<strong>一个</strong>定时任务到 EventExecutor 中。代码如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> ScheduledFuture</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">schedule</span><span style="color:#E1E4E8;">(Runnable command, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> delay, TimeUnit unit) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">schedule</span><span style="color:#E1E4E8;">(command, delay, unit);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">V</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> ScheduledFuture</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">V</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">schedule</span><span style="color:#E1E4E8;">(Callable</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">V</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> callable, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> delay, TimeUnit unit) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">schedule</span><span style="color:#E1E4E8;">(callable, delay, unit);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> ScheduledFuture</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">scheduleAtFixedRate</span><span style="color:#E1E4E8;">(Runnable command, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> initialDelay, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> period, TimeUnit unit) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">scheduleAtFixedRate</span><span style="color:#E1E4E8;">(command, initialDelay, period, unit);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> ScheduledFuture</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">scheduleWithFixedDelay</span><span style="color:#E1E4E8;">(Runnable command, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> initialDelay, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> delay, TimeUnit unit) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">scheduleWithFixedDelay</span><span style="color:#E1E4E8;">(command, initialDelay, delay, unit);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ScheduledFuture</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">schedule</span><span style="color:#24292E;">(Runnable command, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> delay, TimeUnit unit) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">schedule</span><span style="color:#24292E;">(command, delay, unit);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">V</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> ScheduledFuture</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">V</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">schedule</span><span style="color:#24292E;">(Callable</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">V</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> callable, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> delay, TimeUnit unit) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">schedule</span><span style="color:#24292E;">(callable, delay, unit);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ScheduledFuture</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">scheduleAtFixedRate</span><span style="color:#24292E;">(Runnable command, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> initialDelay, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> period, TimeUnit unit) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">scheduleAtFixedRate</span><span style="color:#24292E;">(command, initialDelay, period, unit);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ScheduledFuture</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">scheduleWithFixedDelay</span><span style="color:#24292E;">(Runnable command, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> initialDelay, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> delay, TimeUnit unit) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">scheduleWithFixedDelay</span><span style="color:#24292E;">(command, initialDelay, delay, unit);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><ul><li>提交的 EventExecutor ，通过 <code>#next()</code> 方法选择。</li></ul><h6 id="execute" tabindex="-1">execute <a class="header-anchor" href="#execute" aria-label="Permalink to &quot;execute&quot;">​</a></h6><p><code>#execute(...)</code> 方法，在 EventExecutor 中执行<strong>一个</strong>普通任务。代码如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(Runnable command) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(command);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(Runnable command) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(command);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><ul><li>执行的 EventExecutor ，通过 <code>#next()</code> 方法选择。</li><li>看起来 <code>#execute(...)</code> 和 <code>#submit(...)</code> 方法有几分相似，具体的差异，由 EventExecutor 的实现决定。</li></ul><h6 id="invokeall" tabindex="-1">invokeAll <a class="header-anchor" href="#invokeall" aria-label="Permalink to &quot;invokeAll&quot;">​</a></h6><p><code>#invokeAll(...)</code> 方法，在 EventExecutor 中执行<strong>多个</strong>普通任务。代码如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> List</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">java.util.concurrent.Future</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">invokeAll</span><span style="color:#E1E4E8;">(Collection</span><span style="color:#F97583;">&lt;?</span><span style="color:#E1E4E8;"> extends Callable</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> tasks) throws InterruptedException {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">invokeAll</span><span style="color:#E1E4E8;">(tasks);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> List</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">java.util.concurrent.Future</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">invokeAll</span><span style="color:#E1E4E8;">(Collection</span><span style="color:#F97583;">&lt;?</span><span style="color:#E1E4E8;"> extends Callable</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> tasks, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> timeout, TimeUnit unit) throws InterruptedException {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">invokeAll</span><span style="color:#E1E4E8;">(tasks, timeout, unit);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">java.util.concurrent.Future</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">invokeAll</span><span style="color:#24292E;">(Collection</span><span style="color:#D73A49;">&lt;?</span><span style="color:#24292E;"> extends Callable</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> tasks) throws InterruptedException {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">invokeAll</span><span style="color:#24292E;">(tasks);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">java.util.concurrent.Future</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">invokeAll</span><span style="color:#24292E;">(Collection</span><span style="color:#D73A49;">&lt;?</span><span style="color:#24292E;"> extends Callable</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> tasks, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> timeout, TimeUnit unit) throws InterruptedException {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">invokeAll</span><span style="color:#24292E;">(tasks, timeout, unit);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><ul><li>执行的 EventExecutor ，通过 <code>#next()</code> 方法选择。并且，多个任务使用同一个 EventExecutor</li></ul><h6 id="invokeany" tabindex="-1">invokeAny <a class="header-anchor" href="#invokeany" aria-label="Permalink to &quot;invokeAny&quot;">​</a></h6><p><code>#invokeAll(...)</code> 方法，在 EventExecutor 中执行<strong>多个</strong>普通任务，有<strong>一个</strong>执行完成即可。代码如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> T </span><span style="color:#B392F0;">invokeAny</span><span style="color:#E1E4E8;">(Collection</span><span style="color:#F97583;">&lt;?</span><span style="color:#E1E4E8;"> extends Callable</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> tasks) throws InterruptedException, ExecutionException {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">invokeAny</span><span style="color:#E1E4E8;">(tasks);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> T </span><span style="color:#B392F0;">invokeAny</span><span style="color:#E1E4E8;">(Collection</span><span style="color:#F97583;">&lt;?</span><span style="color:#E1E4E8;"> extends Callable</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> tasks, </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">invokeAny</span><span style="color:#E1E4E8;">(tasks, timeout, unit);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> T </span><span style="color:#6F42C1;">invokeAny</span><span style="color:#24292E;">(Collection</span><span style="color:#D73A49;">&lt;?</span><span style="color:#24292E;"> extends Callable</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> tasks) throws InterruptedException, ExecutionException {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">invokeAny</span><span style="color:#24292E;">(tasks);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> T </span><span style="color:#6F42C1;">invokeAny</span><span style="color:#24292E;">(Collection</span><span style="color:#D73A49;">&lt;?</span><span style="color:#24292E;"> extends Callable</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">T</span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> tasks, </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">invokeAny</span><span style="color:#24292E;">(tasks, timeout, unit);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><ul><li>执行的 EventExecutor ，通过 <code>#next()</code> 方法选择。并且，多个任务使用同一个 EventExecutor</li></ul><h6 id="shutdown" tabindex="-1">shutdown <a class="header-anchor" href="#shutdown" aria-label="Permalink to &quot;shutdown&quot;">​</a></h6><p><code>#shutdown(...)</code> 方法，关闭 EventExecutorGroup 。代码如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> Future</span><span style="color:#F97583;">&lt;?&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">shutdownGracefully</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">shutdownGracefully</span><span style="color:#E1E4E8;">(DEFAULT_SHUTDOWN_QUIET_PERIOD </span><span style="color:#6A737D;">/* 2 */</span><span style="color:#E1E4E8;">, DEFAULT_SHUTDOWN_TIMEOUT </span><span style="color:#6A737D;">/* 15 */</span><span style="color:#E1E4E8;">, TimeUnit.SECONDS);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Deprecated</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> List</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">Runnable</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">shutdownNow</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">shutdown</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> Collections.</span><span style="color:#B392F0;">emptyList</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Deprecated</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">abstract</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">shutdown</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Future</span><span style="color:#D73A49;">&lt;?&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">shutdownGracefully</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">shutdownGracefully</span><span style="color:#24292E;">(DEFAULT_SHUTDOWN_QUIET_PERIOD </span><span style="color:#6A737D;">/* 2 */</span><span style="color:#24292E;">, DEFAULT_SHUTDOWN_TIMEOUT </span><span style="color:#6A737D;">/* 15 */</span><span style="color:#24292E;">, TimeUnit.SECONDS);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Deprecated</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Runnable</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">shutdownNow</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">shutdown</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> Collections.</span><span style="color:#6F42C1;">emptyList</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Deprecated</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">abstract</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">shutdown</span><span style="color:#24292E;">();</span></span></code></pre></div><ul><li>具体的 <code>#shutdownGracefully(long quietPeriod, long timeout, TimeUnit unit)</code> 和 <code>#shutdown()</code> 方法，由子类实现。</li></ul><h5 id="multithreadeventexecutorgroup" tabindex="-1">MultithreadEventExecutorGroup <a class="header-anchor" href="#multithreadeventexecutorgroup" aria-label="Permalink to &quot;MultithreadEventExecutorGroup&quot;">​</a></h5><p><code>io.netty.util.concurrent.MultithreadEventExecutorGroup</code> ，继承 AbstractEventExecutorGroup 抽象类，<strong>基于多线程</strong>的 EventExecutor ( 事件执行器 )的分组抽象类</p></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-ef5dee53><!--[--><!--]--><div class="edit-info" data-v-ef5dee53><!----><div class="last-updated" data-v-ef5dee53><p class="VPLastUpdated" data-v-ef5dee53 data-v-7e05ebdb>Last updated: <time datetime="2024-06-20T08:54:09.000Z" data-v-7e05ebdb></time></p></div></div><nav class="prev-next" data-v-ef5dee53><div class="pager" data-v-ef5dee53><!----></div><div class="pager" data-v-ef5dee53><a class="pager-link next" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E9%97%B4%E4%BB%B6/db/postgresql/postgreSQL.html" data-v-ef5dee53><span class="desc" data-v-ef5dee53>Next page</span><span class="title" data-v-ef5dee53>PostgreSQL</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"elasticsearch_elasticsearch调优.md\":\"444e03c3\",\"framework_index.md\":\"c07754e2\",\"elasticsearch_elk.md\":\"882a1e66\",\"framework_alibaba_index.md\":\"d2900f4f\",\"framework_alibaba_dubbo.md\":\"bf10ea3c\",\"elasticsearch_elasticsearch.md\":\"3be6eb8d\",\"framework_alibaba_zookeeper.md\":\"233a4203\",\"framework_alibaba_nacos.md\":\"cc154aaa\",\"ai_chatgpt使用指南.md\":\"d2c3299c\",\"2024_模块设计模板.md\":\"2c44af24\",\"framework_alibaba_sentinel.md\":\"91042ade\",\"framework_springcloud_springcloudgateway.md\":\"73556a26\",\"framework_springcloud_springcloud.md\":\"99e29ea1\",\"framework_springboot_springboot插件开发.md\":\"53c735d6\",\"framework_springcloud_hystrix.md\":\"01db41f2\",\"elasticsearch_elasticsearch生产实践.md\":\"cfe9af5a\",\"java_juc_synchronized.md\":\"dd6697c5\",\"中间件_数据库中间件_db_oracle_oracle.md\":\"1741fe03\",\"framework_spring_spring使用注意事项和总结.md\":\"4623af52\",\"k8s_k8s.md\":\"e53f4d58\",\"中间件_消息中间件_kafka.md\":\"48a2c402\",\"framework_springcloud_springcloudstream.md\":\"880ebba7\",\"更新日志_index.md\":\"bccdf842\",\"mysql_mysql常见问题及解决方案.md\":\"0084596c\",\"中间件_extend_权限框架_权限设计概述.md\":\"1869fd15\",\"java_juc_condition.md\":\"569cb3fd\",\"java_juc_readwritelock.md\":\"3c4b2bf3\",\"java_juc_exchanger.md\":\"ef9ac460\",\"mybatis_mybatisplus.md\":\"f4d6105c\",\"中间件_extend_权限框架_oauth2.md\":\"d27e9339\",\"中间件_extend_服务器_netty.md\":\"3be37f4c\",\"rabbitmq_rabbitmq.md\":\"7a300c94\",\"中间件_extend_分布式任务_powerjob.md\":\"53a22456\",\"中间件_extend_分布式任务_xxljob.md\":\"bd0c4063\",\"framework_springboot_springboot.md\":\"ea3b9fff\",\"java_jvm_jvm调优.md\":\"5dc8c303\",\"中间件_数据库中间件_druid_druid.md\":\"5deb03d7\",\"中间件_数据库中间件_canal_canal.md\":\"676c49d9\",\"java_juc_threadlocal.md\":\"f5d87663\",\"中间件_数据库中间件_db_postgresql_postgresql.md\":\"c5f6c61b\",\"mysql_mysql性能优化.md\":\"1cbbe805\",\"framework_springcloud_openfeign.md\":\"3d8af820\",\"shardingjdbc_分库分表.md\":\"5ad6fd48\",\"mysql_mysql索引.md\":\"a0de6f84\",\"系统设计_ddd设计的一次落地实践.md\":\"006efa2b\",\"redis_redisson.md\":\"edfda178\",\"中间件_extend_工作流_compileflow.md\":\"f2d6e110\",\"中间件_extend_工作流_工作流概述.md\":\"b9ef1076\",\"中间件_extend_工作流_flowable.md\":\"19f5c425\",\"mongodb_mongodb.md\":\"21306d61\",\"中间件_extend_工作流_liteflow.md\":\"83ebc8c1\",\"redis_redis.md\":\"68920969\",\"系统设计_秒杀系统设计.md\":\"0735c329\",\"中间件_extend_服务器_nginx.md\":\"b2e60468\",\"系统设计_订单系统设计.md\":\"0455ce82\",\"java_juc_线程池.md\":\"a5733cff\",\"系统设计_如何做好架构设计.md\":\"9773925c\",\"系统设计_日志系统设计.md\":\"bd84d8f9\",\"系统设计_分布式事务设计.md\":\"ac0c5788\",\"mysql_mysql.md\":\"7517d308\",\"shardingjdbc_shardingjdbc示例.md\":\"49a00e2c\",\"index.md\":\"bb1075d1\",\"中间件_数据库中间件_db_tidb_tidb.md\":\"8d15eec5\",\"中间件_extend_权限框架_satoken.md\":\"0784c1c8\",\"规范_redis规范.md\":\"320ef2ff\",\"java_juc_cyclicbarrier.md\":\"9f619c8c\",\"中间件_消息中间件_pulsar使用注意事项和总结.md\":\"d33f61d2\",\"生产事件_taimei_institution-svc反复重启事故.md\":\"45c6afc7\",\"生产事件_other_线上pod死锁案例.md\":\"c10219f9\",\"mybatis_mybatis应用.md\":\"ed036107\",\"mysql_mysql锁.md\":\"66e14a19\",\"生产事件_other_线上服务器端口故障.md\":\"2559b729\",\"生产事件_taimei_territory-svc内存溢出.md\":\"a1a767d2\",\"redis_redis应用.md\":\"d451cf4e\",\"mybatis_mybatis.md\":\"24cde3b5\",\"mysql_mysql事务.md\":\"6da6c2ad\",\"java_juc_volatile.md\":\"c30d0a96\",\"生产事件_如何做好性能优化.md\":\"7bfe465d\",\"mysql_mysql高可用.md\":\"6e1eb1e3\",\"系统设计_分布式id设计.md\":\"67ea62bd\",\"生产事件_线上环境指标定义.md\":\"e61f7f40\",\"系统设计_灰度架构设计.md\":\"29190aff\",\"规范_mysql规范.md\":\"d5835bfc\",\"笔记_linux.md\":\"aec03624\",\"系统设计_多级缓存架构设计.md\":\"c2e3b67b\",\"java_juc_semaphore.md\":\"0d9943f5\",\"笔记_dev.md\":\"19055630\",\"生产事件_如何排查生产问题.md\":\"0dc463eb\",\"java_juc_aqs.md\":\"792b15fd\",\"shardingjdbc_shardingjdbc.md\":\"bef6394c\",\"中间件_消息中间件_pulsar.md\":\"e882c695\",\"大数据_数仓分层.md\":\"c7bd729b\",\"java_juc_原子类.md\":\"3a95b2e7\",\"java_juc_reentrantlock.md\":\"1831f149\",\"生产事件_taimei_sfe-affiliate接口优化.md\":\"9c23680f\",\"java_juc_多线程基础.md\":\"e6f6abb4\",\"java_juc_countdownlatch.md\":\"ad531796\",\"framework_alibaba_seata.md\":\"ab73ed06\",\"笔记_docker.md\":\"ced4d05f\",\"java_juc_completablefuture.md\":\"99f0a488\",\"系统设计_mysql-es数据初始化同步方案.md\":\"0a9ca20b\",\"java_jvm_jvm基础.md\":\"61718788\",\"rocketmq_rocketmq.md\":\"6e99b758\",\"java_juc_并发容器.md\":\"63ab7ad4\",\"java_juc_阻塞队列.md\":\"928b5d7f\",\"framework_spring_spring.md\":\"a8d24ce7\",\"java_java.md\":\"409ab104\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"doc\",\"description\":\"在线文档\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"TheWe1\",\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"研发提效\",\"items\":[{\"text\":\"规范\",\"link\":\"/规范/MySQL规范\"},{\"text\":\"笔记\",\"link\":\"/笔记/dev\"}]},{\"text\":\"生产事件\",\"items\":[{\"text\":\"线上环境指标定义\",\"link\":\"/生产事件/线上环境指标定义\"},{\"text\":\"如何做好性能优化\",\"link\":\"/生产事件/如何做好性能优化\"},{\"text\":\"如何排查生产问题\",\"link\":\"/生产事件/如何排查生产问题\"}]},{\"text\":\"系统设计\",\"items\":[{\"text\":\"如何做好架构设计\",\"link\":\"/系统设计/如何做好架构设计\"}]},{\"text\":\"更新日志\",\"link\":\"/更新日志/index\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/liuxiaowei2018\"}],\"search\":{\"provider\":\"local\"},\"lastUpdated\":\"Last Updated\",\"smoothScroll\":true,\"sidebar\":{\"/java\":[{\"text\":\"JavaSE\",\"collapsible\":true,\"items\":[{\"text\":\"1.java基础\",\"link\":\"/java/java\"},{\"text\":\"2.并发编程\",\"link\":\"/java/juc/多线程基础\"},{\"text\":\"3.虚拟机\",\"link\":\"/java/jvm/jvm基础\"}]}],\"/java/juc\":[{\"text\":\"并发编程基础\",\"collapsible\":true,\"items\":[{\"text\":\"1.多线程基础\",\"link\":\"/java/juc/多线程基础\"},{\"text\":\"2.原子类\",\"link\":\"/java/juc/原子类\"},{\"text\":\"3.ThreadLocal\",\"link\":\"/java/juc/ThreadLocal\"}]},{\"text\":\"并发容器\",\"collapsible\":true,\"items\":[{\"text\":\"1.并发容器\",\"link\":\"/java/juc/并发容器\"},{\"text\":\"2.阻塞队列\",\"link\":\"/java/juc/阻塞队列\"}]},{\"text\":\"锁\",\"collapsible\":true,\"items\":[{\"text\":\"1.AQS\",\"link\":\"/java/juc/AQS\"},{\"text\":\"2.Synchronized\",\"link\":\"/java/juc/Synchronized\"},{\"text\":\"3.ReentrantLock\",\"link\":\"/java/juc/ReentrantLock\"},{\"text\":\"4.ReadWriteLock\",\"link\":\"/java/juc/ReadWriteLock\"}]},{\"text\":\"并发工具类\",\"collapsible\":true,\"items\":[{\"text\":\"1.CountDownLatch\",\"link\":\"/java/juc/CountDownLatch\"},{\"text\":\"2.Semaphore\",\"link\":\"/java/juc/Semaphore\"},{\"text\":\"3.CyclicBarrier\",\"link\":\"/java/juc/CyclicBarrier\"},{\"text\":\"4.Exchanger\",\"link\":\"/java/juc/Exchanger\"},{\"text\":\"5.Condition\",\"link\":\"/java/juc/Condition\"},{\"text\":\"6.CompletableFuture\",\"link\":\"/java/juc/CompletableFuture\"}]},{\"text\":\"线程池\",\"collapsible\":true,\"items\":[{\"text\":\"线程池\",\"link\":\"/java/juc/线程池\"}]}],\"/java/jvm\":[{\"text\":\"虚拟机\",\"collapsible\":true,\"items\":[{\"text\":\"1.jvm基础\",\"link\":\"/java/jvm/jvm基础\"},{\"text\":\"2.jvm调优\",\"link\":\"/java/jvm/jvm调优\"}]}],\"/framework\":[{\"text\":\"常用开发框架\",\"collapsible\":true,\"items\":[{\"text\":\"Java开发框架概述\",\"link\":\"/framework/index\"}]},{\"text\":\"spring\",\"collapsible\":true,\"items\":[{\"text\":\"spring\",\"link\":\"/framework/spring/spring\"},{\"text\":\"spring使用注意事项和总结\",\"link\":\"/framework/spring/spring使用注意事项和总结\"}]},{\"text\":\"springboot\",\"collapsible\":true,\"items\":[{\"text\":\"springBoot\",\"link\":\"/framework/springboot/springBoot\"},{\"text\":\"SpringBoot插件开发\",\"link\":\"/framework/springboot/springBoot插件开发\"}]},{\"text\":\"springCloud\",\"collapsible\":true,\"items\":[{\"text\":\"springCloud\",\"link\":\"/framework/springcloud/openFeign\"}]},{\"text\":\"springCloudAlibaba\",\"collapsible\":true,\"items\":[{\"text\":\"springCloudAlibaba\",\"link\":\"/framework/alibaba/dubbo\"}]}],\"/framework/springcloud\":[{\"text\":\"SpringCloud\",\"collapsible\":true,\"items\":[{\"text\":\"springCloudOpenFeign\",\"link\":\"/framework/springcloud/openFeign\"},{\"text\":\"springCloudHystrix\",\"link\":\"/framework/springcloud/hystrix\"},{\"text\":\"springCloudGateway\",\"link\":\"/framework/springcloud/springCloudGateway\"},{\"text\":\"springCloudStream\",\"link\":\"/framework/springcloud/springCloudStream\"}]}],\"/framework/alibaba\":[{\"text\":\"SpringCloudAlibaba\",\"collapsible\":true,\"items\":[{\"text\":\"dubbo\",\"link\":\"/framework/alibaba/dubbo\"},{\"text\":\"nacos\",\"link\":\"/framework/alibaba/nacos\"},{\"text\":\"seata\",\"link\":\"/framework/alibaba/seata\"},{\"text\":\"sentinel\",\"link\":\"/framework/alibaba/sentinel\"},{\"text\":\"zookeeper\",\"link\":\"/framework/alibaba/zookeeper\"}]}],\"/mysql\":[{\"text\":\"mysql\",\"collapsible\":true,\"items\":[{\"text\":\"1.MySQL概述\",\"link\":\"/mysql/mysql\"},{\"text\":\"2.mysql索引\",\"link\":\"/mysql/mysql索引\"},{\"text\":\"3.MySQL事务\",\"link\":\"/mysql/mysql事务\"},{\"text\":\"4.MySQL性能优化\",\"link\":\"/mysql/mysql性能优化\"},{\"text\":\"5.MySQL常见问题及解决方案\",\"link\":\"/mysql/mysql常见问题及解决方案\"},{\"text\":\"6.MySQL高可用\",\"link\":\"/mysql/mysql高可用\"}]}],\"/elasticsearch\":[{\"text\":\"elasticsearch\",\"collapsible\":true,\"items\":[{\"text\":\"elasticsearch基础\",\"link\":\"/elasticsearch/elasticsearch\"},{\"text\":\"Elasticsearch调优\",\"link\":\"/elasticsearch/Elasticsearch调优\"},{\"text\":\"Elasticsearch生产实践\",\"link\":\"/elasticsearch/Elasticsearch生产实践\"},{\"text\":\"ELK日志平台\",\"link\":\"/elasticsearch/ELK\"}]}],\"/mongodb\":[{\"text\":\"mongodb\",\"collapsible\":true,\"items\":[{\"text\":\"mongoDB\",\"link\":\"/mongodb/mongoDB\"}]}],\"/mybatis\":[{\"text\":\"mybatis\",\"collapsible\":true,\"items\":[{\"text\":\"mybatis\",\"link\":\"/mybatis/mybatis\"},{\"text\":\"mybatis应用\",\"link\":\"/mybatis/mybatis应用\"}]},{\"text\":\"mybatisPlus\",\"collapsible\":true,\"items\":[{\"text\":\"mybatisPlus\",\"link\":\"/mybatis/mybatisPlus\"}]}],\"/redis\":[{\"text\":\"redis\",\"collapsible\":true,\"items\":[{\"text\":\"redis\",\"link\":\"/redis/redis\"},{\"text\":\"redis应用\",\"link\":\"/redis/redis应用\"}]},{\"text\":\"redisson\",\"collapsible\":true,\"items\":[{\"text\":\"redisson\",\"link\":\"/redis/redisson\"}]}],\"/shardingjdbc\":[{\"text\":\"分库分表\",\"collapsible\":true,\"items\":[{\"text\":\"分库分表概述\",\"link\":\"/shardingjdbc/分库分表\"}]},{\"text\":\"shardingJdbc\",\"collapsible\":true,\"items\":[{\"text\":\"shardingJdbc\",\"link\":\"/shardingjdbc/shardingJdbc\"},{\"text\":\"shardingJdbc示例\",\"link\":\"/shardingjdbc/shardingJdbc示例\"}]}],\"/rabbitmq\":[{\"text\":\"消息中间件\",\"collapsible\":true,\"items\":[{\"text\":\"rabbitMQ\",\"link\":\"/rabbitmq/rabbitMQ\"}]}],\"/rocketmq\":[{\"text\":\"消息中间件\",\"collapsible\":true,\"items\":[{\"text\":\"rocketMQ\",\"link\":\"/rocketmq/rocketMQ\"}]}],\"/中间件\":[{\"text\":\"数据库\",\"collapsible\":true,\"items\":[{\"text\":\"PostgreSQL\",\"link\":\"/中间件/数据库中间件/db/postgresql/postgreSQL\"},{\"text\":\"Oracle\",\"link\":\"/中间件/数据库中间件/db/oracle/oracle\"},{\"text\":\"TiDB\",\"link\":\"/中间件/数据库中间件/db/tidb/tiDB\"}]},{\"text\":\"数据库中间件-连接池\",\"collapsible\":true,\"items\":[{\"text\":\"druid\",\"link\":\"/中间件/数据库中间件/druid/druid\"}]},{\"text\":\"数据库中间件-ETL\",\"collapsible\":true,\"items\":[{\"text\":\"canal\",\"link\":\"/中间件/数据库中间件/canal/canal\"}]},{\"text\":\"消息中间件\",\"collapsible\":true,\"items\":[{\"text\":\"kafka\",\"link\":\"/中间件/消息中间件/kafka\"},{\"text\":\"pulsar\",\"link\":\"/中间件/消息中间件/pulsar\"}]},{\"text\":\"分布式任务\",\"collapsible\":true,\"items\":[{\"text\":\"xxlJob\",\"link\":\"/中间件/extend/分布式任务/xxlJob\"},{\"text\":\"powerJob\",\"link\":\"/中间件/extend/分布式任务/powerJob\"}]},{\"text\":\"工作流\",\"collapsible\":true,\"items\":[{\"text\":\"工作流概述\",\"link\":\"/中间件/extend/工作流/工作流概述\"}]},{\"text\":\"工作流框架\",\"collapsible\":true,\"items\":[{\"text\":\"flowable\",\"link\":\"/中间件/extend/工作流/flowable\"},{\"text\":\"compileflow\",\"link\":\"/中间件/extend/工作流/compileflow\"},{\"text\":\"liteflow\",\"link\":\"/中间件/extend/工作流/liteflow\"}]},{\"text\":\"权限设计\",\"collapsible\":true,\"items\":[{\"text\":\"权限设计概述\",\"link\":\"/中间件/extend/权限框架/权限设计概述\"}]},{\"text\":\"权限框架\",\"collapsible\":true,\"items\":[{\"text\":\"oauth2\",\"link\":\"/中间件/extend/权限框架/oauth2\"},{\"text\":\"saToken\",\"link\":\"/中间件/extend/权限框架/saToken\"}]}],\"/笔记\":[{\"text\":\"笔记\",\"collapsible\":true,\"items\":[{\"text\":\"1.开发环境配置\",\"link\":\"/笔记/dev\"},{\"text\":\"2.linux\",\"link\":\"/笔记/linux\"},{\"text\":\"3.docker\",\"link\":\"/笔记/docker\"}]}],\"/规范\":[{\"text\":\"开发规范\",\"collapsible\":true,\"items\":[{\"text\":\"1.MySQL规范\",\"link\":\"/规范/MySQL规范\"},{\"text\":\"2.Redis规范\",\"link\":\"/规范/Redis规范\"}]}],\"/生产事件\":[{\"text\":\"线上指标\",\"collapsible\":true,\"items\":[{\"text\":\"线上环境指标定义\",\"link\":\"/生产事件/线上环境指标定义\"}]},{\"text\":\"性能优化\",\"collapsible\":true,\"items\":[{\"text\":\"如何做好性能优化\",\"link\":\"/生产事件/如何做好性能优化\"},{\"text\":\"sfe-affiliate接口优化\",\"link\":\"/生产事件/taimei/sfe-affiliate接口优化\"}]},{\"text\":\"事件排查\",\"collapsible\":true,\"items\":[{\"text\":\"如何排查生产问题\",\"link\":\"/生产事件/如何排查生产问题\"},{\"text\":\"线上服务器端口故障\",\"link\":\"/生产事件/other/线上服务器端口故障\"},{\"text\":\"线上pod死锁案例\",\"link\":\"/生产事件/other/线上pod死锁案例\"},{\"text\":\"territory-svc内存溢出\",\"link\":\"/生产事件/taimei/territory-svc内存溢出\"},{\"text\":\"institution-svc反复重启事故\",\"link\":\"/生产事件/taimei/institution-svc反复重启事故\"}]}],\"/系统设计\":[{\"text\":\"系统设计\",\"collapsible\":true,\"items\":[{\"text\":\"1.如何做好架构设计\",\"link\":\"/系统设计/如何做好架构设计\"},{\"text\":\"2.分布式ID设计\",\"link\":\"/系统设计/分布式ID设计\"},{\"text\":\"3.多级缓存架构设计\",\"link\":\"/系统设计/多级缓存架构设计\"},{\"text\":\"4.日志系统设计\",\"link\":\"/系统设计/日志系统设计\"},{\"text\":\"5.分布式事务设计\",\"link\":\"/系统设计/分布式事务设计\"},{\"text\":\"6.灰度架构设计\",\"link\":\"/系统设计/灰度架构设计\"},{\"text\":\"7.秒杀系统设计\",\"link\":\"/系统设计/秒杀系统设计\"},{\"text\":\"8.订单系统设计\",\"link\":\"/系统设计/订单系统设计\"},{\"text\":\"9.Mysql-ES数据初始化同步方案\",\"link\":\"/系统设计/Mysql-ES数据初始化同步方案\"},{\"text\":\"10.DDD设计的一次落地实践\",\"link\":\"/系统设计/DDD设计的一次落地实践\"}]}]}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>