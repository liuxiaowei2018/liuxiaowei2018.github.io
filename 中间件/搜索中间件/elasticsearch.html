<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Elasticsearch | 某不知名小开发</title>
    <meta name="description" content="在线文档">
    <link rel="preload stylesheet" href="/assets/style.edc773f7.css" as="style">
    
    <script type="module" src="/assets/app.fdb777a7.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.8048b864.js">
    <link rel="modulepreload" href="/assets/chunks/theme.4a9c9a8b.js">
    <link rel="modulepreload" href="/assets/中间件_搜索中间件_elasticsearch.md.60893209.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-a0fd61f4><div class="container" data-v-a0fd61f4><div class="title" data-v-a0fd61f4><div class="VPNavBarTitle has-sidebar" data-v-a0fd61f4 data-v-86d1bed8><a class="title" href="/" data-v-86d1bed8><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-8426fc1a><!--]--><!--[-->伟酱<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-a0fd61f4><div class="curtain" data-v-a0fd61f4></div><div class="content-body" data-v-a0fd61f4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-a0fd61f4><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a0fd61f4 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/index.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>更新日志</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>经验</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/%E7%94%9F%E4%BA%A7%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/index.html" data-v-43f1e123><!--[-->生产问题记录<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/%E7%94%9F%E4%BA%A7%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/20230802q1.html" data-v-43f1e123><!--[-->生产性能优化<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/%E7%9F%A5%E8%AF%86%E9%80%9F%E6%9F%A5%E5%BA%93/%E6%97%A5%E5%B8%B8%E5%BC%80%E5%8F%91%E5%B0%8F%E7%BB%93.html" data-v-43f1e123><!--[-->知识速查库<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/%E5%B7%A5%E5%85%B7%E9%9B%86/index.html" data-v-43f1e123><!--[-->工具集<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a0fd61f4 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-e6aabb21 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a0fd61f4 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/liuxiaowei2018" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a0fd61f4 data-v-40855f84 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/liuxiaowei2018" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a0fd61f4 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-5a346dfe data-v-79c8c1df><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-79c8c1df><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-79c8c1df><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-79c8c1df>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-79c8c1df data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-5a346dfe data-v-b00e2fdd><div class="curtain" data-v-b00e2fdd></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b00e2fdd><span class="visually-hidden" id="sidebar-aria-label" data-v-b00e2fdd> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 has-active" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>搜索中间件</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%90%9C%E7%B4%A2%E4%B8%AD%E9%97%B4%E4%BB%B6/elasticsearch.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>elasticsearch</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-d330b1bb><div class="content" data-v-d330b1bb><div class="outline-marker" data-v-d330b1bb></div><div class="outline-title" role="heading" aria-level="2" data-v-d330b1bb>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d330b1bb><span class="visually-hidden" id="doc-outline-aria-label" data-v-d330b1bb> Table of Contents for current page </span><ul class="root" data-v-d330b1bb data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _%E4%B8%AD%E9%97%B4%E4%BB%B6_%E6%90%9C%E7%B4%A2%E4%B8%AD%E9%97%B4%E4%BB%B6_elasticsearch" data-v-6b87e69f><div><h1 id="elasticsearch" tabindex="-1">Elasticsearch <a class="header-anchor" href="#elasticsearch" aria-label="Permalink to &quot;Elasticsearch&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#_1、elasticsearch应用">1、Elasticsearch应用</a><ul><li><a href="#es语法">ES语法</a></li><li><a href="#es调优">ES调优(*)</a></li><li><a href="#elk日志平台">ELK日志平台</a></li></ul></li><li><a href="#_2、elasticsearch扩展">2、Elasticsearch扩展</a></li></ul></nav><h2 id="_1、elasticsearch应用" tabindex="-1">1、Elasticsearch应用 <a class="header-anchor" href="#_1、elasticsearch应用" aria-label="Permalink to &quot;1、Elasticsearch应用&quot;">​</a></h2><blockquote><p>官方文档：<a href="https://www.elastic.co/guide/index.html" target="_blank" rel="noreferrer">https://www.elastic.co/guide/index.html</a></p></blockquote><h3 id="es语法" tabindex="-1">ES语法 <a class="header-anchor" href="#es语法" aria-label="Permalink to &quot;ES语法&quot;">​</a></h3><table><thead><tr><th>概念</th><th>说明</th></tr></thead><tbody><tr><td>索引库（indices)</td><td>indices是index的复数，代表索引集</td></tr><tr><td>文档（document）</td><td>存入索引库原始的数据。比如每一条商品信息，就是一个文档</td></tr><tr><td>字段（field）</td><td>文档中的属性</td></tr><tr><td>映射配置（mappings）</td><td>字段的数据类型、属性、是否索引、是否存储等特性</td></tr></tbody></table><h4 id="索引" tabindex="-1">索引 <a class="header-anchor" href="#索引" aria-label="Permalink to &quot;索引&quot;">​</a></h4><h5 id="创建索引" tabindex="-1">创建索引 <a class="header-anchor" href="#创建索引" aria-label="Permalink to &quot;创建索引&quot;">​</a></h5><p>创建索引的请求格式：</p><ul><li><p>请求方式：PUT</p></li><li><p>请求路径：/索引库名</p></li><li><p>请求参数：</p><ul><li><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;settings&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;number_of_shards&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;number_of_replicas&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;settings&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;number_of_shards&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;number_of_replicas&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></li><li><p>settings：索引库的设置</p><ul><li>number_of_shards：分片数量</li><li>number_of_replicas：副本数量</li></ul></li></ul></li></ul><p><strong>使用kibana创建</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">PUT [index]</span></span>
<span class="line"><span style="color:#e1e4e8;">{</span></span>
<span class="line"><span style="color:#e1e4e8;">  &quot;settings&quot;: {</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;number_of_shards&quot;: 3,</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;number_of_replicas&quot;: 2</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">PUT [index]</span></span>
<span class="line"><span style="color:#24292e;">{</span></span>
<span class="line"><span style="color:#24292e;">  &quot;settings&quot;: {</span></span>
<span class="line"><span style="color:#24292e;">    &quot;number_of_shards&quot;: 3,</span></span>
<span class="line"><span style="color:#24292e;">    &quot;number_of_replicas&quot;: 2</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301646532.png" alt="image-20220331235027502"></p><h5 id="查看索引设置" tabindex="-1">查看索引设置 <a class="header-anchor" href="#查看索引设置" aria-label="Permalink to &quot;查看索引设置&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GET [index]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GET [index]</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301646487.png" alt="image-20220331235314112"></p><p>使用 **GET * ** 查询所有索引库的配置</p><p>使用 **HEAD [index] ** 查看索引是否存在</p><h5 id="删除索引" tabindex="-1">删除索引 <a class="header-anchor" href="#删除索引" aria-label="Permalink to &quot;删除索引&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">DELETE /索引库名</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">DELETE /索引库名</span></span></code></pre></div><h4 id="映射配置" tabindex="-1">映射配置 <a class="header-anchor" href="#映射配置" aria-label="Permalink to &quot;映射配置&quot;">​</a></h4><h5 id="创建映射字段" tabindex="-1">创建映射字段 <a class="header-anchor" href="#创建映射字段" aria-label="Permalink to &quot;创建映射字段&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">PUT /索引库名/_mapping/类型名称</span></span>
<span class="line"><span style="color:#e1e4e8;">{</span></span>
<span class="line"><span style="color:#e1e4e8;">  &quot;properties&quot;: {</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;字段名&quot;: {</span></span>
<span class="line"><span style="color:#e1e4e8;">      &quot;type&quot;: &quot;类型&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      &quot;index&quot;: true，</span></span>
<span class="line"><span style="color:#e1e4e8;">      &quot;store&quot;: true，</span></span>
<span class="line"><span style="color:#e1e4e8;">      &quot;analyzer&quot;: &quot;分词器&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">PUT /索引库名/_mapping/类型名称</span></span>
<span class="line"><span style="color:#24292e;">{</span></span>
<span class="line"><span style="color:#24292e;">  &quot;properties&quot;: {</span></span>
<span class="line"><span style="color:#24292e;">    &quot;字段名&quot;: {</span></span>
<span class="line"><span style="color:#24292e;">      &quot;type&quot;: &quot;类型&quot;,</span></span>
<span class="line"><span style="color:#24292e;">      &quot;index&quot;: true，</span></span>
<span class="line"><span style="color:#24292e;">      &quot;store&quot;: true，</span></span>
<span class="line"><span style="color:#24292e;">      &quot;analyzer&quot;: &quot;分词器&quot;</span></span>
<span class="line"><span style="color:#24292e;">    }</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><ul><li><p>类型名称：type类似于数据库中的不同表[已移除]</p></li><li><p>字段名：任意填写 ，可以指定许多属性，例如：</p><ul><li>type：类型，可以是text、long、short、date、integer、object等</li><li>index：是否索引，默认为true</li><li>store：是否存储，默认为false</li><li>analyzer：分词器，这里的ik_max_word即使用ik分词器</li></ul></li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">PUT weige/_mapping</span></span>
<span class="line"><span style="color:#e1e4e8;">{</span></span>
<span class="line"><span style="color:#e1e4e8;">  &quot;properties&quot;:{</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;title&quot;:{</span></span>
<span class="line"><span style="color:#e1e4e8;">      &quot;type&quot;:&quot;text&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      &quot;analyzer&quot;:&quot;ik_max_word&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">    },</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;images&quot;:{</span></span>
<span class="line"><span style="color:#e1e4e8;">      &quot;type&quot;:&quot;keyword&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      &quot;index&quot;:&quot;false&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">    },</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;price&quot;:{</span></span>
<span class="line"><span style="color:#e1e4e8;">      &quot;type&quot;:&quot;float&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">PUT weige/_mapping</span></span>
<span class="line"><span style="color:#24292e;">{</span></span>
<span class="line"><span style="color:#24292e;">  &quot;properties&quot;:{</span></span>
<span class="line"><span style="color:#24292e;">    &quot;title&quot;:{</span></span>
<span class="line"><span style="color:#24292e;">      &quot;type&quot;:&quot;text&quot;,</span></span>
<span class="line"><span style="color:#24292e;">      &quot;analyzer&quot;:&quot;ik_max_word&quot;</span></span>
<span class="line"><span style="color:#24292e;">    },</span></span>
<span class="line"><span style="color:#24292e;">    &quot;images&quot;:{</span></span>
<span class="line"><span style="color:#24292e;">      &quot;type&quot;:&quot;keyword&quot;,</span></span>
<span class="line"><span style="color:#24292e;">      &quot;index&quot;:&quot;false&quot;</span></span>
<span class="line"><span style="color:#24292e;">    },</span></span>
<span class="line"><span style="color:#24292e;">    &quot;price&quot;:{</span></span>
<span class="line"><span style="color:#24292e;">      &quot;type&quot;:&quot;float&quot;</span></span>
<span class="line"><span style="color:#24292e;">    }</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><h5 id="查看映射关系" tabindex="-1">查看映射关系 <a class="header-anchor" href="#查看映射关系" aria-label="Permalink to &quot;查看映射关系&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GET /索引库名/_mapping</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GET /索引库名/_mapping</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301646543.png" alt="image-20220401000458822"></p><h5 id="字段属性详解" tabindex="-1">字段属性详解 <a class="header-anchor" href="#字段属性详解" aria-label="Permalink to &quot;字段属性详解&quot;">​</a></h5><h6 id="type" tabindex="-1">type <a class="header-anchor" href="#type" aria-label="Permalink to &quot;type&quot;">​</a></h6><blockquote><p>参考文档：<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.16/mapping-types.html" target="_blank" rel="noreferrer">https://www.elastic.co/guide/en/elasticsearch/reference/7.16/mapping-types.html</a></p></blockquote><p><strong>常用属性</strong>：</p><ul><li><p>String类型，又分两种：</p><ul><li>text：可分词，不可参与聚合</li><li>keyword：不可分词，数据会作为完整字段进行匹配，可以参与聚合</li></ul></li><li><p>Numerical：数值类型，分两类</p><ul><li>基本数据类型：long、interger、short、byte、double、float、half_float</li><li>浮点数的高精度类型：scaled_float <ul><li>需要指定一个精度因子，比如10或100。elasticsearch会把真实值乘以这个因子后存储，取出时再还原。</li></ul></li></ul></li><li><p>Date：日期类型</p></li></ul><p>​ elasticsearch可以对日期格式化为字符串存储，但是建议我们存储为毫秒值，存储为long，节省空间。</p><ul><li>复杂类型如：数组，对象等</li></ul><p>​ 比如存了个json对象：{people:{&quot;name&quot;:&quot;zhangSan&quot;,&quot;age&quot;:25}}，这个对象会被处理成两个字段：people.name和people.age</p><h6 id="index影响字段的索引情况" tabindex="-1">index影响字段的索引情况 <a class="header-anchor" href="#index影响字段的索引情况" aria-label="Permalink to &quot;index影响字段的索引情况&quot;">​</a></h6><ul><li><p>true：字段会被索引，则可以用来进行搜索。默认值就是true</p></li><li><p>false：字段不会被索引，不能用来搜索</p></li></ul><p>index的默认值就是true，也就是说你不进行任何配置，所有字段都会被索引。</p><p>但是有些字段是我们不希望被索引的，比如商品的图片信息，就需要手动设置index为false。</p><h6 id="store" tabindex="-1">store <a class="header-anchor" href="#store" aria-label="Permalink to &quot;store&quot;">​</a></h6><p>是否将数据进行额外存储。</p><p>在lucene和solr时，如果一个字段的store设置为false，那么在文档列表中就不会有这个字段的值，用户的搜索结果中不会显示出来。</p><p>但是在Elasticsearch中，即便store设置为false，也可以搜索到结果。原因是Elasticsearch在创建文档索引时，会将文档中的原始数据备份，保存到一个叫做_source的属性中。而且我们可以通过过滤_source来选择哪些要显示，哪些不显示。</p><p>而如果设置store为true，就会在_source以外额外存储一份数据，多余，因此一般我们都会将store设置为false，事实上，store的默认值就是false。</p><h4 id="新增数据" tabindex="-1">新增数据 <a class="header-anchor" href="#新增数据" aria-label="Permalink to &quot;新增数据&quot;">​</a></h4><h5 id="随机生成id" tabindex="-1">随机生成id <a class="header-anchor" href="#随机生成id" aria-label="Permalink to &quot;随机生成id&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">POST /索引库名</span></span>
<span class="line"><span style="color:#e1e4e8;">{</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;key&quot;:&quot;value&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">POST /索引库名</span></span>
<span class="line"><span style="color:#24292e;">{</span></span>
<span class="line"><span style="color:#24292e;">    &quot;key&quot;:&quot;value&quot;</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><h5 id="自定义id" tabindex="-1">自定义id <a class="header-anchor" href="#自定义id" aria-label="Permalink to &quot;自定义id&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">POST /索引库名/类型/id值{...}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">POST /weige/2</span></span>
<span class="line"><span style="color:#e1e4e8;">{</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;title&quot;:&quot;红米手机&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;images&quot;:&quot;http://image.leyou.com/12479122.jpg&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;price&quot;:2899.00</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">POST /索引库名/类型/id值{...}</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">POST /weige/2</span></span>
<span class="line"><span style="color:#24292e;">{</span></span>
<span class="line"><span style="color:#24292e;">    &quot;title&quot;:&quot;红米手机&quot;,</span></span>
<span class="line"><span style="color:#24292e;">    &quot;images&quot;:&quot;http://image.leyou.com/12479122.jpg&quot;,</span></span>
<span class="line"><span style="color:#24292e;">    &quot;price&quot;:2899.00</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><h6 id="智能判断" tabindex="-1">智能判断 <a class="header-anchor" href="#智能判断" aria-label="Permalink to &quot;智能判断&quot;">​</a></h6><blockquote><p>在Solr中新增数据，只能使用提前配置好映射属性的字段，否则就会报错</p><p>在Elasticsearch中，不需要给索引库设置任何mapping映射，它也可以根据你输入的数据来判断类型，动态添加数据映射</p></blockquote><h4 id="修改数据" tabindex="-1">修改数据 <a class="header-anchor" href="#修改数据" aria-label="Permalink to &quot;修改数据&quot;">​</a></h4><p>新增的请求方式改为PUT，就是修改了。<strong>修改必须指定id</strong></p><ul><li>id对应文档存在，则修改</li><li>id对应文档不存在，则新增</li></ul><h4 id="删除数据" tabindex="-1">删除数据 <a class="header-anchor" href="#删除数据" aria-label="Permalink to &quot;删除数据&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">DELETE /索引库名/id值</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">DELETE /索引库名/id值</span></span></code></pre></div><h4 id="查询" tabindex="-1">查询 <a class="header-anchor" href="#查询" aria-label="Permalink to &quot;查询&quot;">​</a></h4><ul><li>基本查询</li><li>结果过滤_source</li><li>高级查询</li><li>filter过滤</li><li>排序</li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">GET _search</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;query&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;match_all&quot;</span><span style="color:#E1E4E8;">: {}</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">GET _search</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;query&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;match_all&quot;</span><span style="color:#24292E;">: {}</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><blockquote><p>返回结果分析</p><ul><li>took：本次操作花费的时间，单位为毫秒</li><li>time_out：请求是否超时</li><li>_shards：说明本次操作共搜索了哪些分片</li><li>hits：搜索命中的记录</li><li>hits.total：符合条件的文档总数hits.hits：匹配度较高的前N个文档</li><li>hits.max_score：文档匹配得分，这里为最高分</li><li>_score：每个文档都有一个匹配得分，按照降序排列</li><li>source：显示了文档的原始内容</li></ul></blockquote><h5 id="基本查询" tabindex="-1">基本查询 <a class="header-anchor" href="#基本查询" aria-label="Permalink to &quot;基本查询&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GET /索引库名/_search</span></span>
<span class="line"><span style="color:#e1e4e8;">{</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;query&quot;:{</span></span>
<span class="line"><span style="color:#e1e4e8;">        &quot;查询类型&quot;:{</span></span>
<span class="line"><span style="color:#e1e4e8;">            &quot;查询条件&quot;:&quot;查询条件值&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">        }</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GET /索引库名/_search</span></span>
<span class="line"><span style="color:#24292e;">{</span></span>
<span class="line"><span style="color:#24292e;">    &quot;query&quot;:{</span></span>
<span class="line"><span style="color:#24292e;">        &quot;查询类型&quot;:{</span></span>
<span class="line"><span style="color:#24292e;">            &quot;查询条件&quot;:&quot;查询条件值&quot;</span></span>
<span class="line"><span style="color:#24292e;">        }</span></span>
<span class="line"><span style="color:#24292e;">    }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><p>这里的query代表一个查询对象，里面可以有不同的查询属性</p><ul><li>查询类型：例如：<code>match_all</code>， <code>match</code>，<code>term</code> ， <code>range</code> 等 <ul><li>查询条件：查询条件会根据类型的不同，写法也有差异</li></ul></li></ul><h6 id="查询所有-match-all" tabindex="-1">查询所有（match_all) <a class="header-anchor" href="#查询所有-match-all" aria-label="Permalink to &quot;查询所有（match_all)&quot;">​</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GET /索引库名/_search</span></span>
<span class="line"><span style="color:#e1e4e8;">{</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;query&quot;:{</span></span>
<span class="line"><span style="color:#e1e4e8;">        &quot;match_all&quot;: {}</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GET /索引库名/_search</span></span>
<span class="line"><span style="color:#24292e;">{</span></span>
<span class="line"><span style="color:#24292e;">    &quot;query&quot;:{</span></span>
<span class="line"><span style="color:#24292e;">        &quot;match_all&quot;: {}</span></span>
<span class="line"><span style="color:#24292e;">    }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301646101.png" alt="image-20220401004210342"></p><h6 id="匹配查询-match" tabindex="-1">匹配查询（match） <a class="header-anchor" href="#匹配查询-match" aria-label="Permalink to &quot;匹配查询（match）&quot;">​</a></h6><p>只有同时包含小米和电视的词条才会被搜索到</p><ul><li><p>or关系 match类型查询，会把查询条件进行分词，然后进行查询,多个词条之间是or的关系</p><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301646534.png" alt="image-20220401004219871"></p></li><li><p>and关系 某些情况下，我们需要更精确查找，我们希望这个关系变成and，可以这样做：</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301646893.png" alt="image-20220401004228377"></p><ul><li><p>minimum_should_match match 查询支持 minimum_should_match 最小匹配参数， 这让我们可以指定必须匹配的词项数用来表示一个文档是否相关。我们可以将其设置为某个具体数字，更常用的做法是将其设置为一个百分数，因为我们无法控制用户搜索时输入的单词数量： 如果用户给定的条件分词后有 5 个查询词项，想查找只包含其中 4 个词的文档 ，只需指定最小匹配数时80%。</p><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301647198.png" alt="image-20220401004235679"></p></li></ul><h6 id="多字段查询-multi-match" tabindex="-1">多字段查询（multi_match） <a class="header-anchor" href="#多字段查询-multi-match" aria-label="Permalink to &quot;多字段查询（multi_match）&quot;">​</a></h6><p>在title字段和brand字段中查询华为这个词 ，只要有一个满足就会被搜索到。</p><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301647149.png" alt="image-20220401004240722"></p><h6 id="词条匹配-term" tabindex="-1">词条匹配(term) <a class="header-anchor" href="#词条匹配-term" aria-label="Permalink to &quot;词条匹配(term)&quot;">​</a></h6><p><code>term</code> 查询被用于精确值匹配，这些精确值可能是数字、时间、布尔或者那些<strong>未分词</strong>的字符串 (keyword)</p><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301647757.png" alt="image-20220401004245375"></p><h6 id="多词条精确匹配-terms" tabindex="-1">多词条精确匹配(terms) <a class="header-anchor" href="#多词条精确匹配-terms" aria-label="Permalink to &quot;多词条精确匹配(terms)&quot;">​</a></h6><p><code>terms</code> 查询和 term 查询一样，但它允许你指定多值进行匹配。如果这个字段包含了指定值中的任何一个值，那么这个文档满足条件</p><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301647661.png" alt="image-20220401004250795"></p><h5 id="高级查询" tabindex="-1">高级查询 <a class="header-anchor" href="#高级查询" aria-label="Permalink to &quot;高级查询&quot;">​</a></h5><h6 id="布尔组合-bool" tabindex="-1">布尔组合（bool) <a class="header-anchor" href="#布尔组合-bool" aria-label="Permalink to &quot;布尔组合（bool)&quot;">​</a></h6><p><code>bool</code>把各种其它查询通过<code>must</code>（与）、<code>must_not</code>（非）、<code>should</code>（或）的方式进行组合</p><ul><li>与：搜索条件的分词都必须匹配,match和term都要满足</li><li>非：搜索条件分词必须都不匹配</li><li>或：搜索条件分词只要有匹配就可以</li></ul><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301647789.png" alt="image-20220401004320388"></p><h6 id="范围查询-range" tabindex="-1">范围查询(range) <a class="header-anchor" href="#范围查询-range" aria-label="Permalink to &quot;范围查询(range)&quot;">​</a></h6><p><code>range</code>查询允许以下字符：</p><table><thead><tr><th>操作符</th><th>说明</th></tr></thead><tbody><tr><td>gt</td><td>大于</td></tr><tr><td>gte</td><td>大于等于</td></tr><tr><td>lt</td><td>小于</td></tr><tr><td>lte</td><td>小于等于</td></tr></tbody></table><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301647204.png" alt="image-20220401004333552"></p><h6 id="模糊查询-fuzzy" tabindex="-1">模糊查询(fuzzy) <a class="header-anchor" href="#模糊查询-fuzzy" aria-label="Permalink to &quot;模糊查询(fuzzy)&quot;">​</a></h6><p><code>fuzzy</code> 查询是 <code>term</code> 查询的模糊等价。它允许用户搜索词条与实际词条的拼写出现偏差，不指定<code>fuzziness</code>默认是1个偏差距离，例如搜索apple,输入adpla,这时偏差距离是2，通过<code>fuzziness</code>来指定允许的编辑距离，但是偏差的距离不得超过2。</p><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301647158.png" alt="image-20220401004338025"></p><h5 id="过滤-filter" tabindex="-1">过滤(filter) <a class="header-anchor" href="#过滤-filter" aria-label="Permalink to &quot;过滤(filter)&quot;">​</a></h5><h6 id="条件查询中进行过滤" tabindex="-1">条件查询中进行过滤: <a class="header-anchor" href="#条件查询中进行过滤" aria-label="Permalink to &quot;条件查询中进行过滤:&quot;">​</a></h6><p>​ 所有的查询都会影响到文档的评分及排名。如果我们需要在查询结果中进行过滤，并且不希望过滤条件影响评分，那么就不要把过滤条件作为查询条件来用。而是使用filter方式 。例如我想搜索2000-3000的小米手机，但我又不希望价格影响到我搜索小米手机的文档得分，那我把价格的范围查询放在filter里面。 <img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301647141.png" alt="image-20220401004342263"></p><p>注意：<code>filter</code>中还可以再次进行<code>bool</code>组合条件过滤。</p><h6 id="无查询条件-直接过滤" tabindex="-1"><strong>无查询条件，直接过滤</strong> : <a class="header-anchor" href="#无查询条件-直接过滤" aria-label="Permalink to &quot;**无查询条件，直接过滤** :&quot;">​</a></h6><p>​ 如果一次查询只有过滤，没有查询条件，不希望进行评分，我们可以使用<code>constant_score</code>取代只有 filter 语句的 bool 查询。在性能上是完全相同的，但对于提高查询简洁性和清晰度有很大帮助。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GET /leyou/_search</span></span>
<span class="line"><span style="color:#e1e4e8;">{</span></span>
<span class="line"><span style="color:#e1e4e8;">  &quot;query&quot;: {</span></span>
<span class="line"><span style="color:#e1e4e8;">    &quot;constant_score&quot;: {</span></span>
<span class="line"><span style="color:#e1e4e8;">      &quot;filter&quot;: {</span></span>
<span class="line"><span style="color:#e1e4e8;">        &quot;range&quot;: {&quot;price&quot;: {&quot;gte&quot;: 2000, &quot;lte&quot;: 3000}}</span></span>
<span class="line"><span style="color:#e1e4e8;">      }</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GET /leyou/_search</span></span>
<span class="line"><span style="color:#24292e;">{</span></span>
<span class="line"><span style="color:#24292e;">  &quot;query&quot;: {</span></span>
<span class="line"><span style="color:#24292e;">    &quot;constant_score&quot;: {</span></span>
<span class="line"><span style="color:#24292e;">      &quot;filter&quot;: {</span></span>
<span class="line"><span style="color:#24292e;">        &quot;range&quot;: {&quot;price&quot;: {&quot;gte&quot;: 2000, &quot;lte&quot;: 3000}}</span></span>
<span class="line"><span style="color:#24292e;">      }</span></span>
<span class="line"><span style="color:#24292e;">    }</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><h5 id="排序" tabindex="-1">排序 <a class="header-anchor" href="#排序" aria-label="Permalink to &quot;排序&quot;">​</a></h5><h6 id="单字段排序" tabindex="-1">单字段排序 <a class="header-anchor" href="#单字段排序" aria-label="Permalink to &quot;单字段排序&quot;">​</a></h6><p><code>sort</code> 可以让我们按照不同的字段进行排序，并且通过<code>order</code>指定排序的方式</p><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301647295.png" alt="image-20220401004347383"></p><h6 id="多字段排序" tabindex="-1">多字段排序 <a class="header-anchor" href="#多字段排序" aria-label="Permalink to &quot;多字段排序&quot;">​</a></h6><p>假定我们想要结合使用 price和 _score（得分） 进行查询，并且匹配的结果首先按照价格排序，然后按照相关性得分排序：</p><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301647908.png" alt="image-20220401004351769"></p><h5 id="结果过滤" tabindex="-1">结果过滤 <a class="header-anchor" href="#结果过滤" aria-label="Permalink to &quot;结果过滤&quot;">​</a></h5><p>默认情况下，elasticsearch在搜索的结果中，会把文档中保存在<code>_source</code>的所有字段都返回。</p><p>只想获取其中的部分字段，可以添加<code>_source</code>的过滤</p><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301648046.png" alt="image-20220401004356436"></p><h6 id="指定includes和excludesincludes-来指定想要显示的字段" tabindex="-1">指定includes和excludesincludes：来指定想要显示的字段 <a class="header-anchor" href="#指定includes和excludesincludes-来指定想要显示的字段" aria-label="Permalink to &quot;指定includes和excludesincludes：来指定想要显示的字段&quot;">​</a></h6><ul><li>excludes：来指定不想要显示的字段</li></ul><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301648005.png" alt="image-20220401004439380"></p><h4 id="聚合-aggregations" tabindex="-1">聚合-aggregations <a class="header-anchor" href="#聚合-aggregations" aria-label="Permalink to &quot;聚合-aggregations&quot;">​</a></h4><p>聚合可以让我们极其方便的实现对数据的统计、分析。例如：</p><ul><li>什么品牌的手机最受欢迎？</li><li>这些手机的平均价格、最高价格、最低价格？</li><li>这些手机每月的销售情况如何？</li></ul><p>Elasticsearch中的聚合，包含多种类型，最常用的两种，一个叫<code>桶</code>，一个叫<code>度量</code>：</p><blockquote><p>Elasticsearch中提供的划分桶的方式有很多：</p><ul><li><p>Date Histogram Aggregation：根据日期阶梯分组，例如给定阶梯为周，会自动每周分为一组</p></li><li><p>Histogram Aggregation：根据数值阶梯分组，与日期类似 （以10为周期，自动分为0~10,10~20,20~30）</p></li><li><p>Terms Aggregation：根据词条内容分组，词条内容完全匹配的为一组</p></li><li><p>Range Aggregation：数值和日期的范围分组，指定开始和结束，然后按段分组</p></li><li><p>……</p></li></ul><p>综上所述，bucket aggregations 只负责对数据进行分组，并不进行计算</p></blockquote><blockquote><p>分组完成以后，我们一般会对组中的数据进行聚合运算，例如求平均值、最大、最小、求和等，这些在ES中称为度量</p><p>比较常用的一些度量聚合方式：</p><ul><li>Avg Aggregation：求平均值</li><li>Max Aggregation：求最大值</li><li>Min Aggregation：求最小值</li><li>Percentiles Aggregation：求百分比</li><li>Stats Aggregation：同时返回avg、max、min、sum、count等</li><li>Sum Aggregation：求和</li><li>Top hits Aggregation：求前几</li><li>Value Count Aggregation：求总数</li><li>……</li></ul></blockquote><blockquote><p>参考：<a href="https://blog.csdn.net/kavito/article/details/88290222?spm=1001.2101.3001.6650.14&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-14.pc_relevant_paycolumn_v3&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-14.pc_relevant_paycolumn_v3&amp;utm_relevant_index=18" target="_blank" rel="noreferrer">https://blog.csdn.net/kavito/article/details/88290222?spm=1001.2101.3001.6650.14&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-14.pc_relevant_paycolumn_v3&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-14.pc_relevant_paycolumn_v3&amp;utm_relevant_index=18</a></p></blockquote><h3 id="es调优" tabindex="-1">ES调优(*) <a class="header-anchor" href="#es调优" aria-label="Permalink to &quot;ES调优(*)&quot;">​</a></h3><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301648614.png" alt="image-20230628180805414"></p><h4 id="写入性能优化" tabindex="-1">写入性能优化 <a class="header-anchor" href="#写入性能优化" aria-label="Permalink to &quot;写入性能优化&quot;">​</a></h4><h5 id="业务优化" tabindex="-1">业务优化 <a class="header-anchor" href="#业务优化" aria-label="Permalink to &quot;业务优化&quot;">​</a></h5><p>在业务上，最常见的优化手段就是变<code>单条写入为批量写入</code>。而es本身支持批量插入，就是<code>bulk操作</code>。</p><p>常用优化方式是：<code>数据接入时，先不写库，而是直接推送到消息队列中（参考rabbitmq）。然后监听该队列，批量拿</code></p><p><code>消息</code>。一次拿1000条，最后将这1000条数据批量写入es。实测结果1000条批量写入耗时和单条写入耗时相差不</p><p>大。 除了按数量批量写入外，还可以<code>按照时间</code>。比如<code>每秒写入一次，有多少数量就写入多少</code>。其实这种方法应该更合</p><p>理，像mysql底层数据和日志落盘的策略，其中就有每秒落盘一次的策略。</p><h5 id="底层优化" tabindex="-1">底层优化 <a class="header-anchor" href="#底层优化" aria-label="Permalink to &quot;底层优化&quot;">​</a></h5><p>除了业务优化外，还有就是从底层优化。而底层优化，最常见的就是刷盘策略。因为我们都知道，正在的耗时</p><p>就是磁盘IO。</p><p>优化参数，如下：</p><table><thead><tr><th>参数</th><th>优化后值</th><th>含义</th></tr></thead><tbody><tr><td>index.refresh_interval</td><td>10s</td><td>缓存刷新时间，即10s后数据才能被搜索</td></tr><tr><td>index.translog.durability</td><td>async</td><td>异步</td></tr><tr><td>index.translog.flush_threshold_size</td><td>1024mb</td><td>translog大小达到多大时落盘</td></tr><tr><td>index.translog.sync_interval</td><td>30s</td><td>translog每隔多久落盘</td></tr></tbody></table><p>其中，效果最明显的就是<code>index.translog.durability</code>。它表示的是日志持久化策略，默认情况下是同步策</p><p>略，即写一条数据要等日志落盘后才返回。这种效率慢，但能保证数据安全性。</p><p>将index.translog.durability改为async后，就是异步策略。数据写入缓存后，里面返回，不会等待日志是否落盘</p><p>成功。这种效率很快，但数据安全性差。</p><h3 id="elk日志平台" tabindex="-1">ELK日志平台 <a class="header-anchor" href="#elk日志平台" aria-label="Permalink to &quot;ELK日志平台&quot;">​</a></h3><p>ELK 指的是⼀套完整的⽇志集中处理解决⽅案，将Elasticsearch + Logstash + Kibana 三个开源⼯具配合使⽤，以满足用户对⽇志的查询、排序、统计需求。</p><h4 id="elk常见架构" tabindex="-1">ELK常见架构 <a class="header-anchor" href="#elk常见架构" aria-label="Permalink to &quot;ELK常见架构&quot;">​</a></h4><h5 id="elasticsearch-logstash-kibana" tabindex="-1">Elasticsearch + Logstash + Kibana <a class="header-anchor" href="#elasticsearch-logstash-kibana" aria-label="Permalink to &quot;Elasticsearch + Logstash + Kibana&quot;">​</a></h5><p>这是一种最简单的架构。通过 Logstash 来收集日志，通过 Elasticsearch 对日志进行分析，将所得结果展示用 Kibana展示。</p><p>这种架构也是官网介绍的方式，但是在实际生产中很少使用。</p><h5 id="filebeat-elasticsearch-logstash-kibana" tabindex="-1">filebeat + Elasticsearch + Logstash + Kibana <a class="header-anchor" href="#filebeat-elasticsearch-logstash-kibana" aria-label="Permalink to &quot;filebeat + Elasticsearch + Logstash + Kibana&quot;">​</a></h5><p>相比第一种架构，此架构增加了一个 filebeat 模块。filebeat 是一个轻量的日志收集代理，部署在客户端。</p><p>优点: 相较于logstash消耗更少的资源</p><p>缺点: 当 logstash 出现故障时，日志会出现丢失。</p><h5 id="filebeat-kafka-elasticsearch-logstash-kibana" tabindex="-1">filebeat + kafka + Elasticsearch + Logstash + Kibana <a class="header-anchor" href="#filebeat-kafka-elasticsearch-logstash-kibana" aria-label="Permalink to &quot;filebeat + kafka + Elasticsearch + Logstash + Kibana&quot;">​</a></h5><p>这种架构是对于第二种架构的完善，通过增加中间件，来避免数据的丢失。</p><p>当 Logstash 出现故障，日志还存留在中间件中，当Logstash 再次启动，则会读取中间件中积压的日志。</p><h4 id="工作流程" tabindex="-1">工作流程 <a class="header-anchor" href="#工作流程" aria-label="Permalink to &quot;工作流程&quot;">​</a></h4><blockquote><p>第二种架构方式设计</p><p>参考文档：<a href="https://juejin.cn/post/7156897390962671624" target="_blank" rel="noreferrer">https://juejin.cn/post/7156897390962671624</a></p></blockquote><ol><li>Filebeat收集数据</li><li>将收集数据汇总给Logstash，Logstash进行数据清洗</li><li>将数据写入Elasticsearch</li><li>用Kibana进行可视化展示</li></ol><p><img src="https://cdn.jsdelivr.net/gh/liuxiaowei2018/image/repo/202405301648350.webp" alt="image-20230628180905414"></p><h2 id="_2、elasticsearch扩展" tabindex="-1">2、Elasticsearch扩展 <a class="header-anchor" href="#_2、elasticsearch扩展" aria-label="Permalink to &quot;2、Elasticsearch扩展&quot;">​</a></h2><p>分布式的文档储存引擎，分布式的搜索引擎和分析引擎，支持PB级的数据。秒级。</p><p>Cluster集群-&gt;多个Node节点-&gt;shard分片和replica副本。</p><p>与数据库类比，则index是数据库，type是数据表，document是行数据。</p><p><strong>原理</strong>：基于lucene，核心思想是在多台机器上启动多个ES进程实例，组成一个集群。es中储存数据的基本单位是索引，一个索引差不多就是相当于是mysql里的一张表。</p><p>分多个shard的好处一是支持横向扩展（数据越多就加到新机器），二是提高性能，一个查询多个机器并行执行。</p><p><strong>es写数据过程</strong>：</p><blockquote><ul><li>客户端选择一个node发送请求过去，这个node就是coordinating node协调节点。</li><li>协调节点对document进行路由，将请求转发给对应的node（有primary shard）。</li><li>实际的node上的primary shard处理请求，然后将数据同步到replica node。</li><li>协调节点如果发现primary node和所有的replica node都搞定之后，就返回响应结果给客户端。</li></ul></blockquote><p><strong>es读数据过程</strong>：通过doc id来查询，会根据doc id进行hash，判断分配到哪个shard。</p><blockquote><ul><li>客户端发送请求到任意一个node，成为coordinating node协调节点。</li><li>协调节点对doc id进行哈希路由，将请求转发到对应的node，此时会使用round-robin随机轮询算法，在primary shard以及其所有replica中随机选择一个，让读请求负载均衡。</li><li>接收请求的node返回document给coordinatingnode协调节点。</li><li>协调节点返回document给客户端。</li></ul></blockquote><p><strong>es搜索数据</strong>：最强大的是做全文检索。</p><blockquote><ul><li>客户端发送请求到一个coordinating node协调节点。</li><li>协调节点将搜索请求转发到所有的shard对应的primary node或replica node。</li><li>query phase：每个shard将自己的搜索结果（其实就是一些doc id）返回给协调节点，由协调节点继续数据的合并、排序、分页等操作，产出最终结果。</li><li>fetch phase：接着由协调节点根据doc id去各个节点上拉取实际的document数据，最终返回给客户端</li></ul></blockquote><p><strong>总结一下写数据</strong>，数据先写入内存 buffer，然后每隔 1s，将数据 refresh 到 os cache，到了 os cache 数据就能被搜索到（所以我们才说 es 从写入到能被搜索到，中间有 1s 的延迟）。每隔 5s，将数据写入 translog 文件（这样如果机器宕机，内存数据全没，最多会有 5s 的数据丢失），translog 大到一定程度，或者默认每隔 30mins，会触发 commit 操作，将缓冲区的数据都 flush 到 segment file 磁盘文件中。</p><p><strong>删除/更新数据底层原理</strong>：删除操作，commit的时候会生成一个.del文件，将某个doc标识为deleted状态，搜索的时候根据.del文件就知道这个doc是否被删除了。更新是将原来的doc标识为deleted状态，然后新写入一条数据。segment file默认一秒钟一个，越来越多，定期merge，这是deleted状态doc物理删除。</p><p><strong>数据量大之后查询慢</strong>：单纯去查segment file磁盘文件，速度得按秒级来，但是es有机制是将查询数据缓存到filesystem cache，理论上filesystem cache够大缓存所有，那么速度可以毫秒级。最佳是至少一半数据放到filesystem cache，当然也可以把索引数据都放到filesystem cache，例如一行数据三十个字段，只cache其中三个要查的数据，采用es+mysql/hbase，一般建议es+hbase。如果还是多，那就数据预热、冷热分离（冷热数据各写入一个索引，不同机器以使尽可能保证cache热数据）。</p><p>document模型设计避免复杂的关联查询，大表设计这样。</p><p><strong>es分页很差</strong>：翻页越深，性能越差，因为分布式汇总数据的原因。scroll api/search_after像下拉微博一样</p></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-ef5dee53><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"6f439892\",\"ai_ai学习路线.md\":\"f1ec74ab\",\"中间件_framework_alibaba_alibaba.md\":\"4f0e6d97\",\"中间件_framework_alibaba_nacos.md\":\"0b1681bd\",\"中间件_framework_alibaba_zookeeper.md\":\"fbbd27f1\",\"中间件_framework_alibaba_dubbo.md\":\"2df2211e\",\"中间件_framework_springcloud_springcloud.md\":\"03463651\",\"中间件_framework_springcloud_springcloudstream.md\":\"63c1344c\",\"中间件_开源中间件_权限框架_satoken.md\":\"82d07115\",\"中间件_开源中间件_工作流_flowable.md\":\"686aa25a\",\"中间件_开源中间件_工作流_compileflow.md\":\"43146eb6\",\"中间件_数据库中间件_db_oracle_oracle.md\":\"4d7b792d\",\"中间件_开源中间件_工作流_liteflow.md\":\"8412d254\",\"中间件_数据库中间件_db_postgresql_postgresql.md\":\"88a1d8bf\",\"java_java响应式编程.md\":\"60d43578\",\"中间件_开源中间件_权限框架_权限设计概述.md\":\"69e4316e\",\"中间件_framework_springcloud_springcloudgateway.md\":\"e0dc1db5\",\"中间件_搜索中间件_elasticsearch.md\":\"60893209\",\"中间件_开源中间件_分布式任务_xxljob.md\":\"6d08f1d3\",\"中间件_消息中间件_kafka.md\":\"5258044d\",\"中间件_开源中间件_权限框架_oauth2.md\":\"97f35c6c\",\"中间件_缓存中间件_memcached.md\":\"94b870fc\",\"大数据_k8s_k8s.md\":\"77596fd1\",\"大数据_大数据学习路线.md\":\"2721a489\",\"中间件_缓存中间件_redisson.md\":\"2d8dc88b\",\"系统设计_日志系统设计.md\":\"effd107d\",\"系统设计_如何做好架构设计.md\":\"1ef7446a\",\"系统设计_分布式事务设计.md\":\"17fbe2de\",\"中间件_数据库中间件_db_mongodb_mongodb.md\":\"078ae00b\",\"java_jvm_jvm调优.md\":\"7b9c74c4\",\"系统设计_多级缓存架构设计.md\":\"b77ff776\",\"中间件_framework_springcloud_hystrix.md\":\"6cd873f0\",\"中间件_framework_alibaba_sentinel.md\":\"a9921067\",\"中间件_framework_springcloud_openfeign.md\":\"62dd65b9\",\"生产问题记录_20230721q1.md\":\"c050ca0b\",\"生产问题记录_20230621q1.md\":\"a46f91f6\",\"更新日志_index.md\":\"6995e49d\",\"中间件_开源中间件_服务器_nginx.md\":\"260829eb\",\"系统设计_分布式id设计.md\":\"43ad86c5\",\"规范_数据库设计规范.md\":\"199aeedd\",\"系统设计_秒杀系统设计.md\":\"00e3d327\",\"中间件_数据库中间件_orm_mybatis.md\":\"a56cfde7\",\"规范_redis规范.md\":\"fe15cf46\",\"规范_mysql规范.md\":\"bd2056fb\",\"中间件_缓存中间件_redis.md\":\"8fc571ca\",\"生产问题记录_20230519q1.md\":\"bfd131eb\",\"中间件_数据库中间件_分库分表_shardingjdbc.md\":\"d8f755bf\",\"中间件_开源中间件_分布式任务_powerjob.md\":\"57cd6469\",\"大数据_数仓分层.md\":\"0d71c195\",\"中间件_framework_springboot_springboot.md\":\"1019a3d9\",\"中间件_数据库中间件_db_tidb_tidb.md\":\"505028c3\",\"系统设计_订单系统设计.md\":\"727c95eb\",\"中间件_数据库中间件_连接池_druid.md\":\"0e8879af\",\"系统设计_灰度架构设计.md\":\"32144397\",\"中间件_开源中间件_服务器_openresty.md\":\"c2417e21\",\"中间件_开源中间件_工作流_工作流概述.md\":\"9f413cc4\",\"中间件_消息中间件_rabbitmq.md\":\"3c38ad78\",\"知识速查库_linux常用命令.md\":\"3c0c4a4d\",\"知识速查库_常用docker镜像.md\":\"94798ce6\",\"中间件_消息中间件_rocketmq.md\":\"8eea5013\",\"中间件_framework_alibaba_seata.md\":\"4ee2df9b\",\"生产性能优化_20230802q1.md\":\"f63f8d81\",\"中间件_数据库中间件_orm_mybatisplus.md\":\"a19b5464\",\"中间件_数据库中间件_etl_canal.md\":\"4e86dba0\",\"中间件_开源中间件_服务器_netty.md\":\"61c5de9b\",\"java_java新特性.md\":\"bfa8ee68\",\"生产问题记录_20231020q1.md\":\"2499452f\",\"生产问题记录_index.md\":\"27c548b7\",\"中间件_消息中间件_pulsar.md\":\"37bffa09\",\"中间件_数据库中间件_db_mysql_mysql.md\":\"1bf51dc8\",\"知识速查库_日常开发小结.md\":\"1d724ad2\",\"系统设计_mysql-es数据初始化同步方案.md\":\"8876aa47\",\"java_jvm_jvm基础.md\":\"077e3511\",\"工具集_index.md\":\"a173c3f5\",\"中间件_framework_spring_spring.md\":\"172aff25\",\"java_java基础.md\":\"0263fc29\",\"java_juc_java多线程.md\":\"650d940f\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"某不知名小开发\",\"description\":\"在线文档\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"伟酱\",\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"更新日志\",\"link\":\"/更新日志/index\"},{\"text\":\"经验\",\"items\":[{\"text\":\"生产问题记录\",\"link\":\"/生产问题记录/index\"},{\"text\":\"生产性能优化\",\"link\":\"/生产性能优化/20230802q1\"},{\"text\":\"知识速查库\",\"link\":\"/知识速查库/日常开发小结\"},{\"text\":\"工具集\",\"link\":\"/工具集/index\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/liuxiaowei2018\"}],\"search\":{\"provider\":\"local\"},\"lastUpdated\":\"Last Updated\",\"smoothScroll\":true,\"sidebar\":{\"/java\":[{\"text\":\"Java SE\",\"collapsible\":true,\"items\":[{\"text\":\"Java基础\",\"link\":\"/java/java基础\"},{\"text\":\"Java新特性\",\"link\":\"/java/java新特性\"},{\"text\":\"Java响应式编程\",\"link\":\"/java/java响应式编程\"}]}],\"/java/juc\":[{\"text\":\"Java SE\",\"collapsible\":true,\"items\":[{\"text\":\"Java并发编程\",\"link\":\"/java/juc/java多线程\"}]}],\"/java/jvm\":[{\"text\":\"Java SE\",\"collapsible\":true,\"items\":[{\"text\":\"Jvm基础\",\"link\":\"/java/jvm/jvm基础\"},{\"text\":\"Jvm调优\",\"link\":\"/java/jvm/jvm调优\"}]}],\"/中间件/framework\":[{\"text\":\"常用开发框架\",\"collapsible\":true,\"items\":[{\"text\":\"spring\",\"link\":\"/中间件/framework/spring/spring\"},{\"text\":\"springBoot\",\"link\":\"/中间件/framework/springboot/springBoot\"}]}],\"/中间件/framework/springcloud\":[{\"text\":\"SpringCloud\",\"collapsible\":true,\"items\":[{\"text\":\"springCloudOpenFeign\",\"link\":\"/中间件/framework/springcloud/openFeign\"},{\"text\":\"springCloudHystrix\",\"link\":\"/中间件/framework/springcloud/hystrix\"},{\"text\":\"springCloudGateway\",\"link\":\"/中间件/framework/springcloud/springCloudGateway\"},{\"text\":\"springCloudStream\",\"link\":\"/中间件/framework/springcloud/springCloudStream\"}]}],\"/中间件/framework/alibaba\":[{\"text\":\"阿里中间件\",\"collapsible\":true,\"items\":[{\"text\":\"dubbo\",\"link\":\"/中间件/framework/alibaba/dubbo\"},{\"text\":\"nacos\",\"link\":\"/中间件/framework/alibaba/nacos\"},{\"text\":\"seata\",\"link\":\"/中间件/framework/alibaba/seata\"},{\"text\":\"sentinel\",\"link\":\"/中间件/framework/alibaba/sentinel\"},{\"text\":\"zookeeper\",\"link\":\"/中间件/framework/alibaba/zookeeper\"}]}],\"/中间件/数据库中间件\":[{\"text\":\"数据库中间件\",\"collapsible\":true,\"items\":[]}],\"/中间件/数据库中间件/db\":[{\"text\":\"数据库\",\"collapsible\":true,\"items\":[{\"text\":\"1.MySQL\",\"link\":\"/database/mysql\"},{\"text\":\"3.Oracle\",\"link\":\"/database/oracle\"},{\"text\":\"4.PostgreSQL\",\"link\":\"/database/postgreSQL\"},{\"text\":\"5.MongoDB\",\"link\":\"/database/mongoDB\"},{\"text\":\"6.TiDB\",\"link\":\"/database/tiDB\"}]}],\"/中间件/数据库中间件/orm\":[{\"text\":\"数据库中间件-orm框架\",\"collapsible\":true,\"items\":[{\"text\":\"mybatis\",\"link\":\"/中间件/数据库中间件/orm/mybatis\"},{\"text\":\"mybatisPlus\",\"link\":\"/中间件/数据库中间件/orm/mybatisPlus\"}]}],\"/中间件/数据库中间件/连接池\":[{\"text\":\"数据库中间件-连接池\",\"collapsible\":true,\"items\":[{\"text\":\"druid\",\"link\":\"/中间件/数据库中间件/连接池/druid\"}]}],\"/中间件/数据库中间件/分库分表\":[{\"text\":\"数据库中间件-连接池\",\"collapsible\":true,\"items\":[{\"text\":\"shardingJdbc\",\"link\":\"/中间件/数据库中间件/分库分表/shardingJdbc\"}]}],\"/中间件/数据库中间件/etl\":[{\"text\":\"数据库中间件-ETL\",\"collapsible\":true,\"items\":[{\"text\":\"canal\",\"link\":\"/中间件/数据库中间件/etl/canal\"}]}],\"/中间件/缓存中间件\":[{\"text\":\"缓存\",\"collapsible\":true,\"items\":[{\"text\":\"1.redis\",\"link\":\"/中间件/缓存中间件/redis\"},{\"text\":\"2.redisson\",\"link\":\"/中间件/缓存中间件/redisson\"},{\"text\":\"3.memcached\",\"link\":\"/中间件/缓存中间件/memcached\"}]}],\"/中间件/消息中间件\":[{\"text\":\"消息中间件\",\"collapsible\":true,\"items\":[{\"text\":\"rabbitMQ\",\"link\":\"/中间件/消息中间件/rabbitMQ\"},{\"text\":\"rocketMQ\",\"link\":\"/中间件/消息中间件/rocketMQ\"},{\"text\":\"kafka\",\"link\":\"/中间件/消息中间件/kafka\"},{\"text\":\"pulsar\",\"link\":\"/中间件/消息中间件/pulsar\"}]}],\"/中间件/搜索中间件\":[{\"text\":\"搜索中间件\",\"collapsible\":true,\"items\":[{\"text\":\"elasticsearch\",\"link\":\"/中间件/搜索中间件/elasticsearch\"}]}],\"/中间件/开源中间件/分布式任务\":[{\"text\":\"分布式任务\",\"collapsible\":true,\"items\":[{\"text\":\"xxlJob\",\"link\":\"/中间件/开源中间件/分布式任务/xxlJob\"},{\"text\":\"powerJob\",\"link\":\"/中间件/开源中间件/分布式任务/powerJob\"}]}],\"/中间件/开源中间件/工作流\":[{\"text\":\"工作流\",\"collapsible\":true,\"items\":[{\"text\":\"flowable\",\"link\":\"/中间件/开源中间件/工作流/flowable\"},{\"text\":\"compileflow\",\"link\":\"/中间件/开源中间件/工作流/compileflow\"},{\"text\":\"liteflow\",\"link\":\"/中间件/开源中间件/工作流/liteflow\"}]}],\"/中间件/开源中间件/权限框架\":[{\"text\":\"权限框架\",\"collapsible\":true,\"items\":[{\"text\":\"oauth2\",\"link\":\"/中间件/开源中间件/权限框架/oauth2\"},{\"text\":\"saToken\",\"link\":\"/中间件/开源中间件/权限框架/saToken\"}]}],\"/中间件/开源中间件/服务器\":[{\"text\":\"服务器\",\"collapsible\":true,\"items\":[{\"text\":\"nginx\",\"link\":\"/中间件/开源中间件/服务器/nginx\"},{\"text\":\"netty\",\"link\":\"/中间件/开源中间件/服务器/netty\"},{\"text\":\"openResty\",\"link\":\"/中间件/开源中间件/服务器/openresty\"}]}],\"/系统设计\":[{\"text\":\"系统设计\",\"collapsible\":true,\"items\":[{\"text\":\"1.如何做好架构设计\",\"link\":\"/系统设计/如何做好架构设计\"},{\"text\":\"2.分布式ID设计\",\"link\":\"/系统设计/分布式ID设计\"},{\"text\":\"3.多级缓存架构设计\",\"link\":\"/系统设计/多级缓存架构设计\"},{\"text\":\"4.日志系统设计\",\"link\":\"/系统设计/日志系统设计\"},{\"text\":\"5.分布式事务设计\",\"link\":\"/系统设计/分布式事务设计\"},{\"text\":\"6.灰度架构设计\",\"link\":\"/系统设计/灰度架构设计\"},{\"text\":\"7.秒杀系统设计\",\"link\":\"/系统设计/秒杀系统设计\"},{\"text\":\"8.订单系统设计\",\"link\":\"/系统设计/订单系统设计\"},{\"text\":\"9.Mysql-ES数据初始化同步方案\",\"link\":\"/系统设计/Mysql-ES数据初始化同步方案\"}]}],\"/生产问题记录\":[{\"text\":\"生产问题记录\",\"collapsible\":true,\"items\":[{\"text\":\"1.如何排查线上问题\",\"link\":\"/生产问题记录/index\"},{\"text\":\"2.线上服务器端口故障问题记录\",\"link\":\"/生产问题记录/20230519q1\"},{\"text\":\"3.线上pod 反复重启问题记录\",\"link\":\"/生产问题记录/20230621q1\"},{\"text\":\"4.线上pod OMM问题记录\",\"link\":\"/生产问题记录/20230721q1\"},{\"text\":\"5.线上pod 死锁问题记录\",\"link\":\"/生产问题记录/20231020q1\"}]}],\"/生产性能优化\":[{\"text\":\"生产性能优化\",\"collapsible\":true,\"items\":[{\"text\":\"接口性能优化1-2023.08.02\",\"link\":\"/生产性能优化/20230802q1\"}]}],\"/知识速查库\":[{\"text\":\"知识速查库\",\"collapsible\":true,\"items\":[{\"text\":\"1.日常开发小结\",\"link\":\"/知识速查库/日常开发小结\"},{\"text\":\"2.linux常用命令\",\"link\":\"/知识速查库/linux常用命令\"},{\"text\":\"3.常用docker镜像\",\"link\":\"/知识速查库/常用docker镜像\"}]}]}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>