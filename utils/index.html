<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>工具类库 | 某不知名小开发</title>
    <meta name="description" content="在线文档">
    <link rel="preload stylesheet" href="/assets/style.edc773f7.css" as="style">
    
    <script type="module" src="/assets/app.aed6b97e.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.8048b864.js">
    <link rel="modulepreload" href="/assets/chunks/theme.5c2518e5.js">
    <link rel="modulepreload" href="/assets/utils_index.md.7fde036e.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-a0fd61f4><div class="container" data-v-a0fd61f4><div class="title" data-v-a0fd61f4><div class="VPNavBarTitle" data-v-a0fd61f4 data-v-86d1bed8><a class="title" href="/" data-v-86d1bed8><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-8426fc1a><!--]--><!--[-->TheWe1<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-a0fd61f4><div class="curtain" data-v-a0fd61f4></div><div class="content-body" data-v-a0fd61f4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-a0fd61f4><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a0fd61f4 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/updated/index.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>更新日志</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>大数据</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/bigdata/path.html" data-v-43f1e123><!--[-->大数据学习路线<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/bigdata/layering.html" data-v-43f1e123><!--[-->数仓分层设计架构<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>算法</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/alg/structure/%E6%95%B0%E7%BB%84%E4%B8%8E%E9%93%BE%E8%A1%A8.html" data-v-43f1e123><!--[-->数据结构<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/alg/algorithm/%E5%A4%8D%E6%9D%82%E5%BA%A6.html" data-v-43f1e123><!--[-->Java算法<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/alg/topic/%E5%89%91%E6%8C%87Offer/index.html" data-v-43f1e123><!--[-->剑指Offer<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link vp-external-link-icon" href="https://www.baidu.com" target="_blank" rel="noreferrer" data-v-43f1e123><!--[-->LeetCode<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>经验</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/problem/index.html" data-v-43f1e123><!--[-->生产问题排查<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/optimize/index.html" data-v-43f1e123><!--[-->服务性能优化<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/utils/index.html" data-v-43f1e123><!--[-->常用工具类库<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>文献</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/books/book0001/index.html" data-v-43f1e123><!--[-->如何设计一个秒杀系统<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/books/book0002/00%E5%BC%80%E7%AF%87/index.html" data-v-43f1e123><!--[-->高并发系统设计40问<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/books/book0003/index.html" data-v-43f1e123><!--[-->DDD领域驱动设计<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a0fd61f4 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-e6aabb21 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a0fd61f4 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/liuxiaowei2018" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a0fd61f4 data-v-40855f84 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/liuxiaowei2018" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a0fd61f4 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav fixed reached-top" data-v-5a346dfe data-v-79c8c1df><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-79c8c1df data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><!----><div class="VPContent" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="VPDoc has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-d330b1bb><div class="content" data-v-d330b1bb><div class="outline-marker" data-v-d330b1bb></div><div class="outline-title" role="heading" aria-level="2" data-v-d330b1bb>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d330b1bb><span class="visually-hidden" id="doc-outline-aria-label" data-v-d330b1bb> Table of Contents for current page </span><ul class="root" data-v-d330b1bb data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _utils_" data-v-6b87e69f><div><h1 id="工具类库" tabindex="-1">工具类库 <a class="header-anchor" href="#工具类库" aria-label="Permalink to &quot;工具类库&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#guava">Guava</a><ul><li><a href="#集合工具">集合工具</a></li><li><a href="#cache本地缓存">Cache本地缓存</a></li><li><a href="#retry重试">Retry重试</a></li><li><a href="#eventbus总线">EventBus总线</a></li></ul></li><li><a href="#hotool">Hotool</a><ul><li><a href="#_1-convert">1.Convert</a></li><li><a href="#_2-dateutil">2.DateUtil</a></li><li><a href="#_3-jsonutil">3.JSONUtil</a></li><li><a href="#_4-strutil">4.StrUtil</a></li><li><a href="#_5-reflectutil">5.ReflectUtil</a></li><li><a href="#_6-numberutil">6.NumberUtil</a></li><li><a href="#_7-beanutil">7.BeanUtil</a></li><li><a href="#_8-collutil">8.CollUtil</a></li><li><a href="#_9-maputil">9.MapUtil</a></li><li><a href="#_10-secureutil">10.SecureUtil</a></li><li><a href="#_11-captchautil">11.CaptchaUtil</a></li><li><a href="#_12-validator">12.Validator</a></li><li><a href="#_13-htmlutil">13.HtmlUtil</a></li><li><a href="#_14-cronutil">14.CronUtil</a></li></ul></li><li><a href="#easyexcel">Easyexcel</a></li><li><a href="#knife4j">Knife4j</a></li><li><a href="#mapstruct">Mapstruct</a></li><li><a href="#forest">Forest</a><ul><li><a href="#springboot模式">SpringBoot模式</a></li><li><a href="#快捷接口-1-5-3">快捷接口（1.5.3）</a></li></ul></li><li><a href="#asynctool">AsyncTool</a><ul><li><a href="#应用场景">应用场景</a></li></ul></li></ul></nav><h2 id="guava" tabindex="-1">Guava <a class="header-anchor" href="#guava" aria-label="Permalink to &quot;Guava&quot;">​</a></h2><blockquote><p>官方文档：<a href="https://www.likecs.com/show-308475017.html" target="_blank" rel="noreferrer">https://www.likecs.com/show-308475017.html</a></p></blockquote><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;com.google.guava&lt;/</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;guava&lt;/</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;30.1.1-jre&lt;/</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;com.google.guava&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;guava&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;30.1.1-jre&lt;/</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h3 id="集合工具" tabindex="-1">集合工具 <a class="header-anchor" href="#集合工具" aria-label="Permalink to &quot;集合工具&quot;">​</a></h3><h4 id="table-双键map" tabindex="-1">Table - 双键Map <a class="header-anchor" href="#table-双键map" aria-label="Permalink to &quot;Table - 双键Map&quot;">​</a></h4><blockquote><p>java中的<code>Map</code>只允许有一个<code>key</code>和一个<code>value</code>存在，但是guava中的<code>Table</code>允许一个<code>value</code>存在两个<code>key</code>。<code>Table</code>中的两个<code>key</code>分别被称为<code>rowKey</code>和<code>columnKey</code>，也就是行和列。</p><p>table由双主键R（行）,C（列）共同决定，V是存储值</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">Table&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">,</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">,</span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; table</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> HashBasedTable.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#6A737D;">//存放元素</span></span>
<span class="line"><span style="color:#E1E4E8;">table.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Hydra&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;Jan&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">table.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Hydra&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;Feb&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">28</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">table.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Trunks&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;Jan&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">28</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">table.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Trunks&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;Feb&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//取出元素</span></span>
<span class="line"><span style="color:#E1E4E8;">Integer dayCount </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> table.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Hydra&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;Feb&quot;</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">Table&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; table</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> HashBasedTable.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">//存放元素</span></span>
<span class="line"><span style="color:#24292E;">table.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Hydra&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;Jan&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">table.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Hydra&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;Feb&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">28</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">table.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Trunks&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;Jan&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">28</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">table.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Trunks&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;Feb&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//取出元素</span></span>
<span class="line"><span style="color:#24292E;">Integer dayCount </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> table.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Hydra&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;Feb&quot;</span><span style="color:#24292E;">);</span></span></code></pre></div><p><code>获得key或value的集合</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//rowKey或columnKey的集合</span></span>
<span class="line"><span style="color:#E1E4E8;">Set&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">&gt; rowKeys </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> table.</span><span style="color:#B392F0;">rowKeySet</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">Set&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">&gt; columnKeys </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> table.</span><span style="color:#B392F0;">columnKeySet</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//value集合</span></span>
<span class="line"><span style="color:#E1E4E8;">Collection&lt;</span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; values </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> table.</span><span style="color:#B392F0;">values</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#6A737D;">//key的集合是不包含重复元素的，value集合则包含了所有元素并没有去重</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//rowKey或columnKey的集合</span></span>
<span class="line"><span style="color:#24292E;">Set&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; rowKeys </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> table.</span><span style="color:#6F42C1;">rowKeySet</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">Set&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; columnKeys </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> table.</span><span style="color:#6F42C1;">columnKeySet</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//value集合</span></span>
<span class="line"><span style="color:#24292E;">Collection&lt;</span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; values </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> table.</span><span style="color:#6F42C1;">values</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">//key的集合是不包含重复元素的，value集合则包含了所有元素并没有去重</span></span></code></pre></div><p><code>计算key对应的所有value的和</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//统计所有rowKey对应的value之和</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (String key </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> table.</span><span style="color:#B392F0;">rowKeySet</span><span style="color:#E1E4E8;">()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">   Set&lt;</span><span style="color:#F97583;">Map</span><span style="color:#E1E4E8;">.</span><span style="color:#F97583;">Entry</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt;&gt; rows </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> table.</span><span style="color:#B392F0;">row</span><span style="color:#E1E4E8;">(key).</span><span style="color:#B392F0;">entrySet</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> total </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (Map.Entry&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; row </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> rows) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          total </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> row.</span><span style="color:#B392F0;">getValue</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">   }</span></span>
<span class="line"><span style="color:#E1E4E8;">   System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(key </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;: &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> total);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//统计所有rowKey对应的value之和</span></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (String key </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> table.</span><span style="color:#6F42C1;">rowKeySet</span><span style="color:#24292E;">()) {</span></span>
<span class="line"><span style="color:#24292E;">   Set&lt;</span><span style="color:#D73A49;">Map</span><span style="color:#24292E;">.</span><span style="color:#D73A49;">Entry</span><span style="color:#24292E;">&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt;&gt; rows </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> table.</span><span style="color:#6F42C1;">row</span><span style="color:#24292E;">(key).</span><span style="color:#6F42C1;">entrySet</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> total </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (Map.Entry&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; row </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> rows) {</span></span>
<span class="line"><span style="color:#24292E;">          total </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> row.</span><span style="color:#6F42C1;">getValue</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">   }</span></span>
<span class="line"><span style="color:#24292E;">   System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(key </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;: &quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> total);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><code>转换rowKey和columnKey</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">Table&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; table2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Tables.</span><span style="color:#B392F0;">transpose</span><span style="color:#E1E4E8;">(table);</span></span>
<span class="line"><span style="color:#6A737D;">//cellSet方法可以得到所有的数据行</span></span>
<span class="line"><span style="color:#E1E4E8;">Set&lt;</span><span style="color:#F97583;">Table</span><span style="color:#E1E4E8;">.</span><span style="color:#F97583;">Cell</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt;&gt; cells </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> table2.</span><span style="color:#B392F0;">cellSet</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">cells.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(cell</span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(cell.</span><span style="color:#B392F0;">getRowKey</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">&quot;,&quot;</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;">cell.</span><span style="color:#B392F0;">getColumnKey</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">&quot;:&quot;</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;">cell.</span><span style="color:#B392F0;">getValue</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">            );</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">Table&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; table2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Tables.</span><span style="color:#6F42C1;">transpose</span><span style="color:#24292E;">(table);</span></span>
<span class="line"><span style="color:#6A737D;">//cellSet方法可以得到所有的数据行</span></span>
<span class="line"><span style="color:#24292E;">Set&lt;</span><span style="color:#D73A49;">Table</span><span style="color:#24292E;">.</span><span style="color:#D73A49;">Cell</span><span style="color:#24292E;">&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt;&gt; cells </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> table2.</span><span style="color:#6F42C1;">cellSet</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">cells.</span><span style="color:#6F42C1;">forEach</span><span style="color:#24292E;">(cell</span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(cell.</span><span style="color:#6F42C1;">getRowKey</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">&quot;,&quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">cell.</span><span style="color:#6F42C1;">getColumnKey</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">&quot;:&quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">cell.</span><span style="color:#6F42C1;">getValue</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">            );</span></span></code></pre></div><p><code>转为嵌套的Map</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//转换格式后的Map中的内容，分别按照行和列进行了汇总</span></span>
<span class="line"><span style="color:#E1E4E8;">Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt;&gt; rowMap </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> table.</span><span style="color:#B392F0;">rowMap</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt;&gt; columnMap </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> table.</span><span style="color:#B392F0;">columnMap</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//转换格式后的Map中的内容，分别按照行和列进行了汇总</span></span>
<span class="line"><span style="color:#24292E;">Map&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, Map&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt;&gt; rowMap </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> table.</span><span style="color:#6F42C1;">rowMap</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">Map&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, Map&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt;&gt; columnMap </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> table.</span><span style="color:#6F42C1;">columnMap</span><span style="color:#24292E;">();</span></span></code></pre></div></blockquote><h4 id="bimap-双向map" tabindex="-1">BiMap - 双向Map <a class="header-anchor" href="#bimap-双向map" aria-label="Permalink to &quot;BiMap - 双向Map&quot;">​</a></h4><blockquote><p><code>BiMap</code>提供了一种<code>key</code>和<code>value</code>双向关联的数据结构</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">HashBiMap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">&gt; biMap </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> HashBiMap.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">biMap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Hydra&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;Programmer&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">biMap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Tony&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;IronMan&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">biMap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Thanos&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;Titan&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">//使用key获取value</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(biMap.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Tony&quot;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">BiMap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">&gt; inverse </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> biMap.</span><span style="color:#B392F0;">inverse</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#6A737D;">//使用value获取key</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(inverse.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Titan&quot;</span><span style="color:#E1E4E8;">));</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">HashBiMap&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; biMap </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> HashBiMap.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">biMap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Hydra&quot;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&quot;Programmer&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">biMap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Tony&quot;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&quot;IronMan&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">biMap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Thanos&quot;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&quot;Titan&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">//使用key获取value</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(biMap.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Tony&quot;</span><span style="color:#24292E;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">BiMap&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; inverse </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> biMap.</span><span style="color:#6F42C1;">inverse</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">//使用value获取key</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(inverse.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Titan&quot;</span><span style="color:#24292E;">));</span></span></code></pre></div><p><code>inverse</code>方法反转了原来<code>BiMap</code>的键值映射，但是这个反转后的<code>BiMap</code>并不是一个新的对象，它实现了一种视图的关联，所以对反转后的<code>BiMap</code>执行的所有操作会作用于原先的<code>BiMap</code>上。</p><p><code>BiMap</code>的底层继承了<code>Map</code>，我们知道在<code>Map</code>中<code>key</code>是不允许重复的，而双向的<code>BiMap</code>中<code>key</code>和<code>value</code>可以认为处于等价地位，因此在这个基础上加了限制，<code>value</code>也是不允许重复的</p></blockquote><h4 id="multimap-多值map" tabindex="-1">Multimap - 多值Map <a class="header-anchor" href="#multimap-多值map" aria-label="Permalink to &quot;Multimap - 多值Map&quot;">​</a></h4><blockquote><p><code>Multimap</code>提供了将一个键映射到多个值的形式</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">Multimap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; multimap </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ArrayListMultimap.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">multimap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;day&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">multimap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;day&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">multimap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;day&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">multimap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;month&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">Multimap&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; multimap </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ArrayListMultimap.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">multimap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;day&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">multimap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;day&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">multimap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;day&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">multimap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;month&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">);</span></span></code></pre></div><p><code>获取值的集合</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">Collection&lt;</span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; day </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> multimap.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;day&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">ArrayListMultimap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; multimap </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ArrayListMultimap.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">List&lt;</span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; day </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> multimap.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;day&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//创建HashMultimap、TreeMultimap等类型的Multimap</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">Collection&lt;</span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; day </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> multimap.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;day&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">ArrayListMultimap&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; multimap </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ArrayListMultimap.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">List&lt;</span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; day </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> multimap.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;day&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//创建HashMultimap、TreeMultimap等类型的Multimap</span></span></code></pre></div><p><code>操作get后的集合</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//和BiMap的使用类似，使用get方法返回的集合也不是一个独立的对象，可以理解为集合视图的关联，对这个</span></span>
<span class="line"><span style="color:#6A737D;">//新集合的操作仍然会作用于原始的Multimap上</span></span>
<span class="line"><span style="color:#E1E4E8;">ArrayListMultimap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; multimap </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ArrayListMultimap.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">multimap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;day&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">multimap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;day&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">multimap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;day&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">multimap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;month&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">List&lt;</span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; day </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> multimap.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;day&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">List&lt;</span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; month </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> multimap.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;month&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">day.</span><span style="color:#B392F0;">remove</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;">//这个0是下标</span></span>
<span class="line"><span style="color:#E1E4E8;">month.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">12</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(multimap);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//和BiMap的使用类似，使用get方法返回的集合也不是一个独立的对象，可以理解为集合视图的关联，对这个</span></span>
<span class="line"><span style="color:#6A737D;">//新集合的操作仍然会作用于原始的Multimap上</span></span>
<span class="line"><span style="color:#24292E;">ArrayListMultimap&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; multimap </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ArrayListMultimap.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">multimap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;day&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">multimap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;day&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">multimap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;day&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">multimap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;month&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">List&lt;</span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; day </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> multimap.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;day&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">List&lt;</span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; month </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> multimap.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;month&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">day.</span><span style="color:#6F42C1;">remove</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span><span style="color:#6A737D;">//这个0是下标</span></span>
<span class="line"><span style="color:#24292E;">month.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">12</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(multimap);</span></span></code></pre></div><p><code>转换为Map</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//asMap方法，可以将Multimap转换为Map&lt;K,Collection&gt;的形式，同样这个Map也可以看做一个关联的视</span></span>
<span class="line"><span style="color:#6A737D;">//图，在这个Map上的操作会作用于原始的Multimap</span></span>
<span class="line"><span style="color:#E1E4E8;">Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, Collection&lt;</span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt;&gt; map </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> multimap.</span><span style="color:#B392F0;">asMap</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (String key </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> map.</span><span style="color:#B392F0;">keySet</span><span style="color:#E1E4E8;">()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">       System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(key</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">&quot; : &quot;</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(key));</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;day&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(multimap);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//asMap方法，可以将Multimap转换为Map&lt;K,Collection&gt;的形式，同样这个Map也可以看做一个关联的视</span></span>
<span class="line"><span style="color:#6A737D;">//图，在这个Map上的操作会作用于原始的Multimap</span></span>
<span class="line"><span style="color:#24292E;">Map&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, Collection&lt;</span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt;&gt; map </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> multimap.</span><span style="color:#6F42C1;">asMap</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (String key </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> map.</span><span style="color:#6F42C1;">keySet</span><span style="color:#24292E;">()) {</span></span>
<span class="line"><span style="color:#24292E;">       System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(key</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">&quot; : &quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(key));</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;day&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(multimap);</span></span></code></pre></div></blockquote><h4 id="rangemap-范围map" tabindex="-1">RangeMap - 范围Map <a class="header-anchor" href="#rangemap-范围map" aria-label="Permalink to &quot;RangeMap - 范围Map&quot;">​</a></h4><blockquote><p><code>RangeMap</code>描述了一种从区间到特定值的映射关系</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">RangeMap&lt;</span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">&gt; rangeMap </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> TreeRangeMap.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">rangeMap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(Range.</span><span style="color:#B392F0;">closedOpen</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;">),</span><span style="color:#9ECBFF;">&quot;fail&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">rangeMap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(Range.</span><span style="color:#B392F0;">closed</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">90</span><span style="color:#E1E4E8;">),</span><span style="color:#9ECBFF;">&quot;satisfactory&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">rangeMap.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(Range.</span><span style="color:#B392F0;">openClosed</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">90</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">),</span><span style="color:#9ECBFF;">&quot;excellent&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//先后创建了[0,60)的左闭右开区间、[60,90]的闭区间、(90,100]的左开右闭区间，分别映射到某个值上</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(rangeMap.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(rangeMap.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(rangeMap.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">90</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(rangeMap.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">91</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//移除了[70,80]这一闭区间</span></span>
<span class="line"><span style="color:#E1E4E8;">rangeMap.</span><span style="color:#B392F0;">remove</span><span style="color:#E1E4E8;">(Range.</span><span style="color:#B392F0;">closed</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">70</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(rangeMap.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">75</span><span style="color:#E1E4E8;">));</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">RangeMap&lt;</span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; rangeMap </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> TreeRangeMap.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">rangeMap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(Range.</span><span style="color:#6F42C1;">closedOpen</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">60</span><span style="color:#24292E;">),</span><span style="color:#032F62;">&quot;fail&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">rangeMap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(Range.</span><span style="color:#6F42C1;">closed</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">60</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">90</span><span style="color:#24292E;">),</span><span style="color:#032F62;">&quot;satisfactory&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">rangeMap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(Range.</span><span style="color:#6F42C1;">openClosed</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">90</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">100</span><span style="color:#24292E;">),</span><span style="color:#032F62;">&quot;excellent&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//先后创建了[0,60)的左闭右开区间、[60,90]的闭区间、(90,100]的左开右闭区间，分别映射到某个值上</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(rangeMap.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">59</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(rangeMap.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">60</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(rangeMap.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">90</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(rangeMap.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">91</span><span style="color:#24292E;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//移除了[70,80]这一闭区间</span></span>
<span class="line"><span style="color:#24292E;">rangeMap.</span><span style="color:#6F42C1;">remove</span><span style="color:#24292E;">(Range.</span><span style="color:#6F42C1;">closed</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">70</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">80</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(rangeMap.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">75</span><span style="color:#24292E;">));</span></span></code></pre></div></blockquote><h4 id="classtoinstancemap-实例map" tabindex="-1">ClassToInstanceMap - 实例Map <a class="header-anchor" href="#classtoinstancemap-实例map" aria-label="Permalink to &quot;ClassToInstanceMap - 实例Map&quot;">​</a></h4><blockquote><p><code>ClassToInstanceMap</code>是一个比较特殊的<code>Map</code>，它的键是<code>Class</code>，而值是这个<code>Class</code>对应的实例对象</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">ClassToInstanceMap&lt;</span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; instanceMap </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> MutableClassToInstanceMap.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">User user</span><span style="color:#F97583;">=new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">User</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Hydra&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">18</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">Dept dept</span><span style="color:#F97583;">=new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Dept</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;develop&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">instanceMap.</span><span style="color:#B392F0;">putInstance</span><span style="color:#E1E4E8;">(User.class,user);</span></span>
<span class="line"><span style="color:#E1E4E8;">instanceMap.</span><span style="color:#B392F0;">putInstance</span><span style="color:#E1E4E8;">(Dept.class,dept);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">ClassToInstanceMap&lt;</span><span style="color:#D73A49;">Object</span><span style="color:#24292E;">&gt; instanceMap </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> MutableClassToInstanceMap.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">User user</span><span style="color:#D73A49;">=new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">User</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Hydra&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">18</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">Dept dept</span><span style="color:#D73A49;">=new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Dept</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;develop&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">200</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">instanceMap.</span><span style="color:#6F42C1;">putInstance</span><span style="color:#24292E;">(User.class,user);</span></span>
<span class="line"><span style="color:#24292E;">instanceMap.</span><span style="color:#6F42C1;">putInstance</span><span style="color:#24292E;">(Dept.class,dept);</span></span></code></pre></div><p>``getInstance<code>方法取出对象</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">User user1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> instanceMap.</span><span style="color:#B392F0;">getInstance</span><span style="color:#E1E4E8;">(User.class);</span></span>
<span class="line"><span style="color:#6A737D;">//取出的确实是我们之前创建并放入的那个对象</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(user</span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;">user1);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">User user1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> instanceMap.</span><span style="color:#6F42C1;">getInstance</span><span style="color:#24292E;">(User.class);</span></span>
<span class="line"><span style="color:#6A737D;">//取出的确实是我们之前创建并放入的那个对象</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(user</span><span style="color:#D73A49;">==</span><span style="color:#24292E;">user1);</span></span></code></pre></div></blockquote><h4 id="multiset-多值set" tabindex="-1">MultiSet-多值Set <a class="header-anchor" href="#multiset-多值set" aria-label="Permalink to &quot;MultiSet-多值Set&quot;">​</a></h4><blockquote><p>MultiSet 有一个相对有用的场景，就是跟踪每种对象的数量，所以可以用来进行数量统计</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">Multiset&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">&gt; set </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> HashMultiset.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(T t);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">size</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">count</span><span style="color:#E1E4E8;">(T t);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">Multiset&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; set </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> HashMultiset.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(T t);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">size</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">count</span><span style="color:#24292E;">(T t);</span></span></code></pre></div></blockquote><h4 id="不可变集合" tabindex="-1">不可变集合 <a class="header-anchor" href="#不可变集合" aria-label="Permalink to &quot;不可变集合&quot;">​</a></h4><ul><li>ImmutableList</li><li>ImmutableSet</li><li>ImmutableMap</li></ul><h3 id="cache本地缓存" tabindex="-1">Cache本地缓存 <a class="header-anchor" href="#cache本地缓存" aria-label="Permalink to &quot;Cache本地缓存&quot;">​</a></h3><ul><li><p>LoadingCache 在实际场景中有着非常广泛的使用，通常情况下如果遇到需要大量时间计算或者缓存值的场景，就应当将值保存到缓存中。LoadingCache 和 ConcurrentMap 类似，但又不尽相同。最大的不同是 ConcurrentMap 会永久的存储所有的元素值直到他们被显示的移除，但是 LoadingCache 会为了保持内存使用合理会根据配置自动将过期值移除</p></li><li><p>通常情况下，Guava caching 适用于以下场景：</p></li><li><ul><li>花费一些内存来换取速度</li><li>一些 key 会被不止一次被调用</li><li>缓存内容有限，不会超过内存空间的值，Guava caches 不会存储内容到文件或者到服务器外部，如果有此类需求考虑使用 Memcached, Redis</li></ul></li><li><p>LoadingCache 不能缓存 null key</p></li><li><p>CacheBuilder 构造 LoadingCache 参数介绍</p><p><img src="/assets/image-utils-20220811163722172.c06b037f.png" alt="image-20220811163722172"></p></li></ul><blockquote><p>LoadingCache <code>V get(K key)</code>, 获取缓存值，如果键不存在值，将调用CacheLoader的load方法加载新值到该键中</p></blockquote><h3 id="retry重试" tabindex="-1">Retry重试 <a class="header-anchor" href="#retry重试" aria-label="Permalink to &quot;Retry重试&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Test</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">guavaRetry</span><span style="color:#E1E4E8;">() { </span></span>
<span class="line"><span style="color:#E1E4E8;">   Retryer&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">&gt; retryer </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> RetryerBuilder.</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">String</span><span style="color:#F97583;">&gt;</span><span style="color:#B392F0;">newBuilder</span><span style="color:#E1E4E8;">() </span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">retryIfExceptionOfType</span><span style="color:#E1E4E8;">(HelloRetryException.class) </span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">retryIfResult</span><span style="color:#E1E4E8;">(StringUtils</span><span style="color:#F97583;">::</span><span style="color:#E1E4E8;">isEmpty) </span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">withWaitStrategy</span><span style="color:#E1E4E8;">(WaitStrategies.</span><span style="color:#B392F0;">fixedWait</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, TimeUnit.SECONDS)) </span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">withStopStrategy</span><span style="color:#E1E4E8;">(StopStrategies.</span><span style="color:#B392F0;">stopAfterAttempt</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)) .</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">(); </span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> { </span></span>
<span class="line"><span style="color:#E1E4E8;">        retryer.</span><span style="color:#B392F0;">call</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> helloService.</span><span style="color:#B392F0;">hello</span><span style="color:#E1E4E8;">()); </span></span>
<span class="line"><span style="color:#E1E4E8;">   } </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (Exception </span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">){ </span></span>
<span class="line"><span style="color:#E1E4E8;">        e.</span><span style="color:#B392F0;">printStackTrace</span><span style="color:#E1E4E8;">(); </span></span>
<span class="line"><span style="color:#E1E4E8;">   } </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Test</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">guavaRetry</span><span style="color:#24292E;">() { </span></span>
<span class="line"><span style="color:#24292E;">   Retryer&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; retryer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> RetryerBuilder.</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">String</span><span style="color:#D73A49;">&gt;</span><span style="color:#6F42C1;">newBuilder</span><span style="color:#24292E;">() </span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">retryIfExceptionOfType</span><span style="color:#24292E;">(HelloRetryException.class) </span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">retryIfResult</span><span style="color:#24292E;">(StringUtils</span><span style="color:#D73A49;">::</span><span style="color:#24292E;">isEmpty) </span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">withWaitStrategy</span><span style="color:#24292E;">(WaitStrategies.</span><span style="color:#6F42C1;">fixedWait</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">, TimeUnit.SECONDS)) </span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">withStopStrategy</span><span style="color:#24292E;">(StopStrategies.</span><span style="color:#6F42C1;">stopAfterAttempt</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">)) .</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">(); </span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> { </span></span>
<span class="line"><span style="color:#24292E;">        retryer.</span><span style="color:#6F42C1;">call</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> helloService.</span><span style="color:#6F42C1;">hello</span><span style="color:#24292E;">()); </span></span>
<span class="line"><span style="color:#24292E;">   } </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (Exception </span><span style="color:#E36209;">e</span><span style="color:#24292E;">){ </span></span>
<span class="line"><span style="color:#24292E;">        e.</span><span style="color:#6F42C1;">printStackTrace</span><span style="color:#24292E;">(); </span></span>
<span class="line"><span style="color:#24292E;">   } </span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="eventbus总线" tabindex="-1">EventBus总线 <a class="header-anchor" href="#eventbus总线" aria-label="Permalink to &quot;EventBus总线&quot;">​</a></h3><ul><li><p>相比 (JDK)Observer 编程简单方便</p></li><li><p>通过自定义参数可实现同步、异步操作以及异常处理</p></li><li><p>单进程使用，无网络影响</p></li><li><p>项目异常重启或者退出不保证消息持久化</p></li><li><p>需要分布式使用还是需要使用 MQ</p></li></ul><h4 id="源码分析" tabindex="-1">源码分析 <a class="header-anchor" href="#源码分析" aria-label="Permalink to &quot;源码分析&quot;">​</a></h4><p><code>com.google.common.eventbus.EventBus</code></p><blockquote><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">register</span><span style="color:#E1E4E8;">(Object object);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">unregister</span><span style="color:#E1E4E8;">(Object object);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(Object event);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">(Object object);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">unregister</span><span style="color:#24292E;">(Object object);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(Object event);</span></span></code></pre></div></blockquote><h4 id="同步使用" tabindex="-1">同步使用 <a class="header-anchor" href="#同步使用" aria-label="Permalink to &quot;同步使用&quot;">​</a></h4><blockquote><p>Guava Event 实际上是使用线程池来处理订阅消息的，当我们使用默认的构造方法创建 EventBus 的时候</p><p>其中 executor 为 MoreExecutors.directExecutor()，其具体实现中直接调用的 Runnable#run 方法，使其仍然在同一个线程中执行</p><p>所以默认操作仍然是同步的，这种处理方法也有适用的地方，这样既可以解耦也可以让方法在同一个线程中执行获取同线程中的便利，比如事务的处理</p><p><code>创建Event Bus</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">EventBus eventBus </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">EventBus</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">EventBus eventBus </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EventBus</span><span style="color:#24292E;">();</span></span></code></pre></div><p><code>创建一个订阅者</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// Guava EventBus 中，是根据参数类型进行订阅，每个订阅的方法只能由一个参数，同时需要使用 @Subscribe </span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">EventListener</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">  	/**</span></span>
<span class="line"><span style="color:#6A737D;">	* 监听 Integer 类型的消息</span></span>
<span class="line"><span style="color:#6A737D;">	*/</span></span>
<span class="line"><span style="color:#E1E4E8;">   @</span><span style="color:#F97583;">Subscribe</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">listenInteger</span><span style="color:#E1E4E8;">(Integer </span><span style="color:#FFAB70;">param</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">       System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;EventListener#listenInteger -&gt;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> param);</span></span>
<span class="line"><span style="color:#E1E4E8;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">  /**</span></span>
<span class="line"><span style="color:#6A737D;">	* 监听 String 类型的消息</span></span>
<span class="line"><span style="color:#6A737D;">	*/</span></span>
<span class="line"><span style="color:#E1E4E8;">   @</span><span style="color:#F97583;">Subscribe</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">listenString</span><span style="color:#E1E4E8;">(String </span><span style="color:#FFAB70;">param</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">       System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;EventListener#listenString -&gt;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> param);</span></span>
<span class="line"><span style="color:#E1E4E8;">   }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// Guava EventBus 中，是根据参数类型进行订阅，每个订阅的方法只能由一个参数，同时需要使用 @Subscribe </span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EventListener</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">  	/**</span></span>
<span class="line"><span style="color:#6A737D;">	* 监听 Integer 类型的消息</span></span>
<span class="line"><span style="color:#6A737D;">	*/</span></span>
<span class="line"><span style="color:#24292E;">   @</span><span style="color:#D73A49;">Subscribe</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">listenInteger</span><span style="color:#24292E;">(Integer </span><span style="color:#E36209;">param</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">       System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;EventListener#listenInteger -&gt;&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> param);</span></span>
<span class="line"><span style="color:#24292E;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">  /**</span></span>
<span class="line"><span style="color:#6A737D;">	* 监听 String 类型的消息</span></span>
<span class="line"><span style="color:#6A737D;">	*/</span></span>
<span class="line"><span style="color:#24292E;">   @</span><span style="color:#D73A49;">Subscribe</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">listenString</span><span style="color:#24292E;">(String </span><span style="color:#E36209;">param</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">       System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;EventListener#listenString -&gt;&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> param);</span></span>
<span class="line"><span style="color:#24292E;">   }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><code>注册到 EventBus 上并发布消息</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">EventBus eventBus </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">EventBus</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">eventBus.</span><span style="color:#B392F0;">register</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">EventListener</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">eventBus.</span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">eventBus.</span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">eventBus.</span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;3&quot;</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">EventBus eventBus </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EventBus</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">eventBus.</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EventListener</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">eventBus.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">eventBus.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">eventBus.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;3&quot;</span><span style="color:#24292E;">);</span></span></code></pre></div><p><code>测试结果</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">EventListener#listenInteger -&gt;1</span></span>
<span class="line"><span style="color:#e1e4e8;">EventListener#listenInteger -&gt;2</span></span>
<span class="line"><span style="color:#e1e4e8;">EventListener#listenString -&gt;3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">EventListener#listenInteger -&gt;1</span></span>
<span class="line"><span style="color:#24292e;">EventListener#listenInteger -&gt;2</span></span>
<span class="line"><span style="color:#24292e;">EventListener#listenString -&gt;3</span></span></code></pre></div></blockquote><h4 id="异步使用" tabindex="-1">异步使用 <a class="header-anchor" href="#异步使用" aria-label="Permalink to &quot;异步使用&quot;">​</a></h4><blockquote><p>1.将构造方法中的 executor 换成一个线程池实现即可</p><p>2.Guava EventBus 为了简化操作，提供了一个简化的方案即 AsyncEventBus</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">EventBus eventBus </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">AsyncEventBus</span><span style="color:#E1E4E8;">(Executors.</span><span style="color:#B392F0;">newCachedThreadPool</span><span style="color:#E1E4E8;">());</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">EventBus eventBus </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">AsyncEventBus</span><span style="color:#24292E;">(Executors.</span><span style="color:#6F42C1;">newCachedThreadPool</span><span style="color:#24292E;">());</span></span></code></pre></div></blockquote><h4 id="异常处理" tabindex="-1">异常处理 <a class="header-anchor" href="#异常处理" aria-label="Permalink to &quot;异常处理&quot;">​</a></h4><blockquote><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">interface</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SubscriberExceptionHandler</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">   /** Handles exceptions thrown by subscribers. */</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleException</span><span style="color:#E1E4E8;">(Throwable </span><span style="color:#FFAB70;">exception</span><span style="color:#E1E4E8;">, SubscriberExceptionContext </span><span style="color:#FFAB70;">context</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SubscriberExceptionHandler</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#6A737D;">   /** Handles exceptions thrown by subscribers. */</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleException</span><span style="color:#24292E;">(Throwable </span><span style="color:#E36209;">exception</span><span style="color:#24292E;">, SubscriberExceptionContext </span><span style="color:#E36209;">context</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>EventBus 还是 AsyncEventBus 都可传入自定义的 SubscriberExceptionHandler 该 handler 当出现异常时会被调用</p><p>可以从参数 exception 获取异常信息，从 context 中获取消息信息进行特定的处理</p></blockquote><h2 id="hotool" tabindex="-1">Hotool <a class="header-anchor" href="#hotool" aria-label="Permalink to &quot;Hotool&quot;">​</a></h2><blockquote><p>官网地址：<a href="http://www.hutool.cn/" target="_blank" rel="noreferrer">http://www.hutool.cn/</a></p></blockquote><p>一个 Java 基础工具类，对文件、流、加密解密、转码、正则、线程、XML 等 JDK 方法进行封装，组成各种 Util 工具类，同时提供以下组件：</p><ul><li><p>hutool-aop JDK 动态代理封装，提供非 IOC 下的切面支持</p></li><li><p>hutool-bloomFilter 布隆过滤，提供一些 Hash 算法的布隆过滤</p></li><li><p>hutool-cache 缓存</p></li><li><p>hutool-core 核心，包括 Bean 操作、日期、各种 Util 等</p></li><li><p>hutool-cron 定时任务模块，提供类 Crontab 表达式的定时任务</p></li><li><p>hutool-crypto 加密解密模块</p></li><li><p>hutool-db JDBC 封装后的数据操作，基于 ActiveRecord 思想</p></li><li><p>hutool-dfa 基于 DFA 模型的多关键字查找</p></li><li><p>hutool-extra 扩展模块，对第三方封装（模板引擎、邮件等）</p></li><li><p>hutool-http 基于 HttpUrlConnection 的 Http 客户端封装</p></li><li><p>hutool-log 自动识别日志实现的日志门面</p></li><li><p>hutool-script 脚本执行封装，例如 Javascript</p></li><li><p>hutool-setting 功能更强大的 Setting 配置文件和 Properties 封装</p></li><li><p>hutool-system 系统参数调用封装（JVM 信息等）</p></li><li><p>hutool-json JSON 实现</p></li><li><p>hutool-captcha 图片验证码实现</p></li></ul><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;cn.hutool&lt;/</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;hutool-all&lt;/</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;5.4.3&lt;/</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;cn.hutool&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;hutool-all&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;5.4.3&lt;/</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h3 id="_1-convert" tabindex="-1">1.Convert <a class="header-anchor" href="#_1-convert" aria-label="Permalink to &quot;1.Convert&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//转换为字符串</span></span>
<span class="line"><span style="color:#E1E4E8;">int a = </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">String aStr = Convert.toStr(a);</span></span>
<span class="line"><span style="color:#6A737D;">//转换为指定类型数组</span></span>
<span class="line"><span style="color:#E1E4E8;">String[] b = {</span><span style="color:#79B8FF;">&quot;1&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;2&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;3&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;4&quot;</span><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#E1E4E8;">Integer[] bArr = Convert.toIntArray(b);</span></span>
<span class="line"><span style="color:#6A737D;">//转换为日期对象</span></span>
<span class="line"><span style="color:#E1E4E8;">String dateStr = </span><span style="color:#9ECBFF;">&quot;2017-05-06&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">Date date = Convert.toDate(dateStr);</span></span>
<span class="line"><span style="color:#6A737D;">//转换为列表</span></span>
<span class="line"><span style="color:#E1E4E8;">String[] strArr = {</span><span style="color:#79B8FF;">&quot;a&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;b&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;c&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;d&quot;</span><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#E1E4E8;">List&lt;String&gt; strList = Convert.toList(String.class, strArr);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//转换为字符串</span></span>
<span class="line"><span style="color:#24292E;">int a = </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">String aStr = Convert.toStr(a);</span></span>
<span class="line"><span style="color:#6A737D;">//转换为指定类型数组</span></span>
<span class="line"><span style="color:#24292E;">String[] b = {</span><span style="color:#005CC5;">&quot;1&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;2&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;3&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;4&quot;</span><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#24292E;">Integer[] bArr = Convert.toIntArray(b);</span></span>
<span class="line"><span style="color:#6A737D;">//转换为日期对象</span></span>
<span class="line"><span style="color:#24292E;">String dateStr = </span><span style="color:#032F62;">&quot;2017-05-06&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">Date date = Convert.toDate(dateStr);</span></span>
<span class="line"><span style="color:#6A737D;">//转换为列表</span></span>
<span class="line"><span style="color:#24292E;">String[] strArr = {</span><span style="color:#005CC5;">&quot;a&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;b&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;c&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;d&quot;</span><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#24292E;">List&lt;String&gt; strList = Convert.toList(String.class, strArr);</span></span></code></pre></div></blockquote><h3 id="_2-dateutil" tabindex="-1">2.DateUtil <a class="header-anchor" href="#_2-dateutil" aria-label="Permalink to &quot;2.DateUtil&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//Date、long、Calendar之间的相互转换</span></span>
<span class="line"><span style="color:#6A737D;">//当前时间</span></span>
<span class="line"><span style="color:#E1E4E8;">Date date = DateUtil.date();</span></span>
<span class="line"><span style="color:#6A737D;">//Calendar转Date</span></span>
<span class="line"><span style="color:#E1E4E8;">date = DateUtil.date(Calendar.getInstance());</span></span>
<span class="line"><span style="color:#6A737D;">//时间戳转Date</span></span>
<span class="line"><span style="color:#E1E4E8;">date = DateUtil.date(System.currentTimeMillis());</span></span>
<span class="line"><span style="color:#6A737D;">//自动识别格式转换</span></span>
<span class="line"><span style="color:#E1E4E8;">String dateStr = </span><span style="color:#9ECBFF;">&quot;2017-03-01&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">date = DateUtil.parse(dateStr);</span></span>
<span class="line"><span style="color:#6A737D;">//自定义格式化转换</span></span>
<span class="line"><span style="color:#E1E4E8;">date = DateUtil.parse(dateStr, </span><span style="color:#9ECBFF;">&quot;yyyy-MM-dd&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">//格式化输出日期</span></span>
<span class="line"><span style="color:#E1E4E8;">String format = DateUtil.format(date, </span><span style="color:#9ECBFF;">&quot;yyyy-MM-dd&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">//获得年的部分</span></span>
<span class="line"><span style="color:#E1E4E8;">int year = DateUtil.year(date);</span></span>
<span class="line"><span style="color:#6A737D;">//获得月份，从0开始计数</span></span>
<span class="line"><span style="color:#E1E4E8;">int month = DateUtil.month(date);</span></span>
<span class="line"><span style="color:#6A737D;">//获取某天的开始、结束时间</span></span>
<span class="line"><span style="color:#E1E4E8;">Date beginOfDay = DateUtil.beginOfDay(date);</span></span>
<span class="line"><span style="color:#E1E4E8;">Date endOfDay = DateUtil.endOfDay(date);</span></span>
<span class="line"><span style="color:#6A737D;">//计算偏移后的日期时间</span></span>
<span class="line"><span style="color:#E1E4E8;">Date newDate = DateUtil.offset(date, DateField.DAY_OF_MONTH, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">//计算日期时间之间的偏移量</span></span>
<span class="line"><span style="color:#E1E4E8;">long betweenDay = DateUtil.between(date, newDate, DateUnit.DAY);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//Date、long、Calendar之间的相互转换</span></span>
<span class="line"><span style="color:#6A737D;">//当前时间</span></span>
<span class="line"><span style="color:#24292E;">Date date = DateUtil.date();</span></span>
<span class="line"><span style="color:#6A737D;">//Calendar转Date</span></span>
<span class="line"><span style="color:#24292E;">date = DateUtil.date(Calendar.getInstance());</span></span>
<span class="line"><span style="color:#6A737D;">//时间戳转Date</span></span>
<span class="line"><span style="color:#24292E;">date = DateUtil.date(System.currentTimeMillis());</span></span>
<span class="line"><span style="color:#6A737D;">//自动识别格式转换</span></span>
<span class="line"><span style="color:#24292E;">String dateStr = </span><span style="color:#032F62;">&quot;2017-03-01&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">date = DateUtil.parse(dateStr);</span></span>
<span class="line"><span style="color:#6A737D;">//自定义格式化转换</span></span>
<span class="line"><span style="color:#24292E;">date = DateUtil.parse(dateStr, </span><span style="color:#032F62;">&quot;yyyy-MM-dd&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">//格式化输出日期</span></span>
<span class="line"><span style="color:#24292E;">String format = DateUtil.format(date, </span><span style="color:#032F62;">&quot;yyyy-MM-dd&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">//获得年的部分</span></span>
<span class="line"><span style="color:#24292E;">int year = DateUtil.year(date);</span></span>
<span class="line"><span style="color:#6A737D;">//获得月份，从0开始计数</span></span>
<span class="line"><span style="color:#24292E;">int month = DateUtil.month(date);</span></span>
<span class="line"><span style="color:#6A737D;">//获取某天的开始、结束时间</span></span>
<span class="line"><span style="color:#24292E;">Date beginOfDay = DateUtil.beginOfDay(date);</span></span>
<span class="line"><span style="color:#24292E;">Date endOfDay = DateUtil.endOfDay(date);</span></span>
<span class="line"><span style="color:#6A737D;">//计算偏移后的日期时间</span></span>
<span class="line"><span style="color:#24292E;">Date newDate = DateUtil.offset(date, DateField.DAY_OF_MONTH, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">//计算日期时间之间的偏移量</span></span>
<span class="line"><span style="color:#24292E;">long betweenDay = DateUtil.between(date, newDate, DateUnit.DAY);</span></span></code></pre></div></blockquote><h3 id="_3-jsonutil" tabindex="-1">3.JSONUtil <a class="header-anchor" href="#_3-jsonutil" aria-label="Permalink to &quot;3.JSONUtil&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">PmsBrand brand = new PmsBrand();</span></span>
<span class="line"><span style="color:#E1E4E8;">brand.setId(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">L);</span></span>
<span class="line"><span style="color:#E1E4E8;">brand.setName(</span><span style="color:#9ECBFF;">&quot;小米&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">brand.setShowStatus(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">//对象转化为JSON字符串</span></span>
<span class="line"><span style="color:#E1E4E8;">String jsonStr = JSONUtil.parse(brand).toString();</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;jsonUtil parse:{}&quot;</span><span style="color:#E1E4E8;">, jsonStr);</span></span>
<span class="line"><span style="color:#6A737D;">//JSON字符串转化为对象</span></span>
<span class="line"><span style="color:#E1E4E8;">PmsBrand brandBean = JSONUtil.toBean(jsonStr, PmsBrand.class);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;jsonUtil toBean:{}&quot;</span><span style="color:#E1E4E8;">, brandBean);</span></span>
<span class="line"><span style="color:#E1E4E8;">List&lt;PmsBrand&gt; brandList = new ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">brandList.add(brand);</span></span>
<span class="line"><span style="color:#E1E4E8;">String jsonListStr = JSONUtil.parse(brandList).toString();</span></span>
<span class="line"><span style="color:#6A737D;">//JSON字符串转化为列表</span></span>
<span class="line"><span style="color:#E1E4E8;">brandList = JSONUtil.toList(new JSONArray(jsonListStr), PmsBrand.class);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;jsonUtil toList:{}&quot;</span><span style="color:#E1E4E8;">, brandList);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">PmsBrand brand = new PmsBrand();</span></span>
<span class="line"><span style="color:#24292E;">brand.setId(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">L);</span></span>
<span class="line"><span style="color:#24292E;">brand.setName(</span><span style="color:#032F62;">&quot;小米&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">brand.setShowStatus(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">//对象转化为JSON字符串</span></span>
<span class="line"><span style="color:#24292E;">String jsonStr = JSONUtil.parse(brand).toString();</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;jsonUtil parse:{}&quot;</span><span style="color:#24292E;">, jsonStr);</span></span>
<span class="line"><span style="color:#6A737D;">//JSON字符串转化为对象</span></span>
<span class="line"><span style="color:#24292E;">PmsBrand brandBean = JSONUtil.toBean(jsonStr, PmsBrand.class);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;jsonUtil toBean:{}&quot;</span><span style="color:#24292E;">, brandBean);</span></span>
<span class="line"><span style="color:#24292E;">List&lt;PmsBrand&gt; brandList = new ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">brandList.add(brand);</span></span>
<span class="line"><span style="color:#24292E;">String jsonListStr = JSONUtil.parse(brandList).toString();</span></span>
<span class="line"><span style="color:#6A737D;">//JSON字符串转化为列表</span></span>
<span class="line"><span style="color:#24292E;">brandList = JSONUtil.toList(new JSONArray(jsonListStr), PmsBrand.class);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;jsonUtil toList:{}&quot;</span><span style="color:#24292E;">, brandList);</span></span></code></pre></div></blockquote><h3 id="_4-strutil" tabindex="-1">4.StrUtil <a class="header-anchor" href="#_4-strutil" aria-label="Permalink to &quot;4.StrUtil&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//判断是否为空字符串</span></span>
<span class="line"><span style="color:#E1E4E8;">String str = </span><span style="color:#9ECBFF;">&quot;test&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">StrUtil.isEmpty(str);</span></span>
<span class="line"><span style="color:#E1E4E8;">StrUtil.isNotEmpty(str);</span></span>
<span class="line"><span style="color:#6A737D;">//去除字符串的前后缀</span></span>
<span class="line"><span style="color:#E1E4E8;">StrUtil.removeSuffix(</span><span style="color:#9ECBFF;">&quot;a.jpg&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;.jpg&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">StrUtil.removePrefix(</span><span style="color:#9ECBFF;">&quot;a.jpg&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;a.&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">//格式化字符串</span></span>
<span class="line"><span style="color:#E1E4E8;">String template = </span><span style="color:#9ECBFF;">&quot;这只是个占位符:{}&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">String str</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> = StrUtil.format(template, </span><span style="color:#9ECBFF;">&quot;我是占位符&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;strUtil format:{}&quot;</span><span style="color:#E1E4E8;">, str</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//判断是否为空字符串</span></span>
<span class="line"><span style="color:#24292E;">String str = </span><span style="color:#032F62;">&quot;test&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">StrUtil.isEmpty(str);</span></span>
<span class="line"><span style="color:#24292E;">StrUtil.isNotEmpty(str);</span></span>
<span class="line"><span style="color:#6A737D;">//去除字符串的前后缀</span></span>
<span class="line"><span style="color:#24292E;">StrUtil.removeSuffix(</span><span style="color:#032F62;">&quot;a.jpg&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;.jpg&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">StrUtil.removePrefix(</span><span style="color:#032F62;">&quot;a.jpg&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;a.&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">//格式化字符串</span></span>
<span class="line"><span style="color:#24292E;">String template = </span><span style="color:#032F62;">&quot;这只是个占位符:{}&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">String str</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> = StrUtil.format(template, </span><span style="color:#032F62;">&quot;我是占位符&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;strUtil format:{}&quot;</span><span style="color:#24292E;">, str</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span></code></pre></div></blockquote><h3 id="_5-reflectutil" tabindex="-1">5.ReflectUtil <a class="header-anchor" href="#_5-reflectutil" aria-label="Permalink to &quot;5.ReflectUtil&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//反射工具类</span></span>
<span class="line"><span style="color:#6A737D;">//获取某个类的所有方法</span></span>
<span class="line"><span style="color:#E1E4E8;">Method[] methods = ReflectUtil.getMethods(PmsBrand.class);</span></span>
<span class="line"><span style="color:#6A737D;">//获取某个类的指定方法</span></span>
<span class="line"><span style="color:#E1E4E8;">Method method = ReflectUtil.getMethod(PmsBrand.class, </span><span style="color:#9ECBFF;">&quot;getId&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">//使用反射来创建对象</span></span>
<span class="line"><span style="color:#E1E4E8;">PmsBrand pmsBrand = ReflectUtil.newInstance(PmsBrand.class);</span></span>
<span class="line"><span style="color:#6A737D;">//反射执行对象的方法</span></span>
<span class="line"><span style="color:#E1E4E8;">ReflectUtil.invoke(pmsBrand, </span><span style="color:#9ECBFF;">&quot;setId&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//反射工具类</span></span>
<span class="line"><span style="color:#6A737D;">//获取某个类的所有方法</span></span>
<span class="line"><span style="color:#24292E;">Method[] methods = ReflectUtil.getMethods(PmsBrand.class);</span></span>
<span class="line"><span style="color:#6A737D;">//获取某个类的指定方法</span></span>
<span class="line"><span style="color:#24292E;">Method method = ReflectUtil.getMethod(PmsBrand.class, </span><span style="color:#032F62;">&quot;getId&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">//使用反射来创建对象</span></span>
<span class="line"><span style="color:#24292E;">PmsBrand pmsBrand = ReflectUtil.newInstance(PmsBrand.class);</span></span>
<span class="line"><span style="color:#6A737D;">//反射执行对象的方法</span></span>
<span class="line"><span style="color:#24292E;">ReflectUtil.invoke(pmsBrand, </span><span style="color:#032F62;">&quot;setId&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span></code></pre></div></blockquote><h3 id="_6-numberutil" tabindex="-1">6.NumberUtil <a class="header-anchor" href="#_6-numberutil" aria-label="Permalink to &quot;6.NumberUtil&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">double n</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">1.234</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">double n</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> = </span><span style="color:#79B8FF;">1.234</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">double result;</span></span>
<span class="line"><span style="color:#6A737D;">//对float、double、BigDecimal做加减乘除操作</span></span>
<span class="line"><span style="color:#E1E4E8;">result = NumberUtil.add(n</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, n</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">result = NumberUtil.sub(n</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, n</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">result = NumberUtil.mul(n</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, n</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">result = NumberUtil.div(n</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, n</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">//保留两位小数</span></span>
<span class="line"><span style="color:#E1E4E8;">BigDecimal roundNum = NumberUtil.round(n</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">String n</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> = </span><span style="color:#9ECBFF;">&quot;1.234&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为数字、整数、浮点数</span></span>
<span class="line"><span style="color:#E1E4E8;">NumberUtil.isNumber(n</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">NumberUtil.isInteger(n</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">NumberUtil.isDouble(n</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">double n</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">1.234</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">double n</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> = </span><span style="color:#005CC5;">1.234</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">double result;</span></span>
<span class="line"><span style="color:#6A737D;">//对float、double、BigDecimal做加减乘除操作</span></span>
<span class="line"><span style="color:#24292E;">result = NumberUtil.add(n</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, n</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">result = NumberUtil.sub(n</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, n</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">result = NumberUtil.mul(n</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, n</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">result = NumberUtil.div(n</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, n</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">//保留两位小数</span></span>
<span class="line"><span style="color:#24292E;">BigDecimal roundNum = NumberUtil.round(n</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">String n</span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> = </span><span style="color:#032F62;">&quot;1.234&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为数字、整数、浮点数</span></span>
<span class="line"><span style="color:#24292E;">NumberUtil.isNumber(n</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">NumberUtil.isInteger(n</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">NumberUtil.isDouble(n</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">);</span></span></code></pre></div></blockquote><h3 id="_7-beanutil" tabindex="-1">7.BeanUtil <a class="header-anchor" href="#_7-beanutil" aria-label="Permalink to &quot;7.BeanUtil&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//Map与JavaBean对象的互相转换以及对象属性的拷贝</span></span>
<span class="line"><span style="color:#6A737D;">//Bean转Map</span></span>
<span class="line"><span style="color:#E1E4E8;">Map&lt;String, Object&gt; map = BeanUtil.beanToMap(brand);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;beanUtil bean to map:{}&quot;</span><span style="color:#E1E4E8;">, map);</span></span>
<span class="line"><span style="color:#6A737D;">//Map转Bean</span></span>
<span class="line"><span style="color:#E1E4E8;">PmsBrand mapBrand = BeanUtil.mapToBean(map, PmsBrand.class, </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;beanUtil map to bean:{}&quot;</span><span style="color:#E1E4E8;">, mapBrand);</span></span>
<span class="line"><span style="color:#6A737D;">//Bean属性拷贝</span></span>
<span class="line"><span style="color:#E1E4E8;">PmsBrand copyBrand = new PmsBrand();</span></span>
<span class="line"><span style="color:#E1E4E8;">BeanUtil.copyProperties(brand, copyBrand);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;beanUtil copy properties:{}&quot;</span><span style="color:#E1E4E8;">, copyBrand);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//Map与JavaBean对象的互相转换以及对象属性的拷贝</span></span>
<span class="line"><span style="color:#6A737D;">//Bean转Map</span></span>
<span class="line"><span style="color:#24292E;">Map&lt;String, Object&gt; map = BeanUtil.beanToMap(brand);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;beanUtil bean to map:{}&quot;</span><span style="color:#24292E;">, map);</span></span>
<span class="line"><span style="color:#6A737D;">//Map转Bean</span></span>
<span class="line"><span style="color:#24292E;">PmsBrand mapBrand = BeanUtil.mapToBean(map, PmsBrand.class, </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;beanUtil map to bean:{}&quot;</span><span style="color:#24292E;">, mapBrand);</span></span>
<span class="line"><span style="color:#6A737D;">//Bean属性拷贝</span></span>
<span class="line"><span style="color:#24292E;">PmsBrand copyBrand = new PmsBrand();</span></span>
<span class="line"><span style="color:#24292E;">BeanUtil.copyProperties(brand, copyBrand);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;beanUtil copy properties:{}&quot;</span><span style="color:#24292E;">, copyBrand);</span></span></code></pre></div></blockquote><h3 id="_8-collutil" tabindex="-1">8.CollUtil <a class="header-anchor" href="#_8-collutil" aria-label="Permalink to &quot;8.CollUtil&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//数组转换为列表</span></span>
<span class="line"><span style="color:#E1E4E8;">String[] array = new String[]{</span><span style="color:#79B8FF;">&quot;a&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;b&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;c&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;d&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;e&quot;</span><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#E1E4E8;">List&lt;String&gt; list = CollUtil.newArrayList(array);</span></span>
<span class="line"><span style="color:#6A737D;">//join：数组转字符串时添加连接符号</span></span>
<span class="line"><span style="color:#E1E4E8;">String joinStr = CollUtil.join(list, </span><span style="color:#9ECBFF;">&quot;,&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;collUtil join:{}&quot;</span><span style="color:#E1E4E8;">, joinStr);</span></span>
<span class="line"><span style="color:#6A737D;">//将以连接符号分隔的字符串再转换为列表</span></span>
<span class="line"><span style="color:#E1E4E8;">List&lt;String&gt; splitList = StrUtil.split(joinStr, &#39;,&#39;);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;collUtil split:{}&quot;</span><span style="color:#E1E4E8;">, splitList);</span></span>
<span class="line"><span style="color:#6A737D;">//创建新的Map、Set、List</span></span>
<span class="line"><span style="color:#E1E4E8;">HashMap&lt;Object, Object&gt; newMap = CollUtil.newHashMap();</span></span>
<span class="line"><span style="color:#E1E4E8;">HashSet&lt;Object&gt; newHashSet = CollUtil.newHashSet();</span></span>
<span class="line"><span style="color:#E1E4E8;">ArrayList&lt;Object&gt; newList = CollUtil.newArrayList();</span></span>
<span class="line"><span style="color:#6A737D;">//判断列表是否为空</span></span>
<span class="line"><span style="color:#E1E4E8;">CollUtil.isEmpty(list);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//数组转换为列表</span></span>
<span class="line"><span style="color:#24292E;">String[] array = new String[]{</span><span style="color:#005CC5;">&quot;a&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;b&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;c&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;d&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;e&quot;</span><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#24292E;">List&lt;String&gt; list = CollUtil.newArrayList(array);</span></span>
<span class="line"><span style="color:#6A737D;">//join：数组转字符串时添加连接符号</span></span>
<span class="line"><span style="color:#24292E;">String joinStr = CollUtil.join(list, </span><span style="color:#032F62;">&quot;,&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;collUtil join:{}&quot;</span><span style="color:#24292E;">, joinStr);</span></span>
<span class="line"><span style="color:#6A737D;">//将以连接符号分隔的字符串再转换为列表</span></span>
<span class="line"><span style="color:#24292E;">List&lt;String&gt; splitList = StrUtil.split(joinStr, &#39;,&#39;);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;collUtil split:{}&quot;</span><span style="color:#24292E;">, splitList);</span></span>
<span class="line"><span style="color:#6A737D;">//创建新的Map、Set、List</span></span>
<span class="line"><span style="color:#24292E;">HashMap&lt;Object, Object&gt; newMap = CollUtil.newHashMap();</span></span>
<span class="line"><span style="color:#24292E;">HashSet&lt;Object&gt; newHashSet = CollUtil.newHashSet();</span></span>
<span class="line"><span style="color:#24292E;">ArrayList&lt;Object&gt; newList = CollUtil.newArrayList();</span></span>
<span class="line"><span style="color:#6A737D;">//判断列表是否为空</span></span>
<span class="line"><span style="color:#24292E;">CollUtil.isEmpty(list);</span></span></code></pre></div></blockquote><h3 id="_9-maputil" tabindex="-1">9.MapUtil <a class="header-anchor" href="#_9-maputil" aria-label="Permalink to &quot;9.MapUtil&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//将多个键值对加入到Map中</span></span>
<span class="line"><span style="color:#E1E4E8;">Map&lt;Object, Object&gt; map = MapUtil.of(new String[][]{</span></span>
<span class="line"><span style="color:#FDAEB7;font-style:italic;">{</span><span style="color:#79B8FF;">&quot;key1&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;value1&quot;</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">&quot;key2&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;value2&quot;</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">&quot;key3&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;value3&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#6A737D;">//判断Map是否为空</span></span>
<span class="line"><span style="color:#E1E4E8;">MapUtil.isEmpty(map);</span></span>
<span class="line"><span style="color:#E1E4E8;">MapUtil.isNotEmpty(map);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//将多个键值对加入到Map中</span></span>
<span class="line"><span style="color:#24292E;">Map&lt;Object, Object&gt; map = MapUtil.of(new String[][]{</span></span>
<span class="line"><span style="color:#B31D28;font-style:italic;">{</span><span style="color:#005CC5;">&quot;key1&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;value1&quot;</span><span style="color:#24292E;">},</span></span>
<span class="line"><span style="color:#24292E;">{</span><span style="color:#005CC5;">&quot;key2&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;value2&quot;</span><span style="color:#24292E;">},</span></span>
<span class="line"><span style="color:#24292E;">{</span><span style="color:#005CC5;">&quot;key3&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;value3&quot;</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#6A737D;">//判断Map是否为空</span></span>
<span class="line"><span style="color:#24292E;">MapUtil.isEmpty(map);</span></span>
<span class="line"><span style="color:#24292E;">MapUtil.isNotEmpty(map);</span></span></code></pre></div></blockquote><h3 id="_10-secureutil" tabindex="-1">10.SecureUtil <a class="header-anchor" href="#_10-secureutil" aria-label="Permalink to &quot;10.SecureUtil&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//MD5加密</span></span>
<span class="line"><span style="color:#E1E4E8;">String str = </span><span style="color:#9ECBFF;">&quot;123456&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">String md</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">Str = SecureUtil.md</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">(str);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;secureUtil md5:{}&quot;</span><span style="color:#E1E4E8;">, md</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">Str);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//MD5加密</span></span>
<span class="line"><span style="color:#24292E;">String str = </span><span style="color:#032F62;">&quot;123456&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">String md</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">Str = SecureUtil.md</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">(str);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;secureUtil md5:{}&quot;</span><span style="color:#24292E;">, md</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">Str);</span></span></code></pre></div></blockquote><h3 id="_11-captchautil" tabindex="-1">11.CaptchaUtil <a class="header-anchor" href="#_11-captchautil" aria-label="Permalink to &quot;11.CaptchaUtil&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//生成验证码图片</span></span>
<span class="line"><span style="color:#E1E4E8;">LineCaptcha lineCaptcha = CaptchaUtil.createLineCaptcha(</span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">try {</span></span>
<span class="line"><span style="color:#FDAEB7;font-style:italic;">request.getSession().setAttribute(</span><span style="color:#79B8FF;">&quot;CAPTCHA_KEY&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                             </span><span style="color:#FDAEB7;font-style:italic;">lineCaptcha.getCode());</span></span>
<span class="line"><span style="color:#FDAEB7;font-style:italic;">response.setContentType(</span><span style="color:#79B8FF;">&quot;image/png&quot;</span><span style="color:#FDAEB7;font-style:italic;">);</span><span style="color:#6A737D;">//告诉浏览器输出内容为图片</span></span>
<span class="line"><span style="color:#FDAEB7;font-style:italic;">response.setHeader(</span><span style="color:#79B8FF;">&quot;Pragma&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;No-cache&quot;</span><span style="color:#FDAEB7;font-style:italic;">);</span><span style="color:#6A737D;">//禁止浏览器缓存</span></span>
<span class="line"><span style="color:#FDAEB7;font-style:italic;">response.setHeader(</span><span style="color:#79B8FF;">&quot;Cache-Control&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;no-cache&quot;</span><span style="color:#FDAEB7;font-style:italic;">);</span></span>
<span class="line"><span style="color:#FDAEB7;font-style:italic;">response.setDateHeader(</span><span style="color:#79B8FF;">&quot;Expire&quot;</span><span style="color:#FDAEB7;font-style:italic;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">0);</span></span>
<span class="line"><span style="color:#FDAEB7;font-style:italic;">lineCaptcha.write(response.getOutputStream());</span></span>
<span class="line"><span style="color:#E1E4E8;">} catch (IOException e) {</span></span>
<span class="line"><span style="color:#FDAEB7;font-style:italic;">e.printStackTrace();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//生成验证码图片</span></span>
<span class="line"><span style="color:#24292E;">LineCaptcha lineCaptcha = CaptchaUtil.createLineCaptcha(</span><span style="color:#005CC5;">200</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">try {</span></span>
<span class="line"><span style="color:#B31D28;font-style:italic;">request.getSession().setAttribute(</span><span style="color:#005CC5;">&quot;CAPTCHA_KEY&quot;</span><span style="color:#B31D28;font-style:italic;">,</span></span>
<span class="line"><span style="color:#24292E;">                             </span><span style="color:#B31D28;font-style:italic;">lineCaptcha.getCode());</span></span>
<span class="line"><span style="color:#B31D28;font-style:italic;">response.setContentType(</span><span style="color:#005CC5;">&quot;image/png&quot;</span><span style="color:#B31D28;font-style:italic;">);</span><span style="color:#6A737D;">//告诉浏览器输出内容为图片</span></span>
<span class="line"><span style="color:#B31D28;font-style:italic;">response.setHeader(</span><span style="color:#005CC5;">&quot;Pragma&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;No-cache&quot;</span><span style="color:#B31D28;font-style:italic;">);</span><span style="color:#6A737D;">//禁止浏览器缓存</span></span>
<span class="line"><span style="color:#B31D28;font-style:italic;">response.setHeader(</span><span style="color:#005CC5;">&quot;Cache-Control&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;no-cache&quot;</span><span style="color:#B31D28;font-style:italic;">);</span></span>
<span class="line"><span style="color:#B31D28;font-style:italic;">response.setDateHeader(</span><span style="color:#005CC5;">&quot;Expire&quot;</span><span style="color:#B31D28;font-style:italic;">,</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">0);</span></span>
<span class="line"><span style="color:#B31D28;font-style:italic;">lineCaptcha.write(response.getOutputStream());</span></span>
<span class="line"><span style="color:#24292E;">} catch (IOException e) {</span></span>
<span class="line"><span style="color:#B31D28;font-style:italic;">e.printStackTrace();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></blockquote><h3 id="_12-validator" tabindex="-1">12.Validator <a class="header-anchor" href="#_12-validator" aria-label="Permalink to &quot;12.Validator&quot;">​</a></h3><blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//字段验证器，可以对不同格式的字符串进行验证，比如邮箱、手机号、IP等格式。</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为邮箱地址</span></span>
<span class="line"><span style="color:#E1E4E8;">boolean result = Validator.isEmail(</span><span style="color:#9ECBFF;">&quot;macro@qq.com&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;Validator isEmail:{}&quot;</span><span style="color:#E1E4E8;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为手机号码</span></span>
<span class="line"><span style="color:#E1E4E8;">result = Validator.isMobile(</span><span style="color:#9ECBFF;">&quot;18911111111&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;Validator isMobile:{}&quot;</span><span style="color:#E1E4E8;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为IPV4地址</span></span>
<span class="line"><span style="color:#E1E4E8;">result = Validator.isIpv</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;192.168.3.101&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;Validator isIpv4:{}&quot;</span><span style="color:#E1E4E8;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为汉字</span></span>
<span class="line"><span style="color:#E1E4E8;">result = Validator.isChinese(</span><span style="color:#9ECBFF;">&quot;你好&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;Validator isChinese:{}&quot;</span><span style="color:#E1E4E8;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为身份证号码（18位中国）</span></span>
<span class="line"><span style="color:#E1E4E8;">result = Validator.isCitizenId(</span><span style="color:#9ECBFF;">&quot;123456&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;Validator isCitizenId:{}&quot;</span><span style="color:#E1E4E8;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为URL</span></span>
<span class="line"><span style="color:#E1E4E8;">result = Validator.isUrl(</span><span style="color:#9ECBFF;">&quot;http://www.baidu.com&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;Validator isUrl:{}&quot;</span><span style="color:#E1E4E8;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为生日</span></span>
<span class="line"><span style="color:#E1E4E8;">result = Validator.isBirthday(</span><span style="color:#9ECBFF;">&quot;2020-02-01&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">LOGGER.info(</span><span style="color:#9ECBFF;">&quot;Validator isBirthday:{}&quot;</span><span style="color:#E1E4E8;">, result);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//字段验证器，可以对不同格式的字符串进行验证，比如邮箱、手机号、IP等格式。</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为邮箱地址</span></span>
<span class="line"><span style="color:#24292E;">boolean result = Validator.isEmail(</span><span style="color:#032F62;">&quot;macro@qq.com&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;Validator isEmail:{}&quot;</span><span style="color:#24292E;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为手机号码</span></span>
<span class="line"><span style="color:#24292E;">result = Validator.isMobile(</span><span style="color:#032F62;">&quot;18911111111&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;Validator isMobile:{}&quot;</span><span style="color:#24292E;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为IPV4地址</span></span>
<span class="line"><span style="color:#24292E;">result = Validator.isIpv</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;192.168.3.101&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;Validator isIpv4:{}&quot;</span><span style="color:#24292E;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为汉字</span></span>
<span class="line"><span style="color:#24292E;">result = Validator.isChinese(</span><span style="color:#032F62;">&quot;你好&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;Validator isChinese:{}&quot;</span><span style="color:#24292E;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为身份证号码（18位中国）</span></span>
<span class="line"><span style="color:#24292E;">result = Validator.isCitizenId(</span><span style="color:#032F62;">&quot;123456&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;Validator isCitizenId:{}&quot;</span><span style="color:#24292E;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为URL</span></span>
<span class="line"><span style="color:#24292E;">result = Validator.isUrl(</span><span style="color:#032F62;">&quot;http://www.baidu.com&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;Validator isUrl:{}&quot;</span><span style="color:#24292E;">, result);</span></span>
<span class="line"><span style="color:#6A737D;">//判断是否为生日</span></span>
<span class="line"><span style="color:#24292E;">result = Validator.isBirthday(</span><span style="color:#032F62;">&quot;2020-02-01&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">LOGGER.info(</span><span style="color:#032F62;">&quot;Validator isBirthday:{}&quot;</span><span style="color:#24292E;">, result);</span></span></code></pre></div></blockquote><h3 id="_13-htmlutil" tabindex="-1">13.HtmlUtil <a class="header-anchor" href="#_13-htmlutil" aria-label="Permalink to &quot;13.HtmlUtil&quot;">​</a></h3><blockquote><p><code>HtmlUtil.encode</code>，可以将一些字符转化为安全字符，防止 xss 注入和 SQL 注入，比如下面的评论提交。</p><p>这就是防止有黑客写一些可执行的 js 代码，然后提交评论，在后台面板就会执行这一段代码，比较危险，使用 encode 方法就可以将 标签给转化成，这样转化之后，js 代码就不会执行了。</p><p>另外，HtmlUtil 还提供了以下方法，有兴趣的可以去试一下。</p><ul><li><p>HtmlUtil.restoreEscaped 还原被转义的 HTML 特殊字符</p></li><li><p>HtmlUtil.encode 转义文本中的 HTML 字符为安全的字符</p></li><li><p>HtmlUtil.cleanHtmlTag 清除所有 HTML 标签</p></li><li><p>HtmlUtil.removeHtmlTag 清除指定 HTML 标签和被标签包围的内容</p></li><li><p>HtmlUtil.unwrapHtmlTag 清除指定 HTML 标签，不包括内容</p></li><li><p>HtmlUtil.removeHtmlAttr 去除 HTML 标签中的属性</p></li><li><p>HtmlUtil.removeAllHtmlAttr 去除指定标签的所有属性</p></li><li><p>HtmlUtil.filter 过滤 HTML 文本，防止 XSS 攻击</p></li></ul></blockquote><h3 id="_14-cronutil" tabindex="-1">14.CronUtil <a class="header-anchor" href="#_14-cronutil" aria-label="Permalink to &quot;14.CronUtil&quot;">​</a></h3><blockquote><p>这个工具不需要类似 quartz 这样的框架来做定时任务，而且 CronUtil 也不需要任何其他依赖，只需要在 resources 下建一个配置文件，然后在程序启动的时候将定时任务开启就行了，如 Halo 的定时备份功能（每天凌晨 1 点备份一次）。</p><p><code>cron.setting</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">cc.ryanc.halo.web.controller.admin.BackupController.backupResources </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span></span>
<span class="line"><span style="color:#E1E4E8;">cc.ryanc.halo.web.controller.admin.BackupController.backupDatabase </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span></span>
<span class="line"><span style="color:#E1E4E8;">cc.ryanc.halo.web.controller.admin.BackupController.backupPosts </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onApplicationEvent</span><span style="color:#E1E4E8;">(ContextRefreshedEvent event){</span></span>
<span class="line"><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">loadActiveTheme</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">loadOptions</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">loadFiles</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">loadThemes</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#6A737D;">//启动定时任务</span></span>
<span class="line"><span style="color:#E1E4E8;">CronUtil.</span><span style="color:#B392F0;">start</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">log.</span><span style="color:#B392F0;">info</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;定时任务启动成功！&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">cc.ryanc.halo.web.controller.admin.BackupController.backupResources </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span></span>
<span class="line"><span style="color:#24292E;">cc.ryanc.halo.web.controller.admin.BackupController.backupDatabase </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span></span>
<span class="line"><span style="color:#24292E;">cc.ryanc.halo.web.controller.admin.BackupController.backupPosts </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onApplicationEvent</span><span style="color:#24292E;">(ContextRefreshedEvent event){</span></span>
<span class="line"><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">loadActiveTheme</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">loadOptions</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">loadFiles</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">loadThemes</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">//启动定时任务</span></span>
<span class="line"><span style="color:#24292E;">CronUtil.</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">log.</span><span style="color:#6F42C1;">info</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;定时任务启动成功！&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></blockquote><h2 id="easyexcel" tabindex="-1">Easyexcel <a class="header-anchor" href="#easyexcel" aria-label="Permalink to &quot;Easyexcel&quot;">​</a></h2><blockquote><p>EasyExcel是一个基于Java的简单、省内存的读写Excel的开源项目。在尽可能节约内存的情况下支持读写百M的Excel。</p></blockquote><h2 id="knife4j" tabindex="-1">Knife4j <a class="header-anchor" href="#knife4j" aria-label="Permalink to &quot;Knife4j&quot;">​</a></h2><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;io.springfox&lt;/</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;springfox-boot-starter&lt;/</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;3.0.0&lt;/</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;com.github.xiaoymin&lt;/</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;knife4j-spring-boot-starter&lt;/</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;3.0.2&lt;/</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;io.springfox&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;springfox-boot-starter&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;3.0.0&lt;/</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;com.github.xiaoymin&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;knife4j-spring-boot-starter&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;3.0.2&lt;/</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><blockquote><p>全局配置</p></blockquote><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">package</span><span style="color:#E1E4E8;"> com.tgpms.config;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> com.github.xiaoymin.knife4j.spring.annotations.EnableKnife4j;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> io.swagger.annotations.ApiOperation;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> org.springframework.context.annotation.Bean;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> org.springframework.context.annotation.Configuration;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> org.springframework.http.HttpMethod;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> springfox.documentation.builders.</span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> springfox.documentation.service.</span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> springfox.documentation.spi.DocumentationType;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> springfox.documentation.spi.service.contexts.SecurityContext;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> springfox.documentation.spring.web.plugins.Docket;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.util.ArrayList;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.util.Collections;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * swagger3 配置</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Configuration</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">EnableKnife4j</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 访问路径ip:port/doc.html</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Swagger3Config</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    @</span><span style="color:#F97583;">Bean</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> Docket </span><span style="color:#B392F0;">createRestApi</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Docket</span><span style="color:#E1E4E8;">(DocumentationType.OAS_30)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">apiInfo</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">apiInfo</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">select</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">apis</span><span style="color:#E1E4E8;">(RequestHandlerSelectors.</span><span style="color:#B392F0;">withMethodAnnotation</span><span style="color:#E1E4E8;">(ApiOperation.class))</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">paths</span><span style="color:#E1E4E8;">(PathSelectors.</span><span style="color:#B392F0;">any</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//.globalRequestParameters(getGlobalRequestParameters())</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">globalResponses</span><span style="color:#E1E4E8;">(HttpMethod.GET, </span><span style="color:#B392F0;">getGlobalResponseMessage</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">globalResponses</span><span style="color:#E1E4E8;">(HttpMethod.POST, </span><span style="color:#B392F0;">getGlobalResponseMessage</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">globalResponses</span><span style="color:#E1E4E8;">(HttpMethod.DELETE, </span><span style="color:#B392F0;">getGlobalResponseMessage</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">globalResponses</span><span style="color:#E1E4E8;">(HttpMethod.PUT, </span><span style="color:#B392F0;">getGlobalResponseMessage</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//添加登录认证</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">securitySchemes</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">securitySchemes</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">securityContexts</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">securityContexts</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * 构建 api文档的详细信息函数,注意这里的注解引用的是哪个</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> ApiInfo </span><span style="color:#B392F0;">apiInfo</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// 获取工程名称</span></span>
<span class="line"><span style="color:#E1E4E8;">        String projectName </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> System.</span><span style="color:#B392F0;">getProperty</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;user.dir&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ApiInfoBuilder</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">title</span><span style="color:#E1E4E8;">(projectName.</span><span style="color:#B392F0;">substring</span><span style="color:#E1E4E8;">(projectName.</span><span style="color:#B392F0;">lastIndexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">\\</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot; API接口文档&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">contact</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Contact</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;jl&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;31346337@qq.com&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">version</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;1.0&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">description</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;API文档&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//    /**</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     * 生成全局通用参数,按需设置</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     */</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//    private List&lt;RequestParameter&gt; getGlobalRequestParameters() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//        List&lt;RequestParameter&gt; parameters = new ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//        parameters.add(new RequestParameterBuilder()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//                .name(&quot;tfToken&quot;)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//                .description(&quot;同飞令牌&quot;)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//                .required(false)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//                .in(ParameterType.HEADER)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//                .build());</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//        return parameters;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * 生成通用响应信息</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> List&lt;</span><span style="color:#F97583;">Response</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#B392F0;">getGlobalResponseMessage</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">        List&lt;</span><span style="color:#F97583;">Response</span><span style="color:#E1E4E8;">&gt; responseList </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">        responseList.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ResponseBuilder</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">code</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;404&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">description</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;找不到资源&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> responseList;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * 设置授权信息</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> List&lt;</span><span style="color:#F97583;">SecurityScheme</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#B392F0;">securitySchemes</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">        ApiKey apiKey </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ApiKey</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;tfToken&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;token&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;header&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> Collections.</span><span style="color:#B392F0;">singletonList</span><span style="color:#E1E4E8;">(apiKey);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * 授权信息全局应用</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> List&lt;</span><span style="color:#F97583;">SecurityContext</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#B392F0;">securityContexts</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> Collections.</span><span style="color:#B392F0;">singletonList</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">            SecurityContext.</span><span style="color:#B392F0;">builder</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">securityReferences</span><span style="color:#E1E4E8;">(Collections.</span><span style="color:#B392F0;">singletonList</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SecurityReference</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;tfToken&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">AuthorizationScope</span><span style="color:#E1E4E8;">[]{</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">AuthorizationScope</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;global&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;accessEverything&quot;</span><span style="color:#E1E4E8;">)})))</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">        );</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">package</span><span style="color:#24292E;"> com.tgpms.config;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> com.github.xiaoymin.knife4j.spring.annotations.EnableKnife4j;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> io.swagger.annotations.ApiOperation;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> org.springframework.context.annotation.Bean;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> org.springframework.context.annotation.Configuration;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> org.springframework.http.HttpMethod;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> springfox.documentation.builders.</span><span style="color:#005CC5;">*</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> springfox.documentation.service.</span><span style="color:#005CC5;">*</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> springfox.documentation.spi.DocumentationType;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> springfox.documentation.spi.service.contexts.SecurityContext;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> springfox.documentation.spring.web.plugins.Docket;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.util.ArrayList;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.util.Collections;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * swagger3 配置</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Configuration</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">EnableKnife4j</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 访问路径ip:port/doc.html</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Swagger3Config</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Bean</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Docket </span><span style="color:#6F42C1;">createRestApi</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Docket</span><span style="color:#24292E;">(DocumentationType.OAS_30)</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">apiInfo</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">apiInfo</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">select</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">apis</span><span style="color:#24292E;">(RequestHandlerSelectors.</span><span style="color:#6F42C1;">withMethodAnnotation</span><span style="color:#24292E;">(ApiOperation.class))</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">paths</span><span style="color:#24292E;">(PathSelectors.</span><span style="color:#6F42C1;">any</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//.globalRequestParameters(getGlobalRequestParameters())</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">globalResponses</span><span style="color:#24292E;">(HttpMethod.GET, </span><span style="color:#6F42C1;">getGlobalResponseMessage</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">globalResponses</span><span style="color:#24292E;">(HttpMethod.POST, </span><span style="color:#6F42C1;">getGlobalResponseMessage</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">globalResponses</span><span style="color:#24292E;">(HttpMethod.DELETE, </span><span style="color:#6F42C1;">getGlobalResponseMessage</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">globalResponses</span><span style="color:#24292E;">(HttpMethod.PUT, </span><span style="color:#6F42C1;">getGlobalResponseMessage</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//添加登录认证</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">securitySchemes</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">securitySchemes</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">securityContexts</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">securityContexts</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * 构建 api文档的详细信息函数,注意这里的注解引用的是哪个</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> ApiInfo </span><span style="color:#6F42C1;">apiInfo</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 获取工程名称</span></span>
<span class="line"><span style="color:#24292E;">        String projectName </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> System.</span><span style="color:#6F42C1;">getProperty</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;user.dir&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ApiInfoBuilder</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">title</span><span style="color:#24292E;">(projectName.</span><span style="color:#6F42C1;">substring</span><span style="color:#24292E;">(projectName.</span><span style="color:#6F42C1;">lastIndexOf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">\\</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot; API接口文档&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">contact</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Contact</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;jl&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;31346337@qq.com&quot;</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">version</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;1.0&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">description</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;API文档&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//    /**</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     * 生成全局通用参数,按需设置</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//    private List&lt;RequestParameter&gt; getGlobalRequestParameters() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//        List&lt;RequestParameter&gt; parameters = new ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//        parameters.add(new RequestParameterBuilder()</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//                .name(&quot;tfToken&quot;)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//                .description(&quot;同飞令牌&quot;)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//                .required(false)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//                .in(ParameterType.HEADER)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//                .build());</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//        return parameters;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * 生成通用响应信息</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Response</span><span style="color:#24292E;">&gt; </span><span style="color:#6F42C1;">getGlobalResponseMessage</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        List&lt;</span><span style="color:#D73A49;">Response</span><span style="color:#24292E;">&gt; responseList </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">        responseList.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ResponseBuilder</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">code</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;404&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">description</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;找不到资源&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> responseList;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * 设置授权信息</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">SecurityScheme</span><span style="color:#24292E;">&gt; </span><span style="color:#6F42C1;">securitySchemes</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        ApiKey apiKey </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ApiKey</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;tfToken&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;token&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;header&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> Collections.</span><span style="color:#6F42C1;">singletonList</span><span style="color:#24292E;">(apiKey);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * 授权信息全局应用</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">SecurityContext</span><span style="color:#24292E;">&gt; </span><span style="color:#6F42C1;">securityContexts</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> Collections.</span><span style="color:#6F42C1;">singletonList</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">            SecurityContext.</span><span style="color:#6F42C1;">builder</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">securityReferences</span><span style="color:#24292E;">(Collections.</span><span style="color:#6F42C1;">singletonList</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SecurityReference</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;tfToken&quot;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">AuthorizationScope</span><span style="color:#24292E;">[]{</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">AuthorizationScope</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;global&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;accessEverything&quot;</span><span style="color:#24292E;">)})))</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">        );</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><blockquote><p>访问地址</p></blockquote><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">swagger: 	http://localhost:8080/swagger-ui</span></span>
<span class="line"><span style="color:#e1e4e8;">knife4j: 	http://localhost:8080/doc.html</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">swagger: 	http://localhost:8080/swagger-ui</span></span>
<span class="line"><span style="color:#24292e;">knife4j: 	http://localhost:8080/doc.html</span></span></code></pre></div><h2 id="mapstruct" tabindex="-1">Mapstruct <a class="header-anchor" href="#mapstruct" aria-label="Permalink to &quot;Mapstruct&quot;">​</a></h2><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;org.mapstruct&lt;/</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;mapstruct-jdk8&lt;/</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;1.3.1.Final&lt;/</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;org.mapstruct&lt;/</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;mapstruct-processor&lt;/</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;1.3.1.Final&lt;/</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">scope</span><span style="color:#E1E4E8;">&gt;provided&lt;/</span><span style="color:#85E89D;">scope</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">build</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">plugins</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">plugin</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            &lt;</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;org.apache.maven.plugins&lt;/</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            &lt;</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;maven-compiler-plugin&lt;/</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            &lt;</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;3.8.1&lt;/</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            &lt;</span><span style="color:#85E89D;">configuration</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">                &lt;</span><span style="color:#85E89D;">source</span><span style="color:#E1E4E8;">&gt;${java.version}&lt;/</span><span style="color:#85E89D;">source</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">                &lt;</span><span style="color:#85E89D;">target</span><span style="color:#E1E4E8;">&gt;${java.version}&lt;/</span><span style="color:#85E89D;">target</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">                &lt;</span><span style="color:#85E89D;">annotationProcessorPaths</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;">&lt;!--声明 mapstruct-processor 为JSR269的Java注解处理器--&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">                    &lt;</span><span style="color:#85E89D;">path</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">                        &lt;</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;org.mapstruct&lt;/</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">                        &lt;</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;mapstruct-processor&lt;/</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">                        &lt;</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;${mapstruct.version}&lt;/</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">                    &lt;/</span><span style="color:#85E89D;">path</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">                &lt;/</span><span style="color:#85E89D;">annotationProcessorPaths</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            &lt;/</span><span style="color:#85E89D;">configuration</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;/</span><span style="color:#85E89D;">plugin</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">plugins</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">build</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;org.mapstruct&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;mapstruct-jdk8&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;1.3.1.Final&lt;/</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;org.mapstruct&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;mapstruct-processor&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;1.3.1.Final&lt;/</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">scope</span><span style="color:#24292E;">&gt;provided&lt;/</span><span style="color:#22863A;">scope</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">build</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">plugins</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">plugin</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">            &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;org.apache.maven.plugins&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">            &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;maven-compiler-plugin&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">            &lt;</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;3.8.1&lt;/</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">            &lt;</span><span style="color:#22863A;">configuration</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">                &lt;</span><span style="color:#22863A;">source</span><span style="color:#24292E;">&gt;${java.version}&lt;/</span><span style="color:#22863A;">source</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">                &lt;</span><span style="color:#22863A;">target</span><span style="color:#24292E;">&gt;${java.version}&lt;/</span><span style="color:#22863A;">target</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">                &lt;</span><span style="color:#22863A;">annotationProcessorPaths</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6A737D;">&lt;!--声明 mapstruct-processor 为JSR269的Java注解处理器--&gt;</span></span>
<span class="line"><span style="color:#24292E;">                    &lt;</span><span style="color:#22863A;">path</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">                        &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;org.mapstruct&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">                        &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;mapstruct-processor&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">                        &lt;</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;${mapstruct.version}&lt;/</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">                    &lt;/</span><span style="color:#22863A;">path</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">                &lt;/</span><span style="color:#22863A;">annotationProcessorPaths</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">            &lt;/</span><span style="color:#22863A;">configuration</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;/</span><span style="color:#22863A;">plugin</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">plugins</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">build</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Mapper</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">interface</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">StudentMapper</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    StudentMapper INSTANCE </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Mappers.</span><span style="color:#B392F0;">getMapper</span><span style="color:#E1E4E8;">(StudentMapper.class);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">   /**</span></span>
<span class="line"><span style="color:#6A737D;">    * po-&gt;vo</span></span>
<span class="line"><span style="color:#6A737D;">    * </span><span style="color:#F97583;">@param</span><span style="color:#6A737D;"> </span><span style="color:#FFAB70;">studentPO</span></span>
<span class="line"><span style="color:#6A737D;">    * </span><span style="color:#F97583;">@return</span></span>
<span class="line"><span style="color:#6A737D;">  	*/</span></span>
<span class="line"><span style="color:#E1E4E8;">    @</span><span style="color:#F97583;">Mappings</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        @</span><span style="color:#F97583;">Mapping</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">target</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;studentName&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">        @</span><span style="color:#F97583;">Mapping</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">target</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;studentAge&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    StudentVO </span><span style="color:#B392F0;">po2Vo</span><span style="color:#E1E4E8;">(StudentPO </span><span style="color:#FFAB70;">studentPO</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">   /**</span></span>
<span class="line"><span style="color:#6A737D;">    * List&lt;StudentPO&gt;-&gt;List&lt;StudentVO&gt;</span></span>
<span class="line"><span style="color:#6A737D;">    * List类型互转的映射规则会引用单个对象的映射规则</span></span>
<span class="line"><span style="color:#6A737D;">    * </span><span style="color:#F97583;">@param</span><span style="color:#6A737D;"> </span><span style="color:#FFAB70;">studentPO</span></span>
<span class="line"><span style="color:#6A737D;">    * </span><span style="color:#F97583;">@return</span></span>
<span class="line"><span style="color:#6A737D;">    */</span></span>
<span class="line"><span style="color:#E1E4E8;">    List&lt;</span><span style="color:#F97583;">StudentVO</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#B392F0;">poList2VoList</span><span style="color:#E1E4E8;">(List&lt;</span><span style="color:#F97583;">StudentPO</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#FFAB70;">studentPO</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    @</span><span style="color:#F97583;">Mappings</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        @</span><span style="color:#F97583;">Mapping</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;schoolPO.name&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">target</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;schoolName&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">        @</span><span style="color:#F97583;">Mapping</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;studentPO.name&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">target</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;studentName&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    SchoolStudentVO </span><span style="color:#B392F0;">mergeVo</span><span style="color:#E1E4E8;">(SchoolPO </span><span style="color:#FFAB70;">schoolPO</span><span style="color:#E1E4E8;">, StudentPO </span><span style="color:#FFAB70;">studentPO</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Mapper</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">StudentMapper</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    StudentMapper INSTANCE </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Mappers.</span><span style="color:#6F42C1;">getMapper</span><span style="color:#24292E;">(StudentMapper.class);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">   /**</span></span>
<span class="line"><span style="color:#6A737D;">    * po-&gt;vo</span></span>
<span class="line"><span style="color:#6A737D;">    * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#E36209;">studentPO</span></span>
<span class="line"><span style="color:#6A737D;">    * </span><span style="color:#D73A49;">@return</span></span>
<span class="line"><span style="color:#6A737D;">  	*/</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Mappings</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        @</span><span style="color:#D73A49;">Mapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;name&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">target</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;studentName&quot;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">        @</span><span style="color:#D73A49;">Mapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;age&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">target</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;studentAge&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    StudentVO </span><span style="color:#6F42C1;">po2Vo</span><span style="color:#24292E;">(StudentPO </span><span style="color:#E36209;">studentPO</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">   /**</span></span>
<span class="line"><span style="color:#6A737D;">    * List&lt;StudentPO&gt;-&gt;List&lt;StudentVO&gt;</span></span>
<span class="line"><span style="color:#6A737D;">    * List类型互转的映射规则会引用单个对象的映射规则</span></span>
<span class="line"><span style="color:#6A737D;">    * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#E36209;">studentPO</span></span>
<span class="line"><span style="color:#6A737D;">    * </span><span style="color:#D73A49;">@return</span></span>
<span class="line"><span style="color:#6A737D;">    */</span></span>
<span class="line"><span style="color:#24292E;">    List&lt;</span><span style="color:#D73A49;">StudentVO</span><span style="color:#24292E;">&gt; </span><span style="color:#6F42C1;">poList2VoList</span><span style="color:#24292E;">(List&lt;</span><span style="color:#D73A49;">StudentPO</span><span style="color:#24292E;">&gt; </span><span style="color:#E36209;">studentPO</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Mappings</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        @</span><span style="color:#D73A49;">Mapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;schoolPO.name&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">target</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;schoolName&quot;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">        @</span><span style="color:#D73A49;">Mapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;studentPO.name&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">target</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;studentName&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    SchoolStudentVO </span><span style="color:#6F42C1;">mergeVo</span><span style="color:#24292E;">(SchoolPO </span><span style="color:#E36209;">schoolPO</span><span style="color:#24292E;">, StudentPO </span><span style="color:#E36209;">studentPO</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MapstructUse</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        StudentPO build </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> StudentPO.</span><span style="color:#B392F0;">builder</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;test&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">age</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">24</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">className</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;教室1&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        StudentVO studentVO </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> StudentMapper.INSTANCE.</span><span style="color:#B392F0;">po2Vo</span><span style="color:#E1E4E8;">(build);</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(studentVO);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        List&lt;</span><span style="color:#F97583;">StudentPO</span><span style="color:#E1E4E8;">&gt; studentPOList </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">; i </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">; i</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            StudentPO studentPO </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> StudentPO.</span><span style="color:#B392F0;">builder</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">(i).</span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">(String.</span><span style="color:#B392F0;">valueOf</span><span style="color:#E1E4E8;">(i)).</span><span style="color:#B392F0;">age</span><span style="color:#E1E4E8;">(i).</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">            studentPOList.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(studentPO);</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">        List&lt;</span><span style="color:#F97583;">StudentVO</span><span style="color:#E1E4E8;">&gt; studentVOs </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> StudentMapper.INSTANCE.</span><span style="color:#B392F0;">poList2VoList</span><span style="color:#E1E4E8;">(studentPOList);</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(studentVOs);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        SchoolPO schoolPO </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> SchoolPO.</span><span style="color:#B392F0;">builder</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;学校名字&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        StudentPO studentPO </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> StudentPO.</span><span style="color:#B392F0;">builder</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;学生名字&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        SchoolStudentVO schoolStudentVO </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> StudentMapper.INSTANCE.</span><span style="color:#B392F0;">mergeVo</span><span style="color:#E1E4E8;">(schoolPO, studentPO);</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(schoolStudentVO);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MapstructUse</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        StudentPO build </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> StudentPO.</span><span style="color:#6F42C1;">builder</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;test&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">age</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">24</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">className</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;教室1&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        StudentVO studentVO </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> StudentMapper.INSTANCE.</span><span style="color:#6F42C1;">po2Vo</span><span style="color:#24292E;">(build);</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(studentVO);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        List&lt;</span><span style="color:#D73A49;">StudentPO</span><span style="color:#24292E;">&gt; studentPOList </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            StudentPO studentPO </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> StudentPO.</span><span style="color:#6F42C1;">builder</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">(i).</span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">(String.</span><span style="color:#6F42C1;">valueOf</span><span style="color:#24292E;">(i)).</span><span style="color:#6F42C1;">age</span><span style="color:#24292E;">(i).</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            studentPOList.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(studentPO);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">        List&lt;</span><span style="color:#D73A49;">StudentVO</span><span style="color:#24292E;">&gt; studentVOs </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> StudentMapper.INSTANCE.</span><span style="color:#6F42C1;">poList2VoList</span><span style="color:#24292E;">(studentPOList);</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(studentVOs);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        SchoolPO schoolPO </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> SchoolPO.</span><span style="color:#6F42C1;">builder</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;学校名字&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        StudentPO studentPO </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> StudentPO.</span><span style="color:#6F42C1;">builder</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;学生名字&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        SchoolStudentVO schoolStudentVO </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> StudentMapper.INSTANCE.</span><span style="color:#6F42C1;">mergeVo</span><span style="color:#24292E;">(schoolPO, studentPO);</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(schoolStudentVO);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="forest" tabindex="-1">Forest <a class="header-anchor" href="#forest" aria-label="Permalink to &quot;Forest&quot;">​</a></h2><nav class="table-of-contents"><ul><li><a href="#guava">Guava</a><ul><li><a href="#集合工具">集合工具</a></li><li><a href="#cache本地缓存">Cache本地缓存</a></li><li><a href="#retry重试">Retry重试</a></li><li><a href="#eventbus总线">EventBus总线</a></li></ul></li><li><a href="#hotool">Hotool</a><ul><li><a href="#_1-convert">1.Convert</a></li><li><a href="#_2-dateutil">2.DateUtil</a></li><li><a href="#_3-jsonutil">3.JSONUtil</a></li><li><a href="#_4-strutil">4.StrUtil</a></li><li><a href="#_5-reflectutil">5.ReflectUtil</a></li><li><a href="#_6-numberutil">6.NumberUtil</a></li><li><a href="#_7-beanutil">7.BeanUtil</a></li><li><a href="#_8-collutil">8.CollUtil</a></li><li><a href="#_9-maputil">9.MapUtil</a></li><li><a href="#_10-secureutil">10.SecureUtil</a></li><li><a href="#_11-captchautil">11.CaptchaUtil</a></li><li><a href="#_12-validator">12.Validator</a></li><li><a href="#_13-htmlutil">13.HtmlUtil</a></li><li><a href="#_14-cronutil">14.CronUtil</a></li></ul></li><li><a href="#easyexcel">Easyexcel</a></li><li><a href="#knife4j">Knife4j</a></li><li><a href="#mapstruct">Mapstruct</a></li><li><a href="#forest">Forest</a><ul><li><a href="#springboot模式">SpringBoot模式</a></li><li><a href="#快捷接口-1-5-3">快捷接口（1.5.3）</a></li></ul></li><li><a href="#asynctool">AsyncTool</a><ul><li><a href="#应用场景">应用场景</a></li></ul></li></ul></nav><blockquote><p>官方文档：<a href="https://forest.dtflyx.com/docs/docs" target="_blank" rel="noreferrer">https://forest.dtflyx.com/docs/docs</a></p></blockquote><blockquote><p>Forest 是一个开源的 Java HTTP 客户端框架，它能够将 HTTP 的所有请求信息（包括 URL、Header 以及 Body 等信息）绑定到您自定义的 Interface 方法上，能够通过调用本地接口方法的方式发送 HTTP 请求</p><p><img src="/assets/forest_request_flow_2.8112bab9.svg" alt="architecture"></p></blockquote><blockquote><p>HTTP 发送请求的过程分为前端部分和后端部分，Forest 本身是处理前端过程的框架，是对后端 HTTP API 框架的进一步封装。</p><p><strong>前端部分：</strong></p><ol><li>Forest 配置： 负责管理 HTTP 发送请求所需的配置。</li><li>Forest 注解： 用于定义 HTTP 发送请求的所有相关信息，一般定义在 interface 上和其方法上。</li><li>动态代理： 用户定义好的 HTTP 请求的<code>interface</code>将通过动态代理产生实际执行发送请求过程的代理类。</li><li>模板表达式： 模板表达式可以嵌入在几乎所有的 HTTP 请求参数定义中，它能够将用户通过参数或全局变量传入的数据动态绑定到 HTTP 请求信息中。</li><li>数据转换： 此模块将字符串数据和<code>JSON</code>或<code>XML</code>形式数据进行互转。目前 JSON 转换器支持<code>Jackson</code>、<code>Fastjson</code>、<code>Gson</code>三种，XML 支持<code>JAXB</code>一种。</li><li>拦截器： 用户可以自定义拦截器，拦截指定的一个或一批请求的开始、成功返回数据、失败、完成等生命周期中的各个环节，以插入自定义的逻辑进行处理。</li><li>过滤器： 用于动态过滤和处理传入 HTTP 请求的相关数据。</li><li>SSL： Forest 支持单向和双向验证的 HTTPS 请求，此模块用于处理 SSL 相关协议的内容。</li></ol><p><strong>后端部分：</strong></p><p>后端为实际执行 HTTP 请求发送过程的第三方 HTTP API，目前支持<code>okHttp3</code>和<code>httpclient</code>两种后端 API。</p></blockquote><h3 id="springboot模式" tabindex="-1">SpringBoot模式 <a class="header-anchor" href="#springboot模式" aria-label="Permalink to &quot;SpringBoot模式&quot;">​</a></h3><h4 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h4><blockquote><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;com.dtflys.forest&lt;/</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;spring-boot-starter-forest&lt;/</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;1.3.8&lt;/</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;com.dtflys.forest&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;spring-boot-starter-forest&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;1.3.8&lt;/</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><p><code>application.yml </code></p><p>目前 Forest 支持<code>okhttp3</code>和<code>httpclient</code>两种后端 HTTP API，若不配置该属性，默认为<code>okhttp3</code>. 也可以改为<code>httpclient</code></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">forest</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">bean-id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">config0</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 在spring上下文中bean的id, 默认值为forestConfiguration</span></span>
<span class="line"><span style="color:#85E89D;">backend</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">okhttp3</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 后端HTTP API： okhttp3</span></span>
<span class="line"><span style="color:#85E89D;">max-connections</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 连接池最大连接数，默认值为500</span></span>
<span class="line"><span style="color:#85E89D;">max-route-connections</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">500</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 每个路由的最大连接数，默认值为500</span></span>
<span class="line"><span style="color:#85E89D;">timeout</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3000</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 请求超时时间，单位为毫秒, 默认值为3000</span></span>
<span class="line"><span style="color:#85E89D;">connect-timeout</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3000</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 连接超时时间，单位为毫秒, 默认值为2000</span></span>
<span class="line"><span style="color:#85E89D;">retry-count</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 请求失败后重试次数，默认为0次不重试</span></span>
<span class="line"><span style="color:#85E89D;">ssl-protocol</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">SSLv3</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 单向验证的HTTPS的默认SSL协议，默认为SSLv3</span></span>
<span class="line"><span style="color:#85E89D;">logEnabled</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 打开或关闭日志，默认为true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#这里retry-count只是简单机械的请求失败后的重试次数，所以一般建议设置为0。 如果一定要多次重试，请一定要在保证服务端的幂等性的基础上进行重试</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">forest</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#22863A;">bean-id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">config0</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 在spring上下文中bean的id, 默认值为forestConfiguration</span></span>
<span class="line"><span style="color:#22863A;">backend</span><span style="color:#24292E;">: </span><span style="color:#032F62;">okhttp3</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 后端HTTP API： okhttp3</span></span>
<span class="line"><span style="color:#22863A;">max-connections</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1000</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 连接池最大连接数，默认值为500</span></span>
<span class="line"><span style="color:#22863A;">max-route-connections</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">500</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 每个路由的最大连接数，默认值为500</span></span>
<span class="line"><span style="color:#22863A;">timeout</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3000</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 请求超时时间，单位为毫秒, 默认值为3000</span></span>
<span class="line"><span style="color:#22863A;">connect-timeout</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3000</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 连接超时时间，单位为毫秒, 默认值为2000</span></span>
<span class="line"><span style="color:#22863A;">retry-count</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 请求失败后重试次数，默认为0次不重试</span></span>
<span class="line"><span style="color:#22863A;">ssl-protocol</span><span style="color:#24292E;">: </span><span style="color:#032F62;">SSLv3</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 单向验证的HTTPS的默认SSL协议，默认为SSLv3</span></span>
<span class="line"><span style="color:#22863A;">logEnabled</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 打开或关闭日志，默认为true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#这里retry-count只是简单机械的请求失败后的重试次数，所以一般建议设置为0。 如果一定要多次重试，请一定要在保证服务端的幂等性的基础上进行重试</span></span></code></pre></div><h6 id="在springboot中开启forest的包扫描进行动态代理" tabindex="-1">在SpringBoot中开启Forest的包扫描进行动态代理 <a class="header-anchor" href="#在springboot中开启forest的包扫描进行动态代理" aria-label="Permalink to &quot;在SpringBoot中开启Forest的包扫描进行动态代理&quot;">​</a></h6><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">SpringBootApplication</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">ForestScan</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">basePackages</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;com.example.demo.forest&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">DemoApplication</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  SpringApplication.</span><span style="color:#B392F0;">run</span><span style="color:#E1E4E8;">(DemoApplication.class, args);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">SpringBootApplication</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ForestScan</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">basePackages</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;com.example.demo.forest&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DemoApplication</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  SpringApplication.</span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">(DemoApplication.class, args);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></blockquote><h4 id="请求接口构建" tabindex="-1">请求接口构建 <a class="header-anchor" href="#请求接口构建" aria-label="Permalink to &quot;请求接口构建&quot;">​</a></h4><h5 id="方法上面使用-request-注解定制请求" tabindex="-1">方法上面使用 <code>@Request</code> 注解定制请求 <a class="header-anchor" href="#方法上面使用-request-注解定制请求" aria-label="Permalink to &quot;方法上面使用 `@Request` 注解定制请求&quot;">​</a></h5><blockquote><p><code>@Request</code> 默认使用<code>GET</code>方式，且将请求响应的数据以<code>String</code>的方式返回给调用者</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">interface</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MyClient</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">simpleRequest</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyClient</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">simpleRequest</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></blockquote><h5 id="request-注解的参数" tabindex="-1"><code>@Request</code> 注解的参数 <a class="header-anchor" href="#request-注解的参数" aria-label="Permalink to &quot;`@Request` 注解的参数&quot;">​</a></h5><blockquote><table><thead><tr><th><strong>参数</strong></th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>url</td><td>String</td><td>请求的主机地址和端口，或者域名映射</td></tr><tr><td>headers</td><td>字符串数组</td><td></td></tr><tr><td>type</td><td>String</td><td>请求类型，默认get，大小写不敏感</td></tr><tr><td>data</td><td></td><td>请求的数据体参数</td></tr><tr><td>contentType</td><td>String</td><td>请求头数据类型</td></tr><tr><td>dataType</td><td>String/JSON</td><td>接受的数据类型</td></tr></tbody></table></blockquote><h6 id="type-支持的请求类型" tabindex="-1">type：支持的请求类型 <a class="header-anchor" href="#type-支持的请求类型" aria-label="Permalink to &quot;type：支持的请求类型&quot;">​</a></h6><blockquote><p>通过<code>@Request</code>注解的<code>type</code>参数指定 HTTP 请求的方式。</p><p>除了<code>GET</code>和<code>POST</code>，也可以指定成其他几种 HTTP 请求方式(<code>PUT</code>, <code>HEAD</code>, <code>OPTIONS</code>, <code>DELETE</code>)。</p><p>其中<code>type</code>属性的大小写不敏感，写成<code>POST</code>和<code>post</code>效果相同。</p></blockquote><h6 id="header-定义请求头" tabindex="-1">header：定义请求头 <a class="header-anchor" href="#header-定义请求头" aria-label="Permalink to &quot;header：定义请求头&quot;">​</a></h6><blockquote><p><code>headers</code>属性接受的是一个字符串数组，在接受多个请求头信息时以以下形式填入请求头，其中组数每一项都是一个字符串，每个字符串代表一个请求头。请求头的名称和值用<code>:</code>分割。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">interface</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MyClient</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">headers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;Accept-Charset: utf-8&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;Content-Type: text/plain&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">multipleHeaders</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#实际产生的 HTTP 请求如下</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">GET http</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#E1E4E8;">HEADER</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">Accept</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">Charset</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> utf</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">8</span></span>
<span class="line"><span style="color:#E1E4E8;">Content</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">Type</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> text</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">plain</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyClient</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">headers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;Accept-Charset: utf-8&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;Content-Type: text/plain&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">multipleHeaders</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#实际产生的 HTTP 请求如下</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">GET http</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#24292E;">HEADER</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">Accept</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">Charset</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> utf</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">8</span></span>
<span class="line"><span style="color:#24292E;">Content</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">Type</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> text</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">plain</span></span></code></pre></div></blockquote><h6 id="data-请求体数据" tabindex="-1">data：请求体数据 <a class="header-anchor" href="#data-请求体数据" aria-label="Permalink to &quot;data：请求体数据&quot;">​</a></h6><blockquote><p>通过<code>@Request</code>注解的<code>data</code>属性把数据添加到请求体。需要注意的是只有当<code>type</code>为<code>POST</code>、<code>PUT</code>、<code>PATCH</code>这类 HTTP Method 时，<code>data</code>属性中的值才会绑定到请求体中，而<code>GET</code>请求在有些情况会绑定到<code>url</code>的参数中。</p><p>具体<code>type</code>属性和<code>data</code>属性数据绑定位置的具体关系如下表：</p><table><thead><tr><th><strong>type</strong></th><th><strong>data属性数据绑定位置</strong></th><th><strong>支持的contentType或Content-Type请求头</strong></th></tr></thead><tbody><tr><td>GET</td><td>url参数部分</td><td>只有application/x-www-form-urlencoded</td></tr><tr><td>POST</td><td>请求体</td><td>任何contentType</td></tr><tr><td>PUT</td><td>请求体</td><td>任何contentType</td></tr><tr><td>PATCH</td><td>请求体</td><td>任何contentType</td></tr><tr><td>HEAD</td><td>url参数部分</td><td>只有application/x-www-form-urlencoded</td></tr><tr><td>OPTIONS</td><td>url参数部分</td><td>只有application/x-www-form-urlencoded</td></tr><tr><td>DELETE</td><td>url参数部分</td><td>只有application/x-www-form-urlencoded</td></tr><tr><td>TRACE</td><td>url参数部分</td><td>只有application/x-www-form-urlencoded</td></tr></tbody></table><p><code>data</code> 属性中进行数据绑定:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">interface</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MyClient</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;post&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;username=${0}&amp;password=${1}&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">headers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;Accept:text/plan&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">dataPost</span><span style="color:#E1E4E8;">(String </span><span style="color:#FFAB70;">username</span><span style="color:#E1E4E8;">, String </span><span style="color:#FFAB70;">password</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyClient</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;post&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">data</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;username=${0}&amp;password=${1}&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">headers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span><span style="color:#032F62;">&quot;Accept:text/plan&quot;</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">dataPost</span><span style="color:#24292E;">(String </span><span style="color:#E36209;">username</span><span style="color:#24292E;">, String </span><span style="color:#E36209;">password</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></blockquote><h6 id="datatype-接受的数据类型" tabindex="-1">dataType：接受的数据类型 <a class="header-anchor" href="#datatype-接受的数据类型" aria-label="Permalink to &quot;dataType：接受的数据类型&quot;">​</a></h6><blockquote><p>Forest请求会自动将响应的返回数据反序列化成需要的数据类型。想要接受指定类型的数据需要完成两步操作：</p><p>第一步：定义<code>dataType</code>属性</p><p><code>dataType</code>属性指定了该请求响应返回的数据类型，目前可选的数据类型有三种: <code>text</code>, <code>json</code>, <code>xml</code></p><p>Forest会根据指定的<code>dataType</code>属性选择不同的反序列化方式。其中<code>dataType</code>的默认值为<code>text</code>，如果不指定其他数据类型，那么Forest就不会做任何形式的序列化，并以文本字符串的形式返回。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">* dataType为text或不填时，请求响应的数据将以文本字符串的形式返回回来</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:8080/text/data&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">dataType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;text&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">getData</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">* dataType为text或不填时，请求响应的数据将以文本字符串的形式返回回来</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:8080/text/data&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">dataType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;text&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">getData</span><span style="color:#24292E;">();</span></span></code></pre></div><p>若指定为<code>json</code>或<code>xml</code>，那就告诉了Forest该请求的响应数据类型为JSON或XML形式的数据，就会以相应的形式进行反序列化。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">* dataType为json或xml时，Forest会进行相应的反序列化</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:8080/text/data&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">dataType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">Map </span><span style="color:#B392F0;">getData</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">* dataType为json或xml时，Forest会进行相应的反序列化</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:8080/text/data&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">dataType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">Map </span><span style="color:#6F42C1;">getData</span><span style="color:#24292E;">();</span></span></code></pre></div><p>注意： Forest需要指明返回类型（如User）的同时，也需要指明数据类型dataType为json或其他类型。</p></blockquote><h6 id="回调函数" tabindex="-1">回调函数 <a class="header-anchor" href="#回调函数" aria-label="Permalink to &quot;回调函数&quot;">​</a></h6><blockquote><p>在Forest中的回调函数使用单方法的接口定义，这样可以在 <code>Java 8</code> 或 <code>Kotlin</code> 语言中方便使用 <code>Lambda</code> 表达式。</p><p>使用的时候只需在接口方法加入<code>OnSuccess&lt;T&gt;</code>类型或<code>OnError</code>类型的参数：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">headers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;Accept:text/plan&quot;</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;username=${username}&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(@</span><span style="color:#F97583;">DataVariable</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;username&quot;</span><span style="color:#E1E4E8;">) String username, OnSuccess</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">String</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> onSuccess, OnError onError);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">headers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span><span style="color:#032F62;">&quot;Accept:text/plan&quot;</span><span style="color:#24292E;">},</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">data</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;username=${username}&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">DataVariable</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;username&quot;</span><span style="color:#24292E;">) String username, OnSuccess</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">String</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> onSuccess, OnError onError);</span></span></code></pre></div><p><code>OnSuccess&lt;T&gt;</code>在请求成功调用响应时会被调用，而<code>OnError</code>在失败或出现错误的时候被调用。</p><p>其中<code>OnSuccess&lt;T&gt;</code>的泛型参数<code>T</code>定义为请求响应返回结果的数据类型。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">myClient.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;foo&quot;</span><span style="color:#E1E4E8;">, (String resText, ForestRequest request, ForestResponse response) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 成功响应回调</span></span>
<span class="line"><span style="color:#E1E4E8;">  System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(resText);    </span></span>
<span class="line"><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">(ForestRuntimeException ex, ForestRequest request, ForestResponse response) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 异常回调</span></span>
<span class="line"><span style="color:#E1E4E8;">  System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(ex.</span><span style="color:#B392F0;">getMessage</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">myClient.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;foo&quot;</span><span style="color:#24292E;">, (String resText, ForestRequest request, ForestResponse response) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 成功响应回调</span></span>
<span class="line"><span style="color:#24292E;">  System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(resText);    </span></span>
<span class="line"><span style="color:#24292E;">},</span></span>
<span class="line"><span style="color:#24292E;">(ForestRuntimeException ex, ForestRequest request, ForestResponse response) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 异常回调</span></span>
<span class="line"><span style="color:#24292E;">  System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(ex.</span><span style="color:#6F42C1;">getMessage</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre></div><blockquote><p>提示： 在异步请求中只能通<code>OnSuccess&lt;T&gt;</code>回调函数接或<code>Future</code>返回值接受数据。 而在同步请求中，<code>OnSuccess&lt;T&gt;</code>回调函数和任何类型的返回值都能接受到请求响应的数据。 <code>OnError</code>回调函数可以用于异常处理，一般在同步请求中使用<code>try-catch</code>也能达到同样的效果。</p></blockquote></blockquote><h6 id="异步请求" tabindex="-1">异步请求 <a class="header-anchor" href="#异步请求" aria-label="Permalink to &quot;异步请求&quot;">​</a></h6><blockquote><p>在Forest使用异步请求，可以通过设置<code>@Request</code>注解的<code>async</code>属性为<code>true</code>实现，不设置或设置为<code>false</code>即为同步请求。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user?username=${0}&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">headers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;Accept:text/plan&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">asyncGet</span><span style="color:#E1E4E8;">(String username， OnSuccess</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">String</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> onSuccess);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user?username=${0}&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">async</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">headers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span><span style="color:#032F62;">&quot;Accept:text/plan&quot;</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">asyncGet</span><span style="color:#24292E;">(String username， OnSuccess</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">String</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> onSuccess);</span></span></code></pre></div><p>一般情况下，异步请求都通过<code>OnSuccess&lt;T&gt;</code>回调函数来接受响应返回的数据，而不是通过接口方法的返回值，所以这里的返回值类型一般会定义为<code>void</code>。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 异步执行</span></span>
<span class="line"><span style="color:#E1E4E8;">myClient.</span><span style="color:#B392F0;">asyncGet</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;foo&quot;</span><span style="color:#E1E4E8;">, (result, request, response) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">// 处理响应结果</span></span>
<span class="line"><span style="color:#E1E4E8;">System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 异步执行</span></span>
<span class="line"><span style="color:#24292E;">myClient.</span><span style="color:#6F42C1;">asyncGet</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;foo&quot;</span><span style="color:#24292E;">, (result, request, response) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#6A737D;">// 处理响应结果</span></span>
<span class="line"><span style="color:#24292E;">System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(result);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre></div><p>不习惯函数式的编程方式，也可以用<code>Future&lt;T&gt;</code>类型定义方法返回值的方式来接受响应数据。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user?username=foo&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">headers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;Accept:text/plan&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">Future</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">String</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">asyncFuture</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user?username=foo&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">async</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">headers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span><span style="color:#032F62;">&quot;Accept:text/plan&quot;</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">Future</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">String</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">asyncFuture</span><span style="color:#24292E;">();</span></span></code></pre></div><p>获取Future的结果</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 异步执行</span></span>
<span class="line"><span style="color:#E1E4E8;">Future&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">&gt; future </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> myClient.</span><span style="color:#B392F0;">asyncFuture</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#6A737D;">// 获取数据</span></span>
<span class="line"><span style="color:#E1E4E8;">String result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> future.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 异步执行</span></span>
<span class="line"><span style="color:#24292E;">Future&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; future </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> myClient.</span><span style="color:#6F42C1;">asyncFuture</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">// 获取数据</span></span>
<span class="line"><span style="color:#24292E;">String result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> future.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">();</span></span></code></pre></div></blockquote><h4 id="数据绑定" tabindex="-1">数据绑定 <a class="header-anchor" href="#数据绑定" aria-label="Permalink to &quot;数据绑定&quot;">​</a></h4><blockquote><p>通过数据绑定参数化定制请求</p></blockquote><h5 id="a-参数序号绑定" tabindex="-1">A.参数序号绑定 <a class="header-anchor" href="#a-参数序号绑定" aria-label="Permalink to &quot;A.参数序号绑定&quot;">​</a></h5><blockquote><p>可以使用<code>${数字}</code>的方式引用对应顺序的参数，其中<code>${...}</code>是模板表达式的语法形式。</p><p>序号所对应的参数在接口方法调用时传入的值，会被自动绑定到<code>${数字}</code>所在的位置。</p><p><code>注</code>：参数序号从<code>0</code>开始计数。</p><p>比如<code>${0}</code>表示的就是第一个参数，<code>${1}</code>表示的第二个参数，以此类推。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;${0}/send?un=${1}&amp;pw=${2}&amp;da=${3}&amp;sm=${4}&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;get&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">dataType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> Map </span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">String base,</span></span>
<span class="line"><span style="color:#E1E4E8;">String userName,</span></span>
<span class="line"><span style="color:#E1E4E8;">String password,</span></span>
<span class="line"><span style="color:#E1E4E8;">String phoneList,</span></span>
<span class="line"><span style="color:#E1E4E8;">String content</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;${0}/send?un=${1}&amp;pw=${2}&amp;da=${3}&amp;sm=${4}&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;get&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">dataType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Map </span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">String base,</span></span>
<span class="line"><span style="color:#24292E;">String userName,</span></span>
<span class="line"><span style="color:#24292E;">String password,</span></span>
<span class="line"><span style="color:#24292E;">String phoneList,</span></span>
<span class="line"><span style="color:#24292E;">String content</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//方法调用传递参数</span></span>
<span class="line"><span style="color:#E1E4E8;">myClient.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;http://localhost:8080&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;DT&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;123456&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;123888888&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;Hahaha&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//效果</span></span>
<span class="line"><span style="color:#E1E4E8;">GET http</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//localhost:8080/send?un=DT&amp;pw=123456&amp;da=123888888&amp;sm=Hahaha</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//方法调用传递参数</span></span>
<span class="line"><span style="color:#24292E;">myClient.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;http://localhost:8080&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;DT&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;123456&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;123888888&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;Hahaha&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//效果</span></span>
<span class="line"><span style="color:#24292E;">GET http</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//localhost:8080/send?un=DT&amp;pw=123456&amp;da=123888888&amp;sm=Hahaha</span></span></code></pre></div></blockquote><h5 id="b-通过注解-dataparam-进行参数绑定" tabindex="-1">B.通过注解 <code>@DataParam</code> 进行参数绑定 <a class="header-anchor" href="#b-通过注解-dataparam-进行参数绑定" aria-label="Permalink to &quot;B.通过注解 `@DataParam` 进行参数绑定&quot;">​</a></h5><blockquote><p>在接口方法的参数前加上<code>@DataParam</code>注解并在<code>value</code>属性中给予一个名词，就能实现参数绑定。</p><h6 id="_1参数绑定的位置" tabindex="-1">①参数绑定的位置 <a class="header-anchor" href="#_1参数绑定的位置" aria-label="Permalink to &quot;①参数绑定的位置&quot;">​</a></h6><p>被<code>@DataParam</code>注解修饰的参数数据的绑定位置较为灵活多变，它可以出现在请求<code>url</code>的参数部分，也可以出现在请求 Body 中。具体出现位置取决于由<code>type</code>属性定义的 HTTP Method，其绑定的具体位置如下表：</p><table><thead><tr><th><strong>type</strong></th><th><strong>@ParaParam注解绑定位置</strong></th></tr></thead><tbody><tr><td>GET</td><td>url参数部分</td></tr><tr><td>POST</td><td>请求体</td></tr><tr><td>PUT</td><td>请求体</td></tr><tr><td>PATCH</td><td>请求体</td></tr><tr><td>HEAD</td><td>url参数部分</td></tr><tr><td>OPTIONS</td><td>url参数部分</td></tr><tr><td>DELETE</td><td>url参数部分</td></tr><tr><td>TRACE</td><td>url参数部分</td></tr></tbody></table><p><code>GET</code>、<code>HEAD</code>等方法会将参数值直接绑定到 URL 的参数中。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;${0}/send&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;get&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">dataType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> Map </span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">String base,</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;un&quot;</span><span style="color:#E1E4E8;">) String userName,</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;pw&quot;</span><span style="color:#E1E4E8;">) String password,</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;da&quot;</span><span style="color:#E1E4E8;">) String phoneList,</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;sm&quot;</span><span style="color:#E1E4E8;">) String content</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;${0}/send&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;get&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">dataType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Map </span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">String base,</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;un&quot;</span><span style="color:#24292E;">) String userName,</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;pw&quot;</span><span style="color:#24292E;">) String password,</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;da&quot;</span><span style="color:#24292E;">) String phoneList,</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;sm&quot;</span><span style="color:#24292E;">) String content</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//方法调用传递参数</span></span>
<span class="line"><span style="color:#E1E4E8;">myClient.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;http://localhost:8080&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;DT&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;123456&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;123888888&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;Hahaha&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//效果</span></span>
<span class="line"><span style="color:#E1E4E8;">GET http</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//localhost:8080/send?un=DT&amp;pw=123456&amp;da=123888888&amp;sm=Hahaha</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//方法调用传递参数</span></span>
<span class="line"><span style="color:#24292E;">myClient.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;http://localhost:8080&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;DT&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;123456&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;123888888&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;Hahaha&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//效果</span></span>
<span class="line"><span style="color:#24292E;">GET http</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//localhost:8080/send?un=DT&amp;pw=123456&amp;da=123888888&amp;sm=Hahaha</span></span></code></pre></div><p><code>POST</code>、<code>PUT</code>等方法会将参数值绑定到请求体中，同时在请求中的数据在<code>默认</code>情况下按<code>x-www-form-urlencoded</code>格式绑定。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;post&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">headers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;Accept:text/plan&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(@</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;username&quot;</span><span style="color:#E1E4E8;">) String username, @</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;password&quot;</span><span style="color:#E1E4E8;">) String password);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;post&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">headers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span><span style="color:#032F62;">&quot;Accept:text/plan&quot;</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;username&quot;</span><span style="color:#24292E;">) String username, @</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;password&quot;</span><span style="color:#24292E;">) String password);</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//方法调用传递参数</span></span>
<span class="line"><span style="color:#E1E4E8;">myClient.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;foo&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;bar&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//效果</span></span>
<span class="line"><span style="color:#E1E4E8;">POST http</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//localhost:5000/hello</span></span>
<span class="line"><span style="color:#E1E4E8;">HEADER</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">Accept</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> text</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">plan</span></span>
<span class="line"><span style="color:#E1E4E8;">BODY</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">username</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">foo</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">password</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">bar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//方法调用传递参数</span></span>
<span class="line"><span style="color:#24292E;">myClient.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;foo&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;bar&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//效果</span></span>
<span class="line"><span style="color:#24292E;">POST http</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//localhost:5000/hello</span></span>
<span class="line"><span style="color:#24292E;">HEADER</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">Accept</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> text</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">plan</span></span>
<span class="line"><span style="color:#24292E;">BODY</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">username</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">foo</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">password</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">bar</span></span></code></pre></div><h6 id="_2数据绑定格式" tabindex="-1">②数据绑定格式 <a class="header-anchor" href="#_2数据绑定格式" aria-label="Permalink to &quot;②数据绑定格式&quot;">​</a></h6><p>若想参数值在请求中传输<code>JSON</code>或<code>XML</code>等格式绑定，可以通过修改<code>contentType</code>或<code>Content-Type</code>请求头来实现对应的数据格式， 具体数据格式和<code>contentType</code>属性的关系请参考下表：</p><table><thead><tr><th><strong>contentType / Content-Type</strong></th><th><strong>数据格式</strong></th></tr></thead><tbody><tr><td>不设置</td><td>x-www-form-urlencoded表单格式</td></tr><tr><td>application/x-www-form-urlencoded</td><td>x-www-form-urlencoded表单格式</td></tr><tr><td>application/json</td><td>JSON格式</td></tr><tr><td>application/xml</td><td>XML格式</td></tr></tbody></table><p>若传输的 Body 数据是标准表单格式，就不用设置<code>cotentType</code>或请求头<code>Content-Type</code>了</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">interface</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MyClient</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;post&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">headers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;Accept:text/plan&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">postBody</span><span style="color:#E1E4E8;">(@</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;username&quot;</span><span style="color:#E1E4E8;">) String </span><span style="color:#FFAB70;">username</span><span style="color:#E1E4E8;">, @</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;password&quot;</span><span style="color:#E1E4E8;">) String </span><span style="color:#FFAB70;">password</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyClient</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;post&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">headers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span><span style="color:#032F62;">&quot;Accept:text/plan&quot;</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">postBody</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;username&quot;</span><span style="color:#24292E;">) String </span><span style="color:#E36209;">username</span><span style="color:#24292E;">, @</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;password&quot;</span><span style="color:#24292E;">) String </span><span style="color:#E36209;">password</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>如果调用方代码如下所示：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">myClient.</span><span style="color:#B392F0;">postBody</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;foo&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;bar&quot;</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">myClient.</span><span style="color:#6F42C1;">postBody</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;foo&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;bar&quot;</span><span style="color:#24292E;">);</span></span></code></pre></div><p>实际产生的 HTTP 请求如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">POST http://localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#e1e4e8;">HEADER:</span></span>
<span class="line"><span style="color:#e1e4e8;">Accept: text/plan</span></span>
<span class="line"><span style="color:#e1e4e8;">BODY:</span></span>
<span class="line"><span style="color:#e1e4e8;">username=foo&amp;password=bar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">POST http://localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#24292e;">HEADER:</span></span>
<span class="line"><span style="color:#24292e;">Accept: text/plan</span></span>
<span class="line"><span style="color:#24292e;">BODY:</span></span>
<span class="line"><span style="color:#24292e;">username=foo&amp;password=bar</span></span></code></pre></div><p>若要将 Body 中的数据内容转换成 JSON 格式，只要设置contentType属性为application/json即可</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">interface</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MyClient</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;post&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">contentType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;application/json&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">postBody</span><span style="color:#E1E4E8;">(@</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;username&quot;</span><span style="color:#E1E4E8;">) String </span><span style="color:#FFAB70;">username</span><span style="color:#E1E4E8;">, @</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;password&quot;</span><span style="color:#E1E4E8;">) String </span><span style="color:#FFAB70;">password</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyClient</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;post&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">contentType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;application/json&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">postBody</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;username&quot;</span><span style="color:#24292E;">) String </span><span style="color:#E36209;">username</span><span style="color:#24292E;">, @</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;password&quot;</span><span style="color:#24292E;">) String </span><span style="color:#E36209;">password</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>如果调用方代码如下所示：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">myClient.postBody(&quot;foo&quot;, &quot;bar&quot;);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">myClient.postBody(&quot;foo&quot;, &quot;bar&quot;);</span></span></code></pre></div><p>实际产生的 HTTP 请求如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">POST http</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#E1E4E8;">HEADER</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">Content</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">Type</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> application</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">json</span></span>
<span class="line"><span style="color:#E1E4E8;">BODY</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span><span style="color:#9ECBFF;">&quot;username&quot;</span><span style="color:#F97583;">:</span><span style="color:#9ECBFF;">&quot;foo&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;password&quot;</span><span style="color:#F97583;">:</span><span style="color:#9ECBFF;">&quot;bar&quot;</span><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">POST http</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#24292E;">HEADER</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">Content</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">Type</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> application</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">json</span></span>
<span class="line"><span style="color:#24292E;">BODY</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">{</span><span style="color:#032F62;">&quot;username&quot;</span><span style="color:#D73A49;">:</span><span style="color:#032F62;">&quot;foo&quot;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&quot;password&quot;</span><span style="color:#D73A49;">:</span><span style="color:#032F62;">&quot;bar&quot;</span><span style="color:#24292E;">}</span></span></code></pre></div><p>或者不用contentType属性，使用请求头Content-Type: application/json效果相同</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">interface</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MyClient</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;post&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">headers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;Content-Type: application/json&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">postBody</span><span style="color:#E1E4E8;">(@</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;username&quot;</span><span style="color:#E1E4E8;">) String </span><span style="color:#FFAB70;">username</span><span style="color:#E1E4E8;">, @</span><span style="color:#F97583;">DataParam</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;password&quot;</span><span style="color:#E1E4E8;">) String </span><span style="color:#FFAB70;">password</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyClient</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;post&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">headers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span><span style="color:#032F62;">&quot;Content-Type: application/json&quot;</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">postBody</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;username&quot;</span><span style="color:#24292E;">) String </span><span style="color:#E36209;">username</span><span style="color:#24292E;">, @</span><span style="color:#D73A49;">DataParam</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;password&quot;</span><span style="color:#24292E;">) String </span><span style="color:#E36209;">password</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></blockquote><h5 id="c-datavariable-参数绑定" tabindex="-1">C.@DataVariable 参数绑定 <a class="header-anchor" href="#c-datavariable-参数绑定" aria-label="Permalink to &quot;C.@DataVariable 参数绑定&quot;">​</a></h5><blockquote><p>在接口方法中定义的参数前加上@DataVariable注解并value中输入一个名称，便可以实现参数的变量名绑定。</p><p>@DataVariable注解的value的值便是该参数在 Forest 请求中对应的变量名。</p><p>意思就是在@Request的多个不同属性（url, headers, data）中通过${变量名}的模板表达式的语法形式引用之前在@DataVariable注解上定义的变量名，实际引用到的值就是调用该方法时传入该参数的实际值。</p><p>@DataVariable注解修饰的参数数据可以出现在请求的任意部分（url, header, data），具体在哪个部分取决于在哪里引用它。如果没有任何地方引用该变量名，该变量的值就不会出现在任何地方。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;${base}/send?un=${un}&amp;pw=${pw}&amp;da=${da}&amp;sm=${sm}&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;get&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">dataType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> Map </span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">DataVariable</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;base&quot;</span><span style="color:#E1E4E8;">) String base,</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">DataVariable</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;un&quot;</span><span style="color:#E1E4E8;">) String userName,</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">DataVariable</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;pw&quot;</span><span style="color:#E1E4E8;">) String password,</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">DataVariable</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;da&quot;</span><span style="color:#E1E4E8;">) String phoneList,</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">DataVariable</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;sm&quot;</span><span style="color:#E1E4E8;">) String content</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;${base}/send?un=${un}&amp;pw=${pw}&amp;da=${da}&amp;sm=${sm}&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;get&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">dataType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Map </span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DataVariable</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;base&quot;</span><span style="color:#24292E;">) String base,</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DataVariable</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;un&quot;</span><span style="color:#24292E;">) String userName,</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DataVariable</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;pw&quot;</span><span style="color:#24292E;">) String password,</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DataVariable</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;da&quot;</span><span style="color:#24292E;">) String phoneList,</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DataVariable</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;sm&quot;</span><span style="color:#24292E;">) String content</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">myClient.send(&quot;http://localhost:8080&quot;, &quot;DT&quot;, &quot;123456&quot;, &quot;123888888&quot;, &quot;Hahaha&quot;);</span></span>
<span class="line"><span style="color:#e1e4e8;">实际产生的 HTTP 请求如下：</span></span>
<span class="line"><span style="color:#e1e4e8;">GET http://localhost:8080/send?un=DT&amp;pw=123456&amp;da=123888888&amp;sm=Hahaha</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">myClient.send(&quot;http://localhost:8080&quot;, &quot;DT&quot;, &quot;123456&quot;, &quot;123888888&quot;, &quot;Hahaha&quot;);</span></span>
<span class="line"><span style="color:#24292e;">实际产生的 HTTP 请求如下：</span></span>
<span class="line"><span style="color:#24292e;">GET http://localhost:8080/send?un=DT&amp;pw=123456&amp;da=123888888&amp;sm=Hahaha</span></span></code></pre></div></blockquote><h5 id="d-dataobject-对象绑定" tabindex="-1">D.@DataObject 对象绑定 <a class="header-anchor" href="#d-dataobject-对象绑定" aria-label="Permalink to &quot;D.@DataObject 对象绑定&quot;">​</a></h5><blockquote><p>上面的提到的@DataParam绑定，以及在data属性中的绑定可以方便解决大部分数据传输要求。 但缺点是参数要一个一个写，如果有很多参数或属性会写的十分复杂，而且请求要传输一个十分复杂的对象就会变得非常无能为力。</p><p>所以为了解决这个问题，Forest引入了@DataObject注解针对对象进行数据绑定。</p><p>请看下面的例子：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">@Request(url = &quot;http://localhost:5000/hello/user&quot;)</span></span>
<span class="line"><span style="color:#e1e4e8;">String send(@DataObject User user);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">@Request(url = &quot;http://localhost:5000/hello/user&quot;)</span></span>
<span class="line"><span style="color:#24292e;">String send(@DataObject User user);</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GET http://localhost:5000/hello/user?username=foo&amp;password=bar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GET http://localhost:5000/hello/user?username=foo&amp;password=bar</span></span></code></pre></div><p>如上所示，@DataObject注解会将传入的对象拆成一个一个属性键值对放入url的query参数部分。用这种方式，即使有十几二十个参数，接口的参数也只需传一个对象即可。</p><p>@DataObject绑定的数据不仅可以出现在url参数上，还可以出现在请求体中，不仅可以产生query参数的数据格式,也可以变成json格式或是xml格式。</p><p>具体数据绑定的出现位置请看下表：</p><table><thead><tr><th>type</th><th>数据绑定的位置</th></tr></thead><tbody><tr><td>GET</td><td>url参数部分</td></tr><tr><td>POST</td><td>请求体</td></tr><tr><td>PUT</td><td>请求体</td></tr><tr><td>PATCH</td><td>请求体</td></tr><tr><td>HEAD</td><td>url参数部分</td></tr><tr><td>OPTIONS</td><td>url参数部分</td></tr><tr><td>DELETE</td><td>url参数部分</td></tr><tr><td>TRACE</td><td>url参数部分</td></tr></tbody></table></blockquote><h6 id="绑定到请求体" tabindex="-1">绑定到请求体 <a class="header-anchor" href="#绑定到请求体" aria-label="Permalink to &quot;绑定到请求体&quot;">​</a></h6><blockquote><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;post&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(@</span><span style="color:#F97583;">DataObject</span><span style="color:#E1E4E8;"> User user);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">POST http</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#E1E4E8;">BODY</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">username</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">foo</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">password</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">bar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;post&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">DataObject</span><span style="color:#24292E;"> User user);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">POST http</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#24292E;">BODY</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">username</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">foo</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">password</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">bar</span></span></code></pre></div><p>如上所示，User对象的数据出现在了Body中。这里出现的是x-www-form-urlencoded表单数据格式，是在没指定内容格式情况下的默认格式。</p></blockquote><h6 id="绑定为json格式" tabindex="-1">绑定为JSON格式 <a class="header-anchor" href="#绑定为json格式" aria-label="Permalink to &quot;绑定为JSON格式&quot;">​</a></h6><blockquote><p>要让<code>@DataObject</code>绑定的对象转换成<code>JSON</code>格式也非常简单，只要将<code>contentType</code>属性或<code>Content-Type</code>请求头指定为<code>application/json</code>便可</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">contentType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;application/json&quot;</span><span style="color:#E1E4E8;">, </span></span>
<span class="line"><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;post&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(@</span><span style="color:#F97583;">DataObject</span><span style="color:#E1E4E8;"> User user);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">contentType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;application/json&quot;</span><span style="color:#24292E;">, </span></span>
<span class="line"><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;post&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">DataObject</span><span style="color:#24292E;"> User user);</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">POST http</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#E1E4E8;">HEADER</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">Content</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">Type</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> application</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">json</span></span>
<span class="line"><span style="color:#E1E4E8;">BODY</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span><span style="color:#9ECBFF;">&quot;username&quot;</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;foo&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;password&quot;</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;bar&quot;</span><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">POST http</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#24292E;">HEADER</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">Content</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">Type</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> application</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">json</span></span>
<span class="line"><span style="color:#24292E;">BODY</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">{</span><span style="color:#032F62;">&quot;username&quot;</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;foo&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;password&quot;</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;bar&quot;</span><span style="color:#24292E;">}</span></span></code></pre></div></blockquote><h6 id="绑定为xml格式" tabindex="-1">绑定为XML格式 <a class="header-anchor" href="#绑定为xml格式" aria-label="Permalink to &quot;绑定为XML格式&quot;">​</a></h6><blockquote><p><code>@DataObject</code>较为特殊，除了指定<code>contentType</code>属性或<code>Content-Type</code>请求头为<code>application/xml</code>外，还需要设置</p><p><code>@DataObject</code>的<code>filter</code>属性为<code>xml</code>。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">contentType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;application/xml&quot;</span><span style="color:#E1E4E8;">, </span></span>
<span class="line"><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;post&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">String </span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(@</span><span style="color:#F97583;">DataObject</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">filter</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;xml&quot;</span><span style="color:#E1E4E8;">) User user);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:5000/hello/user&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">contentType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;application/xml&quot;</span><span style="color:#24292E;">, </span></span>
<span class="line"><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;post&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String </span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">DataObject</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">filter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;xml&quot;</span><span style="color:#24292E;">) User user);</span></span></code></pre></div><p>此外，这里的<code>User</code>对象也要绑定<code>JAXB</code>注解：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">XmlRootElement</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;misc&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> User {</span></span>
<span class="line"><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> String usrname;</span></span>
<span class="line"><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> String password;</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> String </span><span style="color:#B392F0;">getUsername</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> username;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setUsername</span><span style="color:#E1E4E8;">(String username) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.username </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> username;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> String </span><span style="color:#B392F0;">getPassword</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> password;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setPassword</span><span style="color:#E1E4E8;">(String password) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.password </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> password;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">XmlRootElement</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;misc&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> User {</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String usrname;</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String password;</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> String </span><span style="color:#6F42C1;">getUsername</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> username;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setUsername</span><span style="color:#24292E;">(String username) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.username </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> username;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> String </span><span style="color:#6F42C1;">getPassword</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> password;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setPassword</span><span style="color:#24292E;">(String password) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.password </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> password;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>调用传入<code>User</code>对象后的结果如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">POST http</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#E1E4E8;">HEADER</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">Content</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">Type</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> application</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">xml</span></span>
<span class="line"><span style="color:#E1E4E8;">BODY</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">misc</span><span style="color:#F97583;">&gt;&lt;</span><span style="color:#E1E4E8;">username</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">foo</span><span style="color:#F97583;">&lt;/</span><span style="color:#E1E4E8;">username</span><span style="color:#F97583;">&gt;&lt;</span><span style="color:#E1E4E8;">password</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">bar</span><span style="color:#F97583;">&lt;/</span><span style="color:#E1E4E8;">password</span><span style="color:#F97583;">&gt;&lt;/</span><span style="color:#E1E4E8;">misc</span><span style="color:#F97583;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">POST http</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//localhost:5000/hello/user</span></span>
<span class="line"><span style="color:#24292E;">HEADER</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">Content</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">Type</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> application</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">xml</span></span>
<span class="line"><span style="color:#24292E;">BODY</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">misc</span><span style="color:#D73A49;">&gt;&lt;</span><span style="color:#24292E;">username</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">foo</span><span style="color:#D73A49;">&lt;/</span><span style="color:#24292E;">username</span><span style="color:#D73A49;">&gt;&lt;</span><span style="color:#24292E;">password</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">bar</span><span style="color:#D73A49;">&lt;/</span><span style="color:#24292E;">password</span><span style="color:#D73A49;">&gt;&lt;/</span><span style="color:#24292E;">misc</span><span style="color:#D73A49;">&gt;</span></span></code></pre></div></blockquote><h5 id="e-全局变量绑定" tabindex="-1">E.全局变量绑定 <a class="header-anchor" href="#e-全局变量绑定" aria-label="Permalink to &quot;E.全局变量绑定&quot;">​</a></h5><blockquote><p>若已经在SpringBoot的application.yml或者application.propertise文件中定义好全局变量，那便可以直接在请求定义中绑定全局变量了。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">basetUrl</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">http://localhost:5050</span></span>
<span class="line"><span style="color:#85E89D;">usrename</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">foo</span></span>
<span class="line"><span style="color:#85E89D;">userpwd</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">bar</span></span>
<span class="line"><span style="color:#85E89D;">phoneList</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">123888888</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">basetUrl</span><span style="color:#24292E;">: </span><span style="color:#032F62;">http://localhost:5050</span></span>
<span class="line"><span style="color:#22863A;">usrename</span><span style="color:#24292E;">: </span><span style="color:#032F62;">foo</span></span>
<span class="line"><span style="color:#22863A;">userpwd</span><span style="color:#24292E;">: </span><span style="color:#032F62;">bar</span></span>
<span class="line"><span style="color:#22863A;">phoneList</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">123888888</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Request</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">url</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;${basetUrl}/send?un=${usrename}&amp;pw=${userpwd}&amp;da=${phoneList}&amp;sm=${sm}&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;get&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">dataType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">Map </span><span style="color:#B392F0;">testVar</span><span style="color:#E1E4E8;">(@</span><span style="color:#F97583;">DataVariable</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;sm&quot;</span><span style="color:#E1E4E8;">) String content);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Request</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;${basetUrl}/send?un=${usrename}&amp;pw=${userpwd}&amp;da=${phoneList}&amp;sm=${sm}&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;get&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#005CC5;">dataType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">Map </span><span style="color:#6F42C1;">testVar</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">DataVariable</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;sm&quot;</span><span style="color:#24292E;">) String content);</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">myClient.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Xxxxxx&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">GET http</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//localhost:5050/send?un=foo&amp;pw=bar&amp;da=123888888&amp;sm=Xxxxxx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">myClient.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Xxxxxx&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">GET http</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//localhost:5050/send?un=foo&amp;pw=bar&amp;da=123888888&amp;sm=Xxxxxx</span></span></code></pre></div></blockquote><h3 id="快捷接口-1-5-3" tabindex="-1">快捷接口（1.5.3） <a class="header-anchor" href="#快捷接口-1-5-3" aria-label="Permalink to &quot;快捷接口（1.5.3）&quot;">​</a></h3><h4 id="发送请求" tabindex="-1">发送请求 <a class="header-anchor" href="#发送请求" aria-label="Permalink to &quot;发送请求&quot;">​</a></h4><p>以字符串形式接受响应数据</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// Get请求</span></span>
<span class="line"><span style="color:#6A737D;">// 并以 String 类型接受数据</span></span>
<span class="line"><span style="color:#E1E4E8;">String str </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Forest.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">executeAsString</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// Get请求</span></span>
<span class="line"><span style="color:#6A737D;">// 并以 String 类型接受数据</span></span>
<span class="line"><span style="color:#24292E;">String str </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Forest.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">executeAsString</span><span style="color:#24292E;">();</span></span></code></pre></div><p>以自定义类型形式接受响应数据</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// Post请求</span></span>
<span class="line"><span style="color:#6A737D;">// 并以自定义的 MyResult 类型接受</span></span>
<span class="line"><span style="color:#E1E4E8;">MyResult myResult </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Forest.</span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(MyResult.class);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// Post请求</span></span>
<span class="line"><span style="color:#6A737D;">// 并以自定义的 MyResult 类型接受</span></span>
<span class="line"><span style="color:#24292E;">MyResult myResult </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Forest.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(MyResult.class);</span></span></code></pre></div><p>以带复杂泛型参数的类型形式接受响应数据</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 通过 TypeReference 引用类传递泛型参数</span></span>
<span class="line"><span style="color:#6A737D;">// 就可以将响应数据以带复杂泛型参数的类型接受了</span></span>
<span class="line"><span style="color:#E1E4E8;">Result&lt;List&lt;</span><span style="color:#F97583;">User</span><span style="color:#E1E4E8;">&gt;&gt; userList </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Forest.</span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> TypeReference&lt;Result&lt;List&lt;</span><span style="color:#F97583;">User</span><span style="color:#E1E4E8;">&gt;&gt;&gt;() {});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 通过 TypeReference 引用类传递泛型参数</span></span>
<span class="line"><span style="color:#6A737D;">// 就可以将响应数据以带复杂泛型参数的类型接受了</span></span>
<span class="line"><span style="color:#24292E;">Result&lt;List&lt;</span><span style="color:#D73A49;">User</span><span style="color:#24292E;">&gt;&gt; userList </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Forest.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> TypeReference&lt;Result&lt;List&lt;</span><span style="color:#D73A49;">User</span><span style="color:#24292E;">&gt;&gt;&gt;() {});</span></span></code></pre></div><p>异步请求</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 异步 Post 请求</span></span>
<span class="line"><span style="color:#6A737D;">// 通过 onSuccess 回调函数处理请求成功后的结果</span></span>
<span class="line"><span style="color:#6A737D;">// 而 onError 回调函数则在请求失败后被触发</span></span>
<span class="line"><span style="color:#E1E4E8;">Forest.</span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">async</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">onSuccess</span><span style="color:#E1E4E8;">(((data, req, res) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// data 为响应成功后返回的反序列化过的数据</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// req 为Forest请求对象，即 ForestRequest 类实例</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// res 为Forest响应对象，即 ForestResponse 类实例</span></span>
<span class="line"><span style="color:#E1E4E8;">        }))</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">onError</span><span style="color:#E1E4E8;">(((ex, req, res) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// ex 为请求过程可能抛出的异常对象</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// req 为Forest请求对象，即 ForestRequest 类实例</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// res 为Forest响应对象，即 ForestResponse 类实例</span></span>
<span class="line"><span style="color:#E1E4E8;">        }))</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 异步 Post 请求</span></span>
<span class="line"><span style="color:#6A737D;">// 通过 onSuccess 回调函数处理请求成功后的结果</span></span>
<span class="line"><span style="color:#6A737D;">// 而 onError 回调函数则在请求失败后被触发</span></span>
<span class="line"><span style="color:#24292E;">Forest.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">async</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">onSuccess</span><span style="color:#24292E;">(((data, req, res) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// data 为响应成功后返回的反序列化过的数据</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// req 为Forest请求对象，即 ForestRequest 类实例</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// res 为Forest响应对象，即 ForestResponse 类实例</span></span>
<span class="line"><span style="color:#24292E;">        }))</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">onError</span><span style="color:#24292E;">(((ex, req, res) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// ex 为请求过程可能抛出的异常对象</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// req 为Forest请求对象，即 ForestRequest 类实例</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// res 为Forest响应对象，即 ForestResponse 类实例</span></span>
<span class="line"><span style="color:#24292E;">        }))</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">();</span></span></code></pre></div><p>定义请求的各种参数</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 定义各种参数</span></span>
<span class="line"><span style="color:#6A737D;">// 并以 Map 类型接受</span></span>
<span class="line"><span style="color:#E1E4E8;">Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; map </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Forest.</span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">backend</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;okhttp3&quot;</span><span style="color:#E1E4E8;">)        </span><span style="color:#6A737D;">// 设置后端为 okhttp3</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">host</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="color:#E1E4E8;">)         </span><span style="color:#6A737D;">// 设置地址的host为 127.0.0.1</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">port</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">8080</span><span style="color:#E1E4E8;">)                </span><span style="color:#6A737D;">// 设置地址的端口为 8080</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">contentTypeJson</span><span style="color:#E1E4E8;">()         </span><span style="color:#6A737D;">// 设置 Content-Type 头为 application/json</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">addBody</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;a&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)           </span><span style="color:#6A737D;">// 添加 Body 项(键值对)： a, 1</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">addBody</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;b&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)           </span><span style="color:#6A737D;">// 添加 Body 项(键值对：  b, 2</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">maxRetryCount</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)          </span><span style="color:#6A737D;">// 设置请求最大重试次数为 3</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 设置 onSuccess 回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">onSuccess</span><span style="color:#E1E4E8;">((data, req, res) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> { log.</span><span style="color:#B392F0;">info</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;success!&quot;</span><span style="color:#E1E4E8;">); })</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 设置 onError 回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">onError</span><span style="color:#E1E4E8;">((ex, req, res) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> { log.</span><span style="color:#B392F0;">info</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;error!&quot;</span><span style="color:#E1E4E8;">); })</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 设置请求成功判断条件回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">successWhen</span><span style="color:#E1E4E8;">((req, res) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> res.</span><span style="color:#B392F0;">noException</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> res.</span><span style="color:#B392F0;">statusOk</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 执行并返回Map数据类型对象</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">executeAsMap</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 定义各种参数</span></span>
<span class="line"><span style="color:#6A737D;">// 并以 Map 类型接受</span></span>
<span class="line"><span style="color:#24292E;">Map&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Object</span><span style="color:#24292E;">&gt; map </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Forest.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">backend</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;okhttp3&quot;</span><span style="color:#24292E;">)        </span><span style="color:#6A737D;">// 设置后端为 okhttp3</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">host</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;127.0.0.1&quot;</span><span style="color:#24292E;">)         </span><span style="color:#6A737D;">// 设置地址的host为 127.0.0.1</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">port</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">8080</span><span style="color:#24292E;">)                </span><span style="color:#6A737D;">// 设置地址的端口为 8080</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">contentTypeJson</span><span style="color:#24292E;">()         </span><span style="color:#6A737D;">// 设置 Content-Type 头为 application/json</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">addBody</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;a&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)           </span><span style="color:#6A737D;">// 添加 Body 项(键值对)： a, 1</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">addBody</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;b&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">)           </span><span style="color:#6A737D;">// 添加 Body 项(键值对：  b, 2</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">maxRetryCount</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">)          </span><span style="color:#6A737D;">// 设置请求最大重试次数为 3</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 设置 onSuccess 回调函数</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">onSuccess</span><span style="color:#24292E;">((data, req, res) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> { log.</span><span style="color:#6F42C1;">info</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;success!&quot;</span><span style="color:#24292E;">); })</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 设置 onError 回调函数</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">onError</span><span style="color:#24292E;">((ex, req, res) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> { log.</span><span style="color:#6F42C1;">info</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;error!&quot;</span><span style="color:#24292E;">); })</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 设置请求成功判断条件回调函数</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">successWhen</span><span style="color:#24292E;">((req, res) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> res.</span><span style="color:#6F42C1;">noException</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> res.</span><span style="color:#6F42C1;">statusOk</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 执行并返回Map数据类型对象</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">executeAsMap</span><span style="color:#24292E;">();</span></span></code></pre></div><h2 id="asynctool" tabindex="-1">AsyncTool <a class="header-anchor" href="#asynctool" aria-label="Permalink to &quot;AsyncTool&quot;">​</a></h2><p><code>AsyncTool框架</code>是一款<strong>多线程并行、串行、阻塞、依赖、回调的并行框架</strong>。</p><h3 id="应用场景" tabindex="-1">应用场景 <a class="header-anchor" href="#应用场景" aria-label="Permalink to &quot;应用场景&quot;">​</a></h3><p>1.解决任意的<a href="https://so.csdn.net/so/search?q=%E5%A4%9A%E7%BA%BF%E7%A8%8B&amp;spm=1001.2101.3001.7020" target="_blank" rel="noreferrer">多线程</a>并行、串行、阻塞、依赖、回调。可以任意组合各线程的执行顺序，并且带有全链路执行结果回调。是多线程编排一站式解决方案。</p><p>2.单机不支持分布式编排。</p><p><img src="/assets/d5f7f734baa74c05aa1213968bdfe8af.64dfeb00.png" alt="在这里插入图片描述"></p><ol><li>串行：A、B、C串行执行，可用的实现方式为：CompletableFuture.thenApply()、thenAccept() 和 thenRun() 都可以实现。</li><li>并行：A、B、C全并行执行，可用的实现方式为：CompletableFuture.allOf()</li><li>阻塞 - 先串行后并行：A执行完毕，B、C全并行执行。可用的实现方式为：CompletableFuture.runAsync()，阻塞get获取结果，再调用CompletableFuture.allOf()</li><li>阻塞 -先并行后串行：B、C全并行执行，执行完毕后，A执行。可用的实现方式为：CompletableFuture.allOf(futures…).then()</li></ol><p><strong>（2）执行顺序的强依赖和若依赖</strong>：如上图中的第④种场景，A依赖于B和C。分以下三种情况</p><ol><li>B、C全部执行完毕之后，才能执行A。可用的实现方式为：CompletableFuture.allOf(futures…).then()；或者runAfterBoth</li><li>B、C任意一个执行完后，就执行A。可用的实现方式为：CompletableFuture里有个anyOf(futures…).then()；或者runAfterEither</li><li>指定B或者C执行完后，就执行A。CompletableFuture不支持。</li></ol><p><strong>（3）并发场景可能存在的需求-每个执行结果的回调</strong></p><p>CompleteableFuture大家都用过，里面有supply、then、combine、allOf等等方法，都可以用来接收一个任务，最终将多个任务汇总成一个结果。</p><p>但有一个问题，你supply一个任务后，<strong>这个任务就黑盒了</strong>。如果你编排了很多个任务，每一个任务的执行情况，执行到哪一步了，每一步的执行结果情况，我们是不知道的。只能等它最终执行完毕后，最后汇总结果。</p><p>一个并行框架，它最好是对每一步的执行都能监控。每一步的执行结果，无论成功与失败，它应该有个<strong>回调</strong>，才算完整。拥有回调的任务，可以监控任务的执行状况，如果执行失败、超时，可以记录异常信息或者处理个性化的<strong>默认值</strong>。</p><p>CompleteableFuture中也有一些回调方法，例如：thenAccept()，whenComplete()，handle()，exceptionally()等，这些方法也能支持任务的回调，但是前提是任务执行了，才能完成回调。在某些场景中，有些任务单元是可能被SKIP跳过不执行的，不执行的任务也应该有回调。</p></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-ef5dee53><!--[--><!--]--><div class="edit-info" data-v-ef5dee53><!----><div class="last-updated" data-v-ef5dee53><p class="VPLastUpdated" data-v-ef5dee53 data-v-7e05ebdb>Last updated: <time datetime="2023-10-13T05:48:28.000Z" data-v-7e05ebdb></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"alg_algorithm_二分查找.md\":\"5daae138\",\"books_book0002_05演进-分布式服务_29-service mesh：如何屏蔽服务化系统的服务治理细节？.md\":\"95031c26\",\"alg_algorithm_复杂度.md\":\"8261d15f\",\"books_book0002_02演进-数据库_09-数据库优化方案（二）：写入数据量增加时，如何实现分库分表？.md\":\"18bd6529\",\"alg_structure_哈希表.md\":\"31ee2697\",\"books_book0002_00开篇_index.md\":\"bd860ba8\",\"books_book0002_06演进-维护_35-流量控制：高并发系统中我们如何操纵流量？.md\":\"b7bc10d8\",\"books_book0002_01基础_02-架构分层：我们为什么一定要这么做？.md\":\"68fea887\",\"books_book0002_03演进-缓存_15-缓存的使用姿势（三）：缓存穿透了怎么办？.md\":\"b4235165\",\"books_book0002_02演进-数据库_07-池化技术：如何减少频繁创建数据库连接的性能损耗？.md\":\"9bd7a64d\",\"books_book0002_02演进-数据库_10-发号器：如何保证分库分表后id的全局唯一性？.md\":\"89e17cad\",\"books_book0002_03演进-缓存_16-cdn：静态资源如何加速？.md\":\"1dfd8901\",\"books_book0002_05演进-分布式服务_23-rpc框架：10万qps下如何实现毫秒级的服务调用？.md\":\"7014f621\",\"books_book0002_05演进-分布式服务_22-微服务架构：微服务化后系统架构要如何改造？.md\":\"cbdf5050\",\"books_book0002_03演进-缓存_13-缓存的使用姿势（一）：如何选择缓存的读写策略？.md\":\"4b10b9a2\",\"books_book0002_06演进-维护_34-降级熔断：如何屏蔽非核心系统故障的影响？.md\":\"cb20466b\",\"books_book0002_02演进-数据库_08-数据库优化方案（一）：查询请求增加时，如何做主从分离？.md\":\"54d40457\",\"books_book0002_06演进-维护_32-压力测试：怎样设计全链路压力测试平台？.md\":\"e49818f2\",\"books_book0002_01基础_05-系统设计目标（三）：如何让系统易于扩展？.md\":\"11e2466b\",\"books_book0002_05演进-分布式服务_21-系统架构：每秒1万次请求的系统要做服务化拆分吗？.md\":\"2a72629a\",\"alg_algorithm_滑动窗口.md\":\"f23b7fce\",\"alg_algorithm_排序算法.md\":\"268d62ae\",\"cache_memcached.md\":\"4093dca1\",\"books_book0002_05演进-分布式服务_27-api网关：系统的门面要如何做呢？.md\":\"f2b1d784\",\"books_book0002_03演进-缓存_12-缓存：数据库成为瓶颈后，动态数据的查询要如何加速？.md\":\"cc6fbde1\",\"books_book0002_05演进-分布式服务_25-分布式trace：横跨几十个分布式组件的慢请求要如何排查？.md\":\"05519a66\",\"bigdata_path.md\":\"15a87540\",\"alg_structure_二叉树.md\":\"a07eeca0\",\"books_book0002_06演进-维护_30-给系统加上眼睛：服务端监控要怎么做？.md\":\"fb165392\",\"books_book0002_07实战_39-信息流设计（一）：通用信息流系统的推模式要如何做？.md\":\"7613f5ef\",\"books_book0002_04演进-消息队列_17-消息队列：秒杀如何处理每秒上万的下单请求？.md\":\"653b9831\",\"books_book0002_08结束_结束语-学不可以已.md\":\"e2d8c12a\",\"books_book0002_01基础_01-高并发系统：它的通用设计方法是什么？.md\":\"7b0fe2a2\",\"books_book0002_01基础_03-系统设计目标（一）：如何提升系统性能？.md\":\"828a371b\",\"alg_topic_剑指offer_index.md\":\"eaa28d56\",\"books_book0002_03演进-缓存_14-缓存的使用姿势（二）：缓存如何做到高可用？.md\":\"9690b5eb\",\"design_log.md\":\"b185df3e\",\"books_book0002_01基础_04-系统设计目标（二）：系统怎样做到高可用？.md\":\"14bcff24\",\"bigdata_layering.md\":\"dc637b1c\",\"container_k8s.md\":\"98437acd\",\"books_book0002_06演进-维护_31-应用性能管理：用户的使用体验应该如何监控？.md\":\"ed99301a\",\"books_book0002_04演进-消息队列_18-消息投递：如何保证消息仅仅被消费一次？.md\":\"2d4f0eb6\",\"books_book0002_02演进-数据库_11-nosql：在高并发场景下，数据库和nosql如何做到互补？.md\":\"62bf4f30\",\"alg_structure_队列与栈.md\":\"57bbdf01\",\"books_book0002_04演进-消息队列_20-当问到项目经历时，面试官究竟想要了解什么？.md\":\"e548f8e8\",\"design_orderbusiness.md\":\"8f1abf52\",\"database_mongodb.md\":\"1be1ec64\",\"books_book0002_05演进-分布式服务_24-注册中心：分布式系统如何寻址？.md\":\"6247e583\",\"books_book0002_03演进-缓存_加餐-数据的签约应该如何做？.md\":\"bc42e56f\",\"design_sso.md\":\"74776df0\",\"books_book0002_05演进-分布式服务_26-负载均衡：怎样提升系统的横向扩展能力？.md\":\"11cb1eb0\",\"alg_algorithm_动态规划.md\":\"b4f02bd3\",\"database_tidb.md\":\"268bc219\",\"design_electronicbusiness.md\":\"f4dd49fa\",\"design_skill.md\":\"d471477f\",\"books_book0002_04演进-消息队列_19-消息队列如何降低消息队列系统中消息的延迟？.md\":\"664abede\",\"books_book0002_07实战_38-计数系统设计（二）：50万qps下如何设计未读数系统？.md\":\"c4e51a03\",\"books_book0002_07实战_40-信息流设计（二）：通用信息流系统的拉模式要如何做？.md\":\"a41541be\",\"books_book0002_07实战_37-计数系统设计（一）：面对海量数据的计数器要如何做？.md\":\"40916437\",\"design_distributedtransaction.md\":\"ef95d62b\",\"container_linux.md\":\"145374a6\",\"design_mallbff.md\":\"5e8b0ff7\",\"books_book0002_06演进-维护_33-配置管理：成千上万的配置项要如何管理？.md\":\"362a8aa7\",\"books_book0002_05演进-分布式服务_28-多机房部署：跨地域的分布式系统如何做？.md\":\"6eaeeda8\",\"books_book0001_index.md\":\"aaaefa7e\",\"design_distributedid.md\":\"b932e6c8\",\"design_multicache.md\":\"7def197a\",\"design_index.md\":\"660f7902\",\"database_oracle.md\":\"df608eec\",\"books_book0003_index.md\":\"cd9614ff\",\"design_synces.md\":\"2a3fbc5f\",\"framework_springcloud.md\":\"479917ad\",\"index.md\":\"ca4aa61a\",\"middleware_search.md\":\"3efbf404\",\"design_graypublish.md\":\"84cd856e\",\"middleware_server.md\":\"1db3dc99\",\"second_alibaba_zookeeper.md\":\"b38fd1d6\",\"middleware_alibaba.md\":\"7aa2c009\",\"middleware_flow.md\":\"af4210cb\",\"second_cloud_springcloudgateway.md\":\"675f7192\",\"second_alibaba_nacos.md\":\"420a79cb\",\"cache_redis.md\":\"3fef8825\",\"second_alibaba_dubbo.md\":\"7064567c\",\"java_jvm2.md\":\"eaab6db9\",\"container_docker.md\":\"28326345\",\"alg_structure_数组与链表.md\":\"21b94db5\",\"problem_index.md\":\"b3c7c933\",\"second_alibaba_seata.md\":\"d872b52f\",\"middleware_db.md\":\"b37e1799\",\"problem_20230721q1.md\":\"78773fb9\",\"zeleted_standard_p3c.md\":\"c02fd853\",\"second_flow_compileflow.md\":\"ea54f4c8\",\"second_mq_kafka.md\":\"b6af4a2b\",\"middleware_task.md\":\"a3e7b941\",\"second_db_canal.md\":\"42df7fb0\",\"second_task_powerjob.md\":\"7279e649\",\"zeleted_test_charles.md\":\"567b4067\",\"problem_20230621q1.md\":\"120d174f\",\"database_postgresql.md\":\"80dc00d2\",\"zeleted_util_feilong.md\":\"4ac0997c\",\"java_reactive.md\":\"361e5ce1\",\"second_db_mybatisplus.md\":\"0159f364\",\"zeleted_test_jmh.md\":\"fe129a8a\",\"middleware_auth.md\":\"aba34a1d\",\"second_server_openresty.md\":\"70113c28\",\"second_search_elasticsearch.md\":\"c06fc2cf\",\"problem_20230519q1.md\":\"92959ef3\",\"second_cloud_hystrix.md\":\"66e272bf\",\"second_db_mybatis.md\":\"a921dc4e\",\"second_mq_rabbitmq.md\":\"bfff57ae\",\"updated_index.md\":\"019b263f\",\"second_db_shardingjdbc.md\":\"56a77200\",\"second_db_druid.md\":\"565155e6\",\"zeleted_test_apachejmeter.md\":\"af5b8efa\",\"zeleted_test_testablemock.md\":\"35199cd9\",\"java_jvm.md\":\"53b46b16\",\"zeleted_test_mockito.md\":\"b0291a0d\",\"second_cloud_springcloudstream.md\":\"27b35ae8\",\"middleware_mq.md\":\"368b57be\",\"second_flow_liteflow.md\":\"0a2139fe\",\"second_mq_pulsar.md\":\"ea7a7fb3\",\"optimize_index.md\":\"811002f7\",\"second_authority_oauth2.md\":\"a1af5a29\",\"second_cloud_openfeign.md\":\"eb5001b9\",\"zeleted_standard_sonarlint.md\":\"8455cf55\",\"second_server_nginx.md\":\"93af28d7\",\"second_alibaba_sentinel.md\":\"7fb764cf\",\"database_mysql.md\":\"77c74493\",\"zeleted_standard_ide.md\":\"675dc240\",\"framework_springboot.md\":\"a42b6c31\",\"zeleted_util_vavr.md\":\"f5d0420f\",\"second_task_xxljob.md\":\"21d42831\",\"zeleted_standard_mysql规范.md\":\"40692829\",\"java_feature.md\":\"74b48f43\",\"zeleted_standard_redis开发规范.md\":\"4bff1031\",\"zeleted_util_log.md\":\"10772815\",\"second_authority_satoken.md\":\"d18d5e57\",\"zeleted_standard_checkstyle.md\":\"cb78f461\",\"second_server_netty.md\":\"734d9475\",\"second_mq_rocketmq.md\":\"95153e7c\",\"java_index.md\":\"13e1531a\",\"utils_index.md\":\"7fde036e\",\"framework_spring.md\":\"35ad7748\",\"java_juc.md\":\"b0df85b0\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"某不知名小开发\",\"description\":\"在线文档\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"TheWe1\",\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"更新日志\",\"link\":\"/updated/index\"},{\"text\":\"大数据\",\"items\":[{\"text\":\"大数据学习路线\",\"link\":\"/bigdata/path\"},{\"text\":\"数仓分层设计架构\",\"link\":\"/bigdata/layering\"}]},{\"text\":\"算法\",\"items\":[{\"text\":\"数据结构\",\"link\":\"/alg/structure/数组与链表\"},{\"text\":\"Java算法\",\"link\":\"/alg/algorithm/复杂度\"},{\"text\":\"剑指Offer\",\"link\":\"/alg/topic/剑指Offer/index\"},{\"text\":\"LeetCode\",\"link\":\"https://www.baidu.com\"}]},{\"text\":\"经验\",\"items\":[{\"text\":\"生产问题排查\",\"link\":\"/problem/index\"},{\"text\":\"服务性能优化\",\"link\":\"/optimize/index\"},{\"text\":\"常用工具类库\",\"link\":\"/utils/index\"}]},{\"text\":\"文献\",\"items\":[{\"text\":\"如何设计一个秒杀系统\",\"link\":\"/books/book0001/index\"},{\"text\":\"高并发系统设计40问\",\"link\":\"/books/book0002/00开篇/index\"},{\"text\":\"DDD领域驱动设计\",\"link\":\"/books/book0003/index\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/liuxiaowei2018\"}],\"search\":{\"provider\":\"local\"},\"lastUpdated\":\"Last Updated\",\"smoothScroll\":true,\"sidebar\":{\"/java\":[{\"text\":\"JavaSe\",\"collapsible\":true,\"items\":[{\"text\":\"Java基础\",\"link\":\"/java/index\"},{\"text\":\"Java新特性\",\"link\":\"/java/feature\"},{\"text\":\"Java多线程\",\"link\":\"/java/juc\"},{\"text\":\"Java响应式编程\",\"link\":\"/java/reactive\"},{\"text\":\"Java虚拟机\",\"link\":\"/java/jvm\"},{\"text\":\"JVM调优\",\"link\":\"/java/jvm2\"}]}],\"/alg/structure\":[{\"text\":\"数据结构\",\"collapsible\":true,\"items\":[{\"text\":\"数组与链表\",\"link\":\"/alg/structure/数组与链表\"},{\"text\":\"队列与栈\",\"link\":\"/alg/structure/队列与栈\"},{\"text\":\"哈希表\",\"link\":\"/alg/structure/哈希表\"},{\"text\":\"二叉树\",\"link\":\"/alg/structure/二叉树\"}]}],\"/alg/algorithm\":[{\"text\":\"算法\",\"collapsible\":true,\"items\":[{\"text\":\"复杂度\",\"link\":\"/alg/algorithm/复杂度\"},{\"text\":\"排序算法\",\"link\":\"/alg/algorithm/排序算法\"},{\"text\":\"二分查找\",\"link\":\"/alg/algorithm/二分查找\"},{\"text\":\"滑动窗口\",\"link\":\"/alg/algorithm/滑动窗口\"},{\"text\":\"动态规划\",\"link\":\"/alg/algorithm/动态规划\"}]}],\"/framework\":[{\"text\":\"spring框架\",\"collapsible\":true,\"items\":[{\"text\":\"spring\",\"link\":\"/framework/spring\"},{\"text\":\"springBoot\",\"link\":\"/framework/springBoot\"},{\"text\":\"springCloud\",\"link\":\"/framework/springCloud\"}]}],\"/database\":[{\"text\":\"数据库\",\"collapsible\":true,\"items\":[{\"text\":\"mysql\",\"link\":\"/database/mysql\"},{\"text\":\"oracle\",\"link\":\"/database/oracle\"},{\"text\":\"postgreSQL\",\"link\":\"/database/postgreSQL\"},{\"text\":\"mongoDB\",\"link\":\"/database/mongoDB\"}]}],\"/cache\":[{\"text\":\"缓存\",\"collapsible\":true,\"items\":[{\"text\":\"redis\",\"link\":\"/cache/redis\"},{\"text\":\"memcached\",\"link\":\"/cache/memcached\"}]}],\"/middleware\":[{\"text\":\"中间件\",\"collapsible\":true,\"items\":[{\"text\":\"消息队列中间件\",\"link\":\"/middleware/mq\"},{\"text\":\"数据库中间件\",\"link\":\"/middleware/db\"},{\"text\":\"搜索中间件\",\"link\":\"/middleware/search\"},{\"text\":\"任务调度中间件\",\"link\":\"/middleware/task\"},{\"text\":\"工作流中间件\",\"link\":\"/middleware/flow\"},{\"text\":\"权限框架中间件\",\"link\":\"/middleware/auth\"},{\"text\":\"服务器中间件\",\"link\":\"/middleware/server\"},{\"text\":\"阿里中间件\",\"link\":\"/middleware/alibaba\"},{\"text\":\"工具类库\",\"link\":\"/middleware/utils\"}]}],\"/container\":[{\"text\":\"容器化技术\",\"collapsible\":true,\"items\":[{\"text\":\"linux\",\"link\":\"/container/linux\"},{\"text\":\"docker\",\"link\":\"/container/docker\"},{\"text\":\"k8s\",\"link\":\"/container/k8s\"}]}],\"/second/mq\":[{\"text\":\"消息中间件\",\"collapsible\":true,\"items\":[{\"text\":\"rabbitMQ\",\"link\":\"/second/mq/rabbitMQ\"},{\"text\":\"rocketMQ\",\"link\":\"/second/mq/rocketMQ\"},{\"text\":\"kafka\",\"link\":\"/second/mq/kafka\"},{\"text\":\"pluar\",\"link\":\"/second/mq/pulsar\"}]}],\"/second/db\":[{\"text\":\"数据库中间件\",\"collapsible\":true,\"items\":[{\"text\":\"mybatis\",\"link\":\"/second/db/mybatis\"},{\"text\":\"mybatisPlus\",\"link\":\"/second/db/mybatisPlus\"},{\"text\":\"druid\",\"link\":\"/second/db/druid\"},{\"text\":\"shardingJdbc\",\"link\":\"/second/db/shardingJdbc\"},{\"text\":\"canal\",\"link\":\"/second/db/canal\"}]}],\"/second/search\":[{\"text\":\"搜索中间件\",\"collapsible\":true,\"items\":[{\"text\":\"elasticsearch\",\"link\":\"/second/search/elasticsearch\"}]}],\"/second/task\":[{\"text\":\"任务调度中间件\",\"collapsible\":true,\"items\":[{\"text\":\"xxlJob\",\"link\":\"/second/task/xxlJob\"},{\"text\":\"powerJob\",\"link\":\"/second/task/powerJob\"}]}],\"/second/flow\":[{\"text\":\"工作流中间件\",\"collapsible\":true,\"items\":[{\"text\":\"compileflow\",\"link\":\"/second/flow/compileflow\"},{\"text\":\"liteflow\",\"link\":\"/second/flow/liteflow\"}]}],\"/second/server\":[{\"text\":\"服务器中间件\",\"collapsible\":true,\"items\":[{\"text\":\"nginx\",\"link\":\"/second/server/nginx\"},{\"text\":\"netty\",\"link\":\"/second/server/netty\"},{\"text\":\"openResty\",\"link\":\"/second/server/openresty\"}]}],\"/second/alibaba\":[{\"text\":\"阿里中间件\",\"collapsible\":true,\"items\":[{\"text\":\"dubbo\",\"link\":\"/second/alibaba/dubbo\"},{\"text\":\"nacos\",\"link\":\"/second/alibaba/nacos\"},{\"text\":\"seata\",\"link\":\"/second/alibaba/seata\"},{\"text\":\"sentinel\",\"link\":\"/second/alibaba/sentinel\"},{\"text\":\"zookeeper\",\"link\":\"/second/alibaba/zookeeper\"}]}],\"/second/cloud\":[{\"text\":\"SpringCloud\",\"collapsible\":true,\"items\":[{\"text\":\"springCloudOpenFeign\",\"link\":\"/second/cloud/openFeign\"},{\"text\":\"springCloudHystrix\",\"link\":\"/second/cloud/hystrix\"},{\"text\":\"springCloudGateway\",\"link\":\"/second/cloud/springCloudGateway\"},{\"text\":\"springCloudStream\",\"link\":\"/second/cloud/springCloudStream\"}]}],\"/second/authority\":[{\"text\":\"权限框架中间件\",\"collapsible\":true,\"items\":[{\"text\":\"oauth2\",\"link\":\"/second/authority/oauth2\"},{\"text\":\"saToken\",\"link\":\"/second/authority/saToken\"}]}],\"/design/\":[{\"text\":\"架构设计\",\"collapsible\":true,\"items\":[{\"text\":\"如何做好架构设计\",\"link\":\"/design/index\"},{\"text\":\"单点登录架构\",\"link\":\"/design/sso\"},{\"text\":\"多级缓存架构\",\"link\":\"/design/multiCache\"},{\"text\":\"灰度发布架构\",\"link\":\"/design/grayPublish\"},{\"text\":\"秒杀系统架构\",\"link\":\"/design/skill\"},{\"text\":\"日志系统架构\",\"link\":\"/design/log\"},{\"text\":\"电商业务架构\",\"link\":\"/design/electronicBusiness\"},{\"text\":\"订单系统架构\",\"link\":\"/design/orderBusiness\"},{\"text\":\"商城系统BFF演进架构\",\"link\":\"/design/mallBff\"},{\"text\":\"分布式ID架构\",\"link\":\"/design/distributedId\"},{\"text\":\"分布式事务架构\",\"link\":\"/design/distributedTransaction\"},{\"text\":\"ES数据同步架构\",\"link\":\"/design/syncEs\"}]}],\"/problem\":[{\"text\":\"生产问题排查\",\"collapsible\":true,\"items\":[{\"text\":\"如何排查线上问题\",\"link\":\"/problem/index\"},{\"text\":\"服务器端口不通故障解决\",\"link\":\"/problem/20230519q1\"},{\"text\":\"k8s pod反复重启问题解决\",\"link\":\"/problem/20230621q1\"},{\"text\":\"k8s pod OMM问题修复\",\"link\":\"/problem/20230721q1\"}]}],\"/books/book0001\":[{\"text\":\"如何设计一个秒杀系统\",\"collapsible\":true,\"items\":[{\"text\":\"如何设计一个秒杀系统-许令波\",\"link\":\"/books/book0001/index\"}]}],\"/books/book0002\":[{\"text\":\"开篇\",\"collapsible\":true,\"items\":[{\"text\":\"00-开篇词-为什么你要学习高并发系统设计？\",\"link\":\"/books/book0002/00开篇/index\"}]},{\"text\":\"基础\",\"collapsible\":true,\"items\":[{\"text\":\"01-高并发系统：它的通用设计方法是什么？\",\"link\":\"/books/book0002/01基础/01-高并发系统：它的通用设计方法是什么？\"},{\"text\":\"02-架构分层：我们为什么一定要这么做？\",\"link\":\"/books/book0002/01基础/02-架构分层：我们为什么一定要这么做？\"},{\"text\":\"03-系统设计目标（一）：如何提升系统性能？\",\"link\":\"/books/book0002/01基础/03-系统设计目标（一）：如何提升系统性能？\"},{\"text\":\"04-系统设计目标（二）：系统怎样做到高可用？\",\"link\":\"/books/book0002/01基础/04-系统设计目标（二）：系统怎样做到高可用？\"},{\"text\":\"05-系统设计目标（三）：如何让系统易于扩展？\",\"link\":\"/books/book0002/01基础/05-系统设计目标（三）：如何让系统易于扩展？\"}]},{\"text\":\"演进 - 数据库篇\",\"collapsible\":true,\"items\":[{\"text\":\"07-池化技术：如何减少频繁创建数据库连接的性能损耗？\",\"link\":\"/books/book0002/02演进-数据库/07-池化技术：如何减少频繁创建数据库连接的性能损耗？\"},{\"text\":\"08-数据库优化方案（一）：查询请求增加时，如何做主从分离？\",\"link\":\"/books/book0002/02演进-数据库/08-数据库优化方案（一）：查询请求增加时，如何做主从分离？\"},{\"text\":\"09-数据库优化方案（二）：写入数据量增加时，如何实现分库分表？\",\"link\":\"/books/book0002/02演进-数据库/09-数据库优化方案（二）：写入数据量增加时，如何实现分库分表？\"},{\"text\":\"10-发号器：如何保证分库分表后ID的全局唯一性？\",\"link\":\"/books/book0002/02演进-数据库/10-发号器：如何保证分库分表后ID的全局唯一性？\"},{\"text\":\"11-NoSQL：在高并发场景下，数据库和NoSQL如何做到互补？\",\"link\":\"/books/book0002/02演进-数据库/11-NoSQL：在高并发场景下，数据库和NoSQL如何做到互补？\"}]},{\"text\":\"演进 - 缓存篇\",\"collapsible\":true,\"items\":[{\"text\":\"12-缓存：数据库成为瓶颈后，动态数据的查询要如何加速？\",\"link\":\"/books/book0002/03演进-缓存/12-缓存：数据库成为瓶颈后，动态数据的查询要如何加速？\"},{\"text\":\"13-缓存的使用姿势（一）：如何选择缓存的读写策略？\",\"link\":\"/books/book0002/03演进-缓存/13-缓存的使用姿势（一）：如何选择缓存的读写策略？\"},{\"text\":\"14-缓存的使用姿势（二）：缓存如何做到高可用？\",\"link\":\"/books/book0002/03演进-缓存/14-缓存的使用姿势（二）：缓存如何做到高可用？\"},{\"text\":\"15-缓存的使用姿势（三）：缓存穿透了怎么办？\",\"link\":\"/books/book0002/03演进-缓存/15-缓存的使用姿势（三）：缓存穿透了怎么办？\"},{\"text\":\"加餐-数据的签约应该如何做？\",\"link\":\"/books/book0002/03演进-缓存/加餐-数据的签约应该如何做？\"}]},{\"text\":\"演进 - 消息队列篇\",\"collapsible\":true,\"items\":[{\"text\":\"17-消息队列：秒杀如何处理每秒上万的下单请求？\",\"link\":\"/books/book0002/04演进-消息队列/17-消息队列：秒杀如何处理每秒上万的下单请求？\"},{\"text\":\"18-消息投递：如何保证消息仅仅被消费一次？\",\"link\":\"/books/book0002/04演进-消息队列/18-消息投递：如何保证消息仅仅被消费一次？\"},{\"text\":\"19-消息队列如何降低消息队列系统中消息的延迟？\",\"link\":\"/books/book0002/04演进-消息队列/19-消息队列如何降低消息队列系统中消息的延迟？\"},{\"text\":\"20-当问到项目经历时，面试官究竟想要了解什么？\",\"link\":\"/books/book0002/04演进-消息队列/20-当问到项目经历时，面试官究竟想要了解什么？\"}]},{\"text\":\"演进 - 分布式服务\",\"collapsible\":true,\"items\":[{\"text\":\"21-系统架构：每秒1万次请求的系统要做服务化拆分吗？\",\"link\":\"/books/book0002/05演进-分布式服务/21-系统架构：每秒1万次请求的系统要做服务化拆分吗？\"},{\"text\":\"22-微服务架构：微服务化后系统架构要如何改造？\",\"link\":\"/books/book0002/05演进-分布式服务/22-微服务架构：微服务化后系统架构要如何改造？\"},{\"text\":\"23-系统架构：每秒1万次请求的系统要做服务化拆分吗？\",\"link\":\"/books/book0002/05演进-分布式服务/23-RPC框架：10万QPS下如何实现毫秒级的服务调用？\"},{\"text\":\"24-注册中心：分布式系统如何寻址？\",\"link\":\"/books/book0002/05演进-分布式服务/24-注册中心：分布式系统如何寻址？\"},{\"text\":\"25-分布式Trace：横跨几十个分布式组件的慢请求要如何排查？\",\"link\":\"/books/book0002/05演进-分布式服务/25-分布式Trace：横跨几十个分布式组件的慢请求要如何排查？\"},{\"text\":\"26-负载均衡：怎样提升系统的横向扩展能力？\",\"link\":\"/books/book0002/05演进-分布式服务/26-负载均衡：怎样提升系统的横向扩展能力？\"},{\"text\":\"27-API网关：系统的门面要如何做呢？\",\"link\":\"/books/book0002/05演进-分布式服务/27-API网关：系统的门面要如何做呢？\"},{\"text\":\"28-多机房部署：跨地域的分布式系统如何做？\",\"link\":\"/books/book0002/05演进-分布式服务/28-多机房部署：跨地域的分布式系统如何做？\"},{\"text\":\"29-Service Mesh：如何屏蔽服务化系统的服务治理细节？\",\"link\":\"/books/book0002/05演进-分布式服务/29-Service Mesh：如何屏蔽服务化系统的服务治理细节？\"}]},{\"text\":\"演进 - 维护\",\"collapsible\":true,\"items\":[{\"text\":\"30-为什么你要学习高并发系统设计？\",\"link\":\"/books/book0002/06演进-维护/30-给系统加上眼睛：服务端监控要怎么做？\"},{\"text\":\"31-应用性能管理：用户的使用体验应该如何监控？\",\"link\":\"/books/book0002/06演进-维护/31-应用性能管理：用户的使用体验应该如何监控？\"},{\"text\":\"32-压力测试：怎样设计全链路压力测试平台？\",\"link\":\"/books/book0002/06演进-维护/32-压力测试：怎样设计全链路压力测试平台？\"},{\"text\":\"33-配置管理：成千上万的配置项要如何管理？\",\"link\":\"/books/book0002/06演进-维护/33-配置管理：成千上万的配置项要如何管理？\"},{\"text\":\"34-降级熔断：如何屏蔽非核心系统故障的影响？\",\"link\":\"/books/book0002/06演进-维护/34-降级熔断：如何屏蔽非核心系统故障的影响？\"},{\"text\":\"35-流量控制：高并发系统中我们如何操纵流量？\",\"link\":\"/books/book0002/06演进-维护/35-流量控制：高并发系统中我们如何操纵流量？\"}]},{\"text\":\"实战\",\"collapsible\":true,\"items\":[{\"text\":\"37-计数系统设计（一）：面对海量数据的计数器要如何做？\",\"link\":\"/books/book0002/07实战/37-计数系统设计（一）：面对海量数据的计数器要如何做？\"},{\"text\":\"38-计数系统设计（二）：50万QPS下如何设计未读数系统？\",\"link\":\"/books/book0002/07实战/38-计数系统设计（二）：50万QPS下如何设计未读数系统？\"},{\"text\":\"39-信息流设计（一）：通用信息流系统的推模式要如何做？\",\"link\":\"/books/book0002/07实战/39-信息流设计（一）：通用信息流系统的推模式要如何做？\"},{\"text\":\"40-信息流设计（二）：通用信息流系统的拉模式要如何做？\",\"link\":\"/books/book0002/07实战/40-信息流设计（二）：通用信息流系统的拉模式要如何做？\"}]},{\"text\":\"结束\",\"collapsible\":true,\"items\":[{\"text\":\"结束语-学不可以已\",\"link\":\"/books/book0002/08结束/结束语-学不可以已\"}]}],\"/books/book0003\":[{\"text\":\"DDD领域驱动设计\",\"collapsible\":true,\"items\":[{\"text\":\"DDD入门&实践\",\"link\":\"/books/book0003/index\"}]}]}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>