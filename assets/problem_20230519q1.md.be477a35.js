import{_ as s,c as a,o as e,N as l}from"./chunks/framework.0799945b.js";const p="/assets/image-20221202194109308.da6eeb2f.png",o="/assets/image-20221202194227091.d8370bc3.png",t="/assets/image-20221202194238263.16267c8e.png",n="/assets/image-20221202194337472.dec7699e.png",c="/assets/image-20221202194405734.6d8415ad.png",r="/assets/image-20221202194559701.7e58d406.png",D=JSON.parse('{"title":"生产问题排查&复盘","description":"","frontmatter":{},"headers":[],"relativePath":"problem/20230519q1.md"}'),i={name:"problem/20230519q1.md"},d=l('<h1 id="生产问题排查-复盘" tabindex="-1">生产问题排查&amp;复盘 <a class="header-anchor" href="#生产问题排查-复盘" aria-label="Permalink to &quot;生产问题排查&amp;复盘&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#服务器配置错误导致端口不通问题">服务器配置错误导致端口不通问题</a><ul><li><a href="#问题描述">问题描述</a></li><li><a href="#问题定位">问题定位</a></li><li><a href="#解决方案">解决方案</a></li></ul></li></ul></nav><h2 id="服务器配置错误导致端口不通问题" tabindex="-1">服务器配置错误导致端口不通问题 <a class="header-anchor" href="#服务器配置错误导致端口不通问题" aria-label="Permalink to &quot;服务器配置错误导致端口不通问题&quot;">​</a></h2><ul><li>[20230519] 伟酱</li></ul><h3 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h3><blockquote><p>1.服务器可以ping 百度</p><p>2.外网不能访问 服务器资源</p><p>3.防火墙是关的,端口安全组是开的</p><p>4.内部服务是以docker形式部署</p></blockquote><h3 id="问题定位" tabindex="-1">问题定位 <a class="header-anchor" href="#问题定位" aria-label="Permalink to &quot;问题定位&quot;">​</a></h3><p>0.外部服务访问(80端口为过滤状态,猜测有东西拦截)</p><p><img src="'+p+'" alt="image-20221202194109308"></p><p>1.本机查看服务器端口(又发现是正常的)</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">netstat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-tunlp</span></span></code></pre></div><p><img src="'+o+'" alt="image-20221202194227091"></p><p><img src="'+t+'" alt="image-20221202194238263"></p><p>2.查看服务器端口规则(都是正常的)</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">iptables</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span></span></code></pre></div><p><img src="'+n+'" alt="image-20221202194337472"></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">iptables</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-I</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INPUT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tcp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--dport</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-j</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ACCEPT</span></span></code></pre></div><p><img src="'+c+'" alt="image-20221202194405734"></p><p>3.查看linux是否开启内网转发</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/sysctl.conf</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">forward</span></span></code></pre></div><p><img src="'+r+'" alt="image-20221202194559701"></p><blockquote><p>找到问题了 !</p></blockquote><p><code>服务器配置错误</code></p><h3 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h3><blockquote><p>vim /etc/sysctl.conf 将参数改为1 sysctl -p刷新配置 搞定</p></blockquote>',25),C=[d];function h(m,g,y,u,_,A){return e(),a("div",null,C)}const f=s(i,[["render",h]]);export{D as __pageData,f as default};
