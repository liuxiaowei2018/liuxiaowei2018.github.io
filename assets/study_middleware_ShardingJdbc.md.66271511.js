import{_ as l,c as e,o,a as n,b as s,d as a}from"./app.1af635ee.js";const g=JSON.parse('{"title":"Sharding-JDBC","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u5206\u7247\u89C4\u5219\u914D\u7F6E","slug":"\u5206\u7247\u89C4\u5219\u914D\u7F6E","link":"#\u5206\u7247\u89C4\u5219\u914D\u7F6E","children":[]},{"level":2,"title":"\u6D41\u7A0B\u5206\u6790","slug":"\u6D41\u7A0B\u5206\u6790","link":"#\u6D41\u7A0B\u5206\u6790","children":[]},{"level":2,"title":"\u6267\u884C\u539F\u7406","slug":"\u6267\u884C\u539F\u7406","link":"#\u6267\u884C\u539F\u7406","children":[]},{"level":2,"title":"SQL\u89E3\u6790","slug":"sql\u89E3\u6790","link":"#sql\u89E3\u6790","children":[]},{"level":2,"title":"\u914D\u7F6E\u6587\u4EF6","slug":"\u914D\u7F6E\u6587\u4EF6","link":"#\u914D\u7F6E\u6587\u4EF6","children":[]}],"relativePath":"study/middleware/ShardingJdbc.md"}'),p={name:"study/middleware/ShardingJdbc.md"},r=n(`<h1 id="sharding-jdbc" tabindex="-1">Sharding-JDBC <a class="header-anchor" href="#sharding-jdbc" aria-hidden="true">#</a></h1><blockquote><p>pom.xml</p><div class="language-xml"><button class="copy"></button><span class="lang">xml</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.apache.shardingsphere</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">sharding\u2010jdbc\u2010spring\u2010boot\u2010starter</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">4.1.1</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div></blockquote><h2 id="\u5206\u7247\u89C4\u5219\u914D\u7F6E" tabindex="-1">\u5206\u7247\u89C4\u5219\u914D\u7F6E <a class="header-anchor" href="#\u5206\u7247\u89C4\u5219\u914D\u7F6E" aria-hidden="true">#</a></h2>`,3),t=s("blockquote",null,[s("blockquote",null,[s("div",{class:"language-json"},[s("button",{class:"copy"}),s("span",{class:"lang"},"json"),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u5206\u7247\u89C4\u5219\u914D\u7F6E\u662Fsharding-jdbc\u8FDB\u884C\u5BF9\u5206\u5E93\u5206\u8868\u64CD\u4F5C\u7684\u91CD\u8981\u4F9D\u636E\uFF0C\u914D\u7F6E\u5185\u5BB9\u5305\u62EC\uFF1A\u6570\u636E\u6E90\u3001\u4E3B\u952E\u751F\u6210\u7B56\u7565\u3001\u5206\u7247\u7B56\u7565\u7B49")]),a(`
`),s("span",{class:"line"})])])])]),s("blockquote",null,[s("div",{class:"language-yaml"},[s("button",{class:"copy"}),s("span",{class:"lang"},"yaml"),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"server"),s("span",{style:{color:"#89DDFF"}},":")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"port"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"15656")]),a(`
`),s("span",{class:"line"})])])])]),s("blockquote",null,[s("p",null,"spring: main: allow-bean-definition-overriding: true application: name: test-service datasource: druid: url: jdbc:mysql://81.68.218.181:3306/test?useUnicode=true&characterEncoding=UTF-8&useSSL=true&serverTimezone=GMT%2B8 driver-class-name: com.mysql.cj.jdbc.Driver username: root password: lxw123456")]),s("blockquote",{order_id:"","%":"",2:"","+":"",1:""},[s("p",null,"shardingsphere: datasource: names: m1 m1: type: com.alibaba.druid.pool.DruidDataSource url: jdbc:mysql://81.68.218.181:3306/shardingjdbc_order_db?useUnicode=true&characterEncoding=UTF-8&useSSL=true&serverTimezone=GMT%2B8 driver-class-name: com.mysql.cj.jdbc.Driver username: root password: lxw123456 initial\u2010size: 5 #\u521D\u59CB\u7269\u7406\u8FDE\u63A5\u6570 min\u2010idle: 5 #\u6700\u5C0F\u8FDE\u63A5\u6C60\u6570\u91CF max\u2010active: 20 #\u6700\u5927\u8FDE\u63A5\u6C60\u6570\u91CF max\u2010wait: 60000 #\u83B7\u53D6\u8FDE\u63A5\u65F6\u6700\u5927\u7B49\u5F85\u65F6\u95F4\uFF0C\u5355\u4F4D\u6BEB\u79D2 min\u2010evictable\u2010idle\u2010time\u2010millis: 300000 #\u8FDE\u63A5\u4FDD\u6301\u7A7A\u95F2\u800C\u4E0D\u88AB\u9A71\u9010\u7684\u6700\u5C0F\u65F6\u95F4 validation\u2010query: SELECT 1 FROM DUAL #\u7528\u6765\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548\u7684sql test\u2010while\u2010idle: true #\u7533\u8BF7\u8FDE\u63A5\u7684\u65F6\u5019\u68C0\u6D4B pool\u2010prepared\u2010statements: false #\u662F\u5426\u7F13\u5B58PSCache\u3002PSCache\u5BF9\u652F\u6301\u6E38\u6807\u7684\u6570\u636E\u5E93\u6027\u80FD\u63D0\u5347\u5DE8\u5927\uFF0C\u6BD4\u5982\u8BF4oracle\u3002\u5728mysql\u4E0B\u5EFA\u8BAE\u5173\u95ED\u3002 connection\u2010properties: druid.stat.mergeSql:true;druid.stat.slowSqlMillis:5000 #\u6253\u5F00sql\u5408\u5E76\u548C\u6162sql\u8BB0\u5F55 sharding: tables: # \u6307\u5B9At_order\u8868\u7684\u6570\u636E\u5206\u5E03\u60C5\u51B5\uFF0C\u914D\u7F6E\u6570\u636E\u8282\u70B9 t_order: actual\u2010data\u2010nodes: m1.t_order_$->{1..2} key\u2010generator: # \u6307\u5B9At_order\u8868\u7684\u4E3B\u952E\u751F\u6210\u7B56\u7565\u4E3ASNOWFLAKE column: order_id type: SNOWFLAKE table\u2010strategy: # \u6307\u5B9At_order\u8868\u7684\u5206\u7247\u7B56\u7565\uFF0C\u5206\u7247\u7B56\u7565\u5305\u62EC\u5206\u7247\u952E\u548C\u5206\u7247\u7B97\u6CD5 inline: sharding\u2010column: order_id algorithm\u2010expression: t_order_$->")]),s("blockquote",null,[s("p",null,"logging: level: root: info")]),s("blockquote",null,[s("p",null,"mybatis-plus: mapper-locations: classpath:/mapper/*Mapper.xml")]),s("blockquote",null,[s("div",{class:"language-json"},[s("button",{class:"copy"}),s("span",{class:"lang"},"json"),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#  "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}},".\u9996\u5148\u5B9A\u4E49\u6570\u636E\u6E90m"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}},"\uFF0C\u5E76\u5BF9m"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}},"\u8FDB\u884C\u5B9E\u9645\u7684\u53C2\u6570\u914D\u7F6E\u3002")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#  "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#A6ACCD"}},".\u6307\u5B9At_order\u8868\u7684\u6570\u636E\u5206\u5E03\u60C5\u51B5\uFF0C\u4ED6\u5206\u5E03\u5728m"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}},".t_order_"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}},"\uFF0Cm"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}},".t_order_"),s("span",{style:{color:"#F78C6C"}},"2")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#  "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#A6ACCD"}},".\u6307\u5B9At_order\u8868\u7684\u4E3B\u952E\u751F\u6210\u7B56\u7565\u4E3ASNOWFLAKE\uFF0CSNOWFLAKE\u662F\u4E00\u79CD\u5206\u5E03\u5F0F\u81EA\u589E\u7B97\u6CD5\uFF0C\u4FDD\u8BC1id\u5168\u5C40\u552F\u4E00")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#  "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#A6ACCD"}},".\u5B9A\u4E49t_order\u5206\u7247\u7B56\u7565\uFF0Corder_id\u4E3A\u5076\u6570\u7684\u6570\u636E\u843D\u5728t_order_"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}},"\uFF0C\u4E3A\u5947\u6570\u7684\u843D\u5728t_order_"),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#A6ACCD"}},"\uFF0C\u5206\u8868\u7B56\u7565\u7684\u8868\u8FBE\u5F0F\u4E3A t_order_$->"),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#A6ACCD"}},"order_id % 2 + 1"),s("span",{style:{color:"#89DDFF"}},"}")]),a(`
`),s("span",{class:"line"})])])])])],-1),c=n(`<h2 id="\u6D41\u7A0B\u5206\u6790" tabindex="-1">\u6D41\u7A0B\u5206\u6790 <a class="header-anchor" href="#\u6D41\u7A0B\u5206\u6790" aria-hidden="true">#</a></h2><blockquote><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#A6ACCD;">\u901A\u8FC7\u65E5\u5FD7\u5206\u6790\uFF0CSharding-JDBC\u5728\u62FF\u5230\u7528\u6237\u8981\u6267\u884C\u7684sql\u4E4B\u540E\u5E72\u4E86\u54EA\u4E9B\u4E8B\u513F\uFF1A</span></span>
<span class="line"><span style="color:#A6ACCD;">\uFF08</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">\uFF09\u89E3\u6790sql\uFF0C\u83B7\u53D6\u7247\u952E\u503C\uFF0C\u5728\u672C\u4F8B\u4E2D\u662Forder_id</span></span>
<span class="line"><span style="color:#A6ACCD;">\uFF08</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">\uFF09Sharding-JDBC\u901A\u8FC7\u89C4\u5219\u914D\u7F6E t_order_$-&gt;</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">order_id % 2 + 1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">\uFF0C</span></span>
<span class="line"><span style="color:#A6ACCD;">	\u5F53order_id\u4E3A\u5076\u6570\u65F6\uFF0C\u5E94\u8BE5\u5F80t_order_</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">\u8868\u63D2\u6570\u636E\uFF0C\u4E3A\u5947\u6570\u65F6\uFF0C\u5F80t_order_</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">\u63D2\u6570\u636E\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">\uFF08</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">\uFF09\u4E8E\u662FSharding-JDBC\u6839\u636Eorder_id\u7684\u503C\u6539\u5199sql\u8BED\u53E5\uFF0C\u6539\u5199\u540E\u7684SQL\u8BED\u53E5\u662F\u771F\u5B9E\u6240\u8981\u6267\u884C\u7684SQL\u8BED\u53E5\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">\uFF08</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">\uFF09\u6267\u884C\u6539\u5199\u540E\u7684\u771F\u5B9Esql\u8BED\u53E5</span></span>
<span class="line"><span style="color:#A6ACCD;">\uFF08</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">\uFF09\u5C06\u6240\u6709\u771F\u6B63\u6267\u884Csql\u7684\u7ED3\u679C\u8FDB\u884C\u6C47\u603B\u5408\u5E76\uFF0C\u8FD4\u56DE\u3002</span></span>
<span class="line"></span></code></pre></div></blockquote><h2 id="\u6267\u884C\u539F\u7406" tabindex="-1">\u6267\u884C\u539F\u7406 <a class="header-anchor" href="#\u6267\u884C\u539F\u7406" aria-hidden="true">#</a></h2><blockquote><h5 id="\u903B\u8F91\u8868-\u6C34\u5E73\u62C6\u5206\u7684\u6570\u636E\u8868\u7684\u603B\u79F0\u3002" tabindex="-1">\u903B\u8F91\u8868: \u6C34\u5E73\u62C6\u5206\u7684\u6570\u636E\u8868\u7684\u603B\u79F0\u3002 <a class="header-anchor" href="#\u903B\u8F91\u8868-\u6C34\u5E73\u62C6\u5206\u7684\u6570\u636E\u8868\u7684\u603B\u79F0\u3002" aria-hidden="true">#</a></h5><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#A6ACCD;">\u4F8B\uFF1A\u8BA2\u5355\u6570\u636E\u8868\u6839\u636E\u4E3B\u952E\u5C3E\u6570\u62C6\u5206\u4E3A</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">\u5F20\u8868\uFF0C\u5206\u522B\u662F t_order_</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> \u3001 t_order_</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> \u5230t_order_</span><span style="color:#F78C6C;">9</span><span style="color:#A6ACCD;"> \uFF0C\u4ED6\u4EEC\u7684\u903B\u8F91\u8868\u540D\u4E3A t_order</span></span>
<span class="line"></span></code></pre></div><h5 id="\u771F\u5B9E\u8868-\u5728\u5206\u7247\u7684\u6570\u636E\u5E93\u4E2D\u771F\u5B9E\u5B58\u5728\u7684\u7269\u7406\u8868" tabindex="-1">\u771F\u5B9E\u8868: \u5728\u5206\u7247\u7684\u6570\u636E\u5E93\u4E2D\u771F\u5B9E\u5B58\u5728\u7684\u7269\u7406\u8868 <a class="header-anchor" href="#\u771F\u5B9E\u8868-\u5728\u5206\u7247\u7684\u6570\u636E\u5E93\u4E2D\u771F\u5B9E\u5B58\u5728\u7684\u7269\u7406\u8868" aria-hidden="true">#</a></h5><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#A6ACCD;">\u4F8B\uFF1A\u4E0A\u4E2A\u793A\u4F8B\u4E2D\u7684 t_order_</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> \u5230 t_order_</span><span style="color:#F78C6C;">9</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><h5 id="\u6570\u636E\u8282\u70B9" tabindex="-1">\u6570\u636E\u8282\u70B9 <a class="header-anchor" href="#\u6570\u636E\u8282\u70B9" aria-hidden="true">#</a></h5><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#A6ACCD;">\u6570\u636E\u5206\u7247\u7684\u6700\u5C0F\u7269\u7406\u5355\u5143\u3002\u7531\u6570\u636E\u6E90\u540D\u79F0\u548C\u6570\u636E\u8868\u7EC4\u6210\uFF0C\u4F8B\uFF1A ds_</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.t_order_</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><h5 id="\u7ED1\u5B9A\u8868" tabindex="-1">\u7ED1\u5B9A\u8868 <a class="header-anchor" href="#\u7ED1\u5B9A\u8868" aria-hidden="true">#</a></h5><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#A6ACCD;">\u6307\u5206\u7247\u89C4\u5219\u4E00\u81F4\u7684\u4E3B\u8868\u548C\u5B50\u8868\u3002</span></span>
<span class="line"></span></code></pre></div><p>...</p></blockquote><h2 id="sql\u89E3\u6790" tabindex="-1">SQL\u89E3\u6790 <a class="header-anchor" href="#sql\u89E3\u6790" aria-hidden="true">#</a></h2><blockquote><p>\u5F53Sharding-JDBC\u63A5\u53D7\u5230\u4E00\u6761SQL\u8BED\u53E5\u65F6\uFF0C\u4F1A\u9646\u7EED\u6267\u884C SQL\u89E3\u6790 =&gt; \u67E5\u8BE2\u4F18\u5316 =&gt; SQL\u8DEF\u7531 =&gt; SQL\u6539\u5199 =&gt; SQL\u6267\u884C=&gt; \u7ED3\u679C\u5F52\u5E76 \uFF0C\u6700\u7EC8\u8FD4\u56DE\u6267\u884C\u7ED3\u679C</p><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#A6ACCD;">SQL\u89E3\u6790\u8FC7\u7A0B\u5206\u4E3A\u8BCD\u6CD5\u89E3\u6790\u548C\u8BED\u6CD5\u89E3\u6790\u3002 \u8BCD\u6CD5\u89E3\u6790\u5668\u7528\u4E8E\u5C06SQL\u62C6\u89E3\u4E3A\u4E0D\u53EF\u518D\u5206\u7684\u539F\u5B50\u7B26\u53F7\uFF0C\u79F0\u4E3AToken\u3002\u5E76\u6839\u636E\u4E0D\u540C\u6570\u636E\u5E93\u65B9\u8A00\u6240\u63D0\u4F9B\u7684\u5B57\u5178\uFF0C\u5C06\u5176\u5F52\u7C7B\u4E3A\u5173\u952E\u5B57\uFF0C\u8868\u8FBE\u5F0F\uFF0C\u5B57\u9762\u91CF\u548C\u64CD\u4F5C\u7B26\u3002 \u518D\u4F7F\u7528\u8BED\u6CD5\u89E3\u6790\u5668\u5C06SQL\u8F6C\u6362\u4E3A\u62BD\u8C61\u8BED\u6CD5\u6811</span></span>
<span class="line"></span></code></pre></div><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#A6ACCD;">\u4F9B\u5206\u7247\u4F7F\u7528\u7684\u89E3\u6790\u4E0A\u4E0B\u6587\u5305\u542B\u67E5\u8BE2\u9009\u62E9\u9879\uFF08Select Items\uFF09\u3001\u8868\u4FE1\u606F\uFF08Table\uFF09\u3001\u5206\u7247\u6761\u4EF6\uFF08Sharding Condition\uFF09\u3001</span></span>
<span class="line"><span style="color:#A6ACCD;">\u81EA\u589E\u4E3B\u952E\u4FE1\u606F\uFF08Auto increment Primary Key\uFF09\u3001\u6392\u5E8F\u4FE1\u606F\uFF08Order By\uFF09\u3001\u5206\u7EC4\u4FE1\u606F\uFF08Group By\uFF09\u4EE5\u53CA\u5206\u9875\u4FE1\u606F\uFF08Limit\u3001Rownum\u3001Top\uFF09</span></span>
<span class="line"></span></code></pre></div><p>...</p></blockquote><h2 id="\u914D\u7F6E\u6587\u4EF6" tabindex="-1">\u914D\u7F6E\u6587\u4EF6 <a class="header-anchor" href="#\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a></h2><blockquote><div class="language-yaml"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#676E95;">#  shardingsphere:</span></span>
<span class="line"><span style="color:#676E95;">#    datasource:</span></span>
<span class="line"><span style="color:#676E95;">#      names: m1</span></span>
<span class="line"><span style="color:#676E95;">#      m1:</span></span>
<span class="line"><span style="color:#676E95;">#        type: com.alibaba.druid.pool.DruidDataSource</span></span>
<span class="line"><span style="color:#676E95;">#        url: jdbc:mysql://81.68.218.181:3306/shardingjdbc_order_db?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span></span>
<span class="line"><span style="color:#676E95;">#        driver-class-name: com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="color:#676E95;">#        username: root</span></span>
<span class="line"><span style="color:#676E95;">#        password: lxw123456</span></span>
<span class="line"><span style="color:#676E95;">#        initial\u2010size: 5 #\u521D\u59CB\u7269\u7406\u8FDE\u63A5\u6570</span></span>
<span class="line"><span style="color:#676E95;">#        min\u2010idle: 5 #\u6700\u5C0F\u8FDE\u63A5\u6C60\u6570\u91CF</span></span>
<span class="line"><span style="color:#676E95;">#        max\u2010active: 20 #\u6700\u5927\u8FDE\u63A5\u6C60\u6570\u91CF</span></span>
<span class="line"><span style="color:#676E95;">#        max\u2010wait: 60000 #\u83B7\u53D6\u8FDE\u63A5\u65F6\u6700\u5927\u7B49\u5F85\u65F6\u95F4\uFF0C\u5355\u4F4D\u6BEB\u79D2</span></span>
<span class="line"><span style="color:#676E95;">#        min\u2010evictable\u2010idle\u2010time\u2010millis: 300000 #\u8FDE\u63A5\u4FDD\u6301\u7A7A\u95F2\u800C\u4E0D\u88AB\u9A71\u9010\u7684\u6700\u5C0F\u65F6\u95F4</span></span>
<span class="line"><span style="color:#676E95;">#        validation\u2010query: SELECT 1 FROM DUAL #\u7528\u6765\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548\u7684sql</span></span>
<span class="line"><span style="color:#676E95;">#        test\u2010while\u2010idle: true #\u7533\u8BF7\u8FDE\u63A5\u7684\u65F6\u5019\u68C0\u6D4B</span></span>
<span class="line"><span style="color:#676E95;">#        pool\u2010prepared\u2010statements: false #\u662F\u5426\u7F13\u5B58preparedStatement\uFF0C\u4E5F\u5C31\u662FPSCache\u3002PSCache\u5BF9\u652F\u6301\u6E38\u6807\u7684\u6570\u636E\u5E93\u6027\u80FD\u63D0\u5347\u5DE8\u5927\uFF0C\u6BD4\u5982\u8BF4oracle\u3002\u5728mysql\u4E0B\u5EFA\u8BAE\u5173\u95ED\u3002</span></span>
<span class="line"><span style="color:#676E95;">#        connection\u2010properties: druid.stat.mergeSql:true;druid.stat.slowSqlMillis:5000 #\u6253\u5F00sql\u5408\u5E76\u548C\u6162sql\u8BB0\u5F55</span></span>
<span class="line"><span style="color:#676E95;">#    sharding:</span></span>
<span class="line"><span style="color:#676E95;">#      tables: # \u6307\u5B9At_order\u8868\u7684\u6570\u636E\u5206\u5E03\u60C5\u51B5\uFF0C\u914D\u7F6E\u6570\u636E\u8282\u70B9</span></span>
<span class="line"><span style="color:#676E95;">#        t_order:</span></span>
<span class="line"><span style="color:#676E95;">#          actual\u2010data\u2010nodes: m1.t_order_$-&gt;{1..2}</span></span>
<span class="line"><span style="color:#676E95;">#          key\u2010generator:  # \u6307\u5B9At_order\u8868\u7684\u4E3B\u952E\u751F\u6210\u7B56\u7565\u4E3ASNOWFLAKE</span></span>
<span class="line"><span style="color:#676E95;">#            column: order_id</span></span>
<span class="line"><span style="color:#676E95;">#            type: SNOWFLAKE</span></span>
<span class="line"><span style="color:#676E95;">#          table\u2010strategy: # \u6307\u5B9At_order\u8868\u7684\u5206\u7247\u7B56\u7565\uFF0C\u5206\u7247\u7B56\u7565\u5305\u62EC\u5206\u7247\u952E\u548C\u5206\u7247\u7B97\u6CD5</span></span>
<span class="line"><span style="color:#676E95;">#            inline:</span></span>
<span class="line"><span style="color:#676E95;">#              sharding\u2010column: order_id</span></span>
<span class="line"><span style="color:#676E95;">#              algorithm\u2010expression: t_order_$-&gt;{order_id % 2 + 1}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">#  1.\u9996\u5148\u5B9A\u4E49\u6570\u636E\u6E90m1\uFF0C\u5E76\u5BF9m1\u8FDB\u884C\u5B9E\u9645\u7684\u53C2\u6570\u914D\u7F6E\u3002</span></span>
<span class="line"><span style="color:#676E95;">#  2.\u6307\u5B9At_order\u8868\u7684\u6570\u636E\u5206\u5E03\u60C5\u51B5\uFF0C\u4ED6\u5206\u5E03\u5728m1.t_order_1\uFF0Cm1.t_order_2</span></span>
<span class="line"><span style="color:#676E95;">#  3.\u6307\u5B9At_order\u8868\u7684\u4E3B\u952E\u751F\u6210\u7B56\u7565\u4E3ASNOWFLAKE\uFF0CSNOWFLAKE\u662F\u4E00\u79CD\u5206\u5E03\u5F0F\u81EA\u589E\u7B97\u6CD5\uFF0C\u4FDD\u8BC1id\u5168\u5C40\u552F\u4E00</span></span>
<span class="line"><span style="color:#676E95;">#  4.\u5B9A\u4E49t_order\u5206\u7247\u7B56\u7565\uFF0Corder_id\u4E3A\u5076\u6570\u7684\u6570\u636E\u843D\u5728t_order_1\uFF0C\u4E3A\u5947\u6570\u7684\u843D\u5728t_order_2\uFF0C\u5206\u8868\u7B56\u7565\u7684\u8868\u8FBE\u5F0F\u4E3A t_order_$-&gt;{order_id % 2 + 1}</span></span>
<span class="line"></span></code></pre></div></blockquote>`,8),i=[r,t,c];function d(y,C,u,_,A,D){return o(),e("div",null,i)}const F=l(p,[["render",d]]);export{g as __pageData,F as default};
