import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.8048b864.js";const p="/assets/image-20220326161127752.632a6f28.png",o="/assets/image-20220326161230868.cbd9edbd.png",e="/assets/image-20220326161254257.43476872.png",t="/assets/image-20220326161308486.471af3a5.png",c="/assets/image-20220326162257457.403fb011.png",h=JSON.parse('{"title":"Java虚拟机","description":"","frontmatter":{},"headers":[],"relativePath":"java/jvm2.md","filePath":"java/jvm2.md","lastUpdated":1697785485000}'),r={name:"java/jvm2.md"},y=l(`<h1 id="java虚拟机" tabindex="-1">Java虚拟机 <a class="header-anchor" href="#java虚拟机" aria-label="Permalink to &quot;Java虚拟机&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#_2、jvm调优">2、JVM调优</a><ul><li><a href="#_2-1、常量池优化">2.1、常量池优化</a></li><li><a href="#_2-2、堆内存设置">2.2、堆内存设置</a></li><li><a href="#_2-3、jdk8-升级g1">2.3、JDK8 升级G1</a></li><li><a href="#_2-4、怎么选择垃圾收集器">2.4、怎么选择垃圾收集器</a></li><li><a href="#_2-5、垃圾收集器参数优化">2.5、垃圾收集器参数优化</a></li></ul></li></ul></nav><h2 id="_2、jvm调优" tabindex="-1">2、JVM调优 <a class="header-anchor" href="#_2、jvm调优" aria-label="Permalink to &quot;2、JVM调优&quot;">​</a></h2><h3 id="_2-1、常量池优化" tabindex="-1">2.1、常量池优化 <a class="header-anchor" href="#_2-1、常量池优化" aria-label="Permalink to &quot;2.1、常量池优化&quot;">​</a></h3><p>String类正是利用了常量池进行优化，编写测试用例：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    String str1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;abc&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    String str2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;abc&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(str1 </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> str2);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(str1.</span><span style="color:#B392F0;">equals</span><span style="color:#E1E4E8;">(str2));</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] args) {</span></span>
<span class="line"><span style="color:#24292E;">    String str1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;abc&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    String str2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;abc&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(str1 </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> str2);</span></span>
<span class="line"><span style="color:#24292E;">    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(str1.</span><span style="color:#6F42C1;">equals</span><span style="color:#24292E;">(str2));</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>得到的结果也是显而易见的，由于<code>str1</code>和<code>str2</code>是单独创建的两个对象，那么这两个对象实际上会在堆中存放，保存在不同的地址：<img src="`+p+`" alt="image-20220326161127752"></p><p>当我们使用<code>==</code>判断时，得到的结果<code>false</code>，而使用<code>equals</code>时因为比较的是值，所以得到<code>true</code>。</p><p>现在我们来稍微修改一下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    String str1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;abc&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    String str2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;abc&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(str1 </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> str2);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(str1.</span><span style="color:#B392F0;">equals</span><span style="color:#E1E4E8;">(str2));</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] args) {</span></span>
<span class="line"><span style="color:#24292E;">    String str1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;abc&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    String str2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;abc&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(str1 </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> str2);</span></span>
<span class="line"><span style="color:#24292E;">    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(str1.</span><span style="color:#6F42C1;">equals</span><span style="color:#24292E;">(str2));</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>没有使用new的形式，而是直接使用双引号创建，那么这时得到的结果就变成了两个<code>true</code>，这是为什么呢？这其实是因为我们直接使用双引号赋值，会先在常量池中查找是否存在相同的字符串，若存在，则将引用直接指向该字符串；若不存在，则在常量池中生成一个字符串，再将引用指向该字符串：<img src="`+o+`" alt="image-20220326161230868"></p><p>实际上两次调用String类的<code>intern()</code>方法，和上面的效果差不多，也是第一次调用会将堆中字符串复制并放入常量池中，第二次通过此方法获取字符串时，会查看常量池中是否包含，如果包含那么会直接返回常量池中字符串的地址：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//不能直接写&quot;abc&quot;，双引号的形式，写了就直接在常量池里面吧abc创好了</span></span>
<span class="line"><span style="color:#E1E4E8;">    String str1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ab&quot;</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">+new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;c&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    String str2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ab&quot;</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">+new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;c&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(str1.</span><span style="color:#B392F0;">intern</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> str2.</span><span style="color:#B392F0;">intern</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(str1.</span><span style="color:#B392F0;">equals</span><span style="color:#E1E4E8;">(str2));</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] args) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//不能直接写&quot;abc&quot;，双引号的形式，写了就直接在常量池里面吧abc创好了</span></span>
<span class="line"><span style="color:#24292E;">    String str1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ab&quot;</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">+new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;c&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    String str2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ab&quot;</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">+new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;c&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(str1.</span><span style="color:#6F42C1;">intern</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> str2.</span><span style="color:#6F42C1;">intern</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(str1.</span><span style="color:#6F42C1;">equals</span><span style="color:#24292E;">(str2));</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><img src="`+e+'" alt="image-20220326161254257"></p><p>所以上述结果中得到的依然是两个<code>true</code>。在JDK1.7之后，稍微有一些区别，在调用<code>intern()</code>方法时，当常量池中没有对应的字符串时，不会再进行复制操作，而是将其直接修改为指向当前字符串堆中的的引用：<img src="'+t+`" alt="image-20220326161308486"></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  	</span><span style="color:#6A737D;">//不能直接写&quot;abc&quot;，双引号的形式，写了就直接在常量池里面吧abc创好了</span></span>
<span class="line"><span style="color:#E1E4E8;">    String str1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ab&quot;</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">+new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;c&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(str1.</span><span style="color:#B392F0;">intern</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> str1);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] args) {</span></span>
<span class="line"><span style="color:#24292E;">  	</span><span style="color:#6A737D;">//不能直接写&quot;abc&quot;，双引号的形式，写了就直接在常量池里面吧abc创好了</span></span>
<span class="line"><span style="color:#24292E;">    String str1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ab&quot;</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">+new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;c&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(str1.</span><span style="color:#6F42C1;">intern</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> str1);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    String str1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ab&quot;</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">+new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;c&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    String str2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ab&quot;</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">+new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;c&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(str1 </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> str1.</span><span style="color:#B392F0;">intern</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(str2.</span><span style="color:#B392F0;">intern</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> str1);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] args) {</span></span>
<span class="line"><span style="color:#24292E;">    String str1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ab&quot;</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">+new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;c&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    String str2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ab&quot;</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">+new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;c&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(str1 </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> str1.</span><span style="color:#6F42C1;">intern</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(str2.</span><span style="color:#6F42C1;">intern</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> str1);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>所以最后我们会发现，<code>str1.intern()</code>和<code>str1</code>都是同一个对象，结果为<code>true</code>。</p><p><strong>值得注意的是，在JDK7之后，字符串常量池从方法区移动到了堆中</strong></p><h3 id="_2-2、堆内存设置" tabindex="-1">2.2、堆内存设置 <a class="header-anchor" href="#_2-2、堆内存设置" aria-label="Permalink to &quot;2.2、堆内存设置&quot;">​</a></h3><blockquote><p><strong>堆内存参数</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">-Xms最小值 -Xmx最大值</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">-Xms最小值 -Xmx最大值</span></span></code></pre></div><p>比如我们现在限制堆内存为固定值1M大小，并且在抛出内存溢出异常时保存当前的内存堆转储快照：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">-Xms1m -Xmx1m -XX:+HeapDumpOnOutOfMemoryError</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">-Xms1m -Xmx1m -XX:+HeapDumpOnOutOfMemoryError</span></span></code></pre></div><p><img src="`+c+`" alt="image-20220326162257457"></p></blockquote><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">OOMTest</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> List&lt;</span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> ArrayList&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        List&lt;</span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> j </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            list.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">User</span><span style="color:#E1E4E8;">(i</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">, UUID.</span><span style="color:#B392F0;">randomUUID</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">toString</span><span style="color:#E1E4E8;">()));</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">User</span><span style="color:#E1E4E8;">(j</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">, UUID.</span><span style="color:#B392F0;">randomUUID</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">toString</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">OOMTest</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Object</span><span style="color:#24292E;">&gt; list </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayList&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        List&lt;</span><span style="color:#D73A49;">Object</span><span style="color:#24292E;">&gt; list </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> j </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            list.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">User</span><span style="color:#24292E;">(i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">, UUID.</span><span style="color:#6F42C1;">randomUUID</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">toString</span><span style="color:#24292E;">()));</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">User</span><span style="color:#24292E;">(j</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">, UUID.</span><span style="color:#6F42C1;">randomUUID</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">toString</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><blockquote><p>JVM参数设置</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">-Xms10M</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-Xmx10M</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCDetails</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+HeapDumpOnOutOfMemoryError</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:HeapDumpPath</span><span style="color:#E1E4E8;">=D:\\jvm.dump</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">-Xms10M</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-Xmx10M</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCDetails</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+HeapDumpOnOutOfMemoryError</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:HeapDumpPath</span><span style="color:#24292E;">=D:\\jvm.dump</span></span></code></pre></div><blockquote><p>打印GC日志</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">-Xloggc:./gc-%t.log</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCDetails</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCDateStamps</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCTimeStamps</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCCause</span></span>
<span class="line"><span style="color:#B392F0;">-XX:+UseGCLogFileRotation</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:NumberOfGCLogFiles</span><span style="color:#E1E4E8;">=10 </span></span>
<span class="line"><span style="color:#B392F0;">-XX:GCLogFileSize</span><span style="color:#E1E4E8;">=100M</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">-Xloggc:./gc-%t.log</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCDetails</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCDateStamps</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCTimeStamps</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCCause</span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+UseGCLogFileRotation</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:NumberOfGCLogFiles</span><span style="color:#24292E;">=10 </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:GCLogFileSize</span><span style="color:#24292E;">=100M</span></span></code></pre></div><blockquote><p>启动应用程序</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">java</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-jar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-Xloggc:./gc-%t.log</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-XX:+PrintGCDetails</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-XX:+PrintGCDateStamps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-XX:+PrintGCTimeStamps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-XX:+PrintGCCause</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-XX:+UseGCLogFileRotation</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-XX:NumberOfGCLogFiles=10</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-XX:GCLogFileSize=100M</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xxx.jar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">java</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-jar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-Xloggc:./gc-%t.log</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-XX:+PrintGCDetails</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-XX:+PrintGCDateStamps</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-XX:+PrintGCTimeStamps</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-XX:+PrintGCCause</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-XX:+UseGCLogFileRotation</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-XX:NumberOfGCLogFiles=10</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-XX:GCLogFileSize=100M</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xxx.jar</span></span></code></pre></div><h3 id="_2-3、jdk8-升级g1" tabindex="-1">2.3、JDK8 升级G1 <a class="header-anchor" href="#_2-3、jdk8-升级g1" aria-label="Permalink to &quot;2.3、JDK8 升级G1&quot;">​</a></h3><blockquote><p><code>jdk8需要设置参数指定:</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">// 最大堆内存24G 使用G1GC，设置预期停顿时间是95ms</span></span>
<span class="line"><span style="color:#e1e4e8;">-Xms24g -Xmx24g -XX:+UseG1GC -XX:MaxGCPauseMillis=95</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">// 最大堆内存24G 使用G1GC，设置预期停顿时间是95ms</span></span>
<span class="line"><span style="color:#24292e;">-Xms24g -Xmx24g -XX:+UseG1GC -XX:MaxGCPauseMillis=95</span></span></code></pre></div><p>使用G1的主要原因是：G1的Stop The World(STW)更可控，G1在停顿时间上添加了预测机制，用户可以指定期望停顿时间</p><p>G1的常用参数配置：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-XX:G1HeapRegionSize=n</td><td>设置Region大小，并非最终值</td></tr><tr><td>-XX:MaxGCPauseMillis</td><td>设置G1收集过程目标时间，默认值200ms，不是硬性条件</td></tr><tr><td>-XX:G1NewSizePercent</td><td>新生代最小值，默认值5%</td></tr><tr><td>-XX:G1MaxNewSizePercent</td><td>新生代最大值，默认值60%</td></tr><tr><td>-XX:ParallelGCThreads</td><td>STW期间，并行GC线程数</td></tr><tr><td>-XX:ConcGCThreads=n</td><td>并发标记阶段，并行执行的线程数</td></tr><tr><td>-XX:InitiatingHeapOccupancyPercent</td><td>设置触发标记周期的 Java 堆占用率阈值。默认值是45%。</td></tr></tbody></table><p><code>查看jdk8默认的垃圾收集器</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">java -XX:+PrintCommandLineFlags -version</span></span>
<span class="line"><span style="color:#e1e4e8;">-XX:InitialHeapSize=264885120 </span></span>
<span class="line"><span style="color:#e1e4e8;">-XX:MaxHeapSize=4238161920 </span></span>
<span class="line"><span style="color:#e1e4e8;">-XX:+PrintCommandLineFlags </span></span>
<span class="line"><span style="color:#e1e4e8;">-XX:+UseCompressedClassPointers </span></span>
<span class="line"><span style="color:#e1e4e8;">-XX:+UseCompressedOops </span></span>
<span class="line"><span style="color:#e1e4e8;">-XX:-UseLargePagesIndividualAllocation </span></span>
<span class="line"><span style="color:#e1e4e8;">-XX:+UseParallelGC</span></span>
<span class="line"><span style="color:#e1e4e8;">java version &quot;1.8.0_281&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">Java(TM) SE Runtime Environment (build 1.8.0_281-b09)</span></span>
<span class="line"><span style="color:#e1e4e8;">Java HotSpot(TM) 64-Bit Server VM (build 25.281-b09, mixed mode)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">java -XX:+PrintCommandLineFlags -version</span></span>
<span class="line"><span style="color:#24292e;">-XX:InitialHeapSize=264885120 </span></span>
<span class="line"><span style="color:#24292e;">-XX:MaxHeapSize=4238161920 </span></span>
<span class="line"><span style="color:#24292e;">-XX:+PrintCommandLineFlags </span></span>
<span class="line"><span style="color:#24292e;">-XX:+UseCompressedClassPointers </span></span>
<span class="line"><span style="color:#24292e;">-XX:+UseCompressedOops </span></span>
<span class="line"><span style="color:#24292e;">-XX:-UseLargePagesIndividualAllocation </span></span>
<span class="line"><span style="color:#24292e;">-XX:+UseParallelGC</span></span>
<span class="line"><span style="color:#24292e;">java version &quot;1.8.0_281&quot;</span></span>
<span class="line"><span style="color:#24292e;">Java(TM) SE Runtime Environment (build 1.8.0_281-b09)</span></span>
<span class="line"><span style="color:#24292e;">Java HotSpot(TM) 64-Bit Server VM (build 25.281-b09, mixed mode)</span></span></code></pre></div></blockquote><h3 id="_2-4、怎么选择垃圾收集器" tabindex="-1">2.4、怎么选择垃圾收集器 <a class="header-anchor" href="#_2-4、怎么选择垃圾收集器" aria-label="Permalink to &quot;2.4、怎么选择垃圾收集器&quot;">​</a></h3><blockquote><ol><li>优先调整堆的大小让服务器自己来选择</li><li>如果内存小于100m，使用串行收集器</li><li>如果是单核，并且没有停顿时间的要求，串行或JVM自己选择</li><li>如果允许停顿时间超过1秒，选择并行或者JVM自己选</li><li>如果响应时间最重要，并且不能超过1秒，使用并发收</li></ol><p>官方推荐<strong>G1</strong>，性能高。</p></blockquote><h3 id="_2-5、垃圾收集器参数优化" tabindex="-1">2.5、垃圾收集器参数优化 <a class="header-anchor" href="#_2-5、垃圾收集器参数优化" aria-label="Permalink to &quot;2.5、垃圾收集器参数优化&quot;">​</a></h3><h4 id="cms" tabindex="-1">cms <a class="header-anchor" href="#cms" aria-label="Permalink to &quot;cms&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">-Xloggc:d:/gc-cms-%t.log</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-Xms50M</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-Xmx50M</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:MetaspaceSize</span><span style="color:#E1E4E8;">=256M </span></span>
<span class="line"><span style="color:#B392F0;">-XX:MaxMetaspaceSize</span><span style="color:#E1E4E8;">=256M </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCDetails</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCDateStamps</span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCTimeStamps</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCCause</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+UseGCLogFileRotation</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:NumberOfGCLogFiles</span><span style="color:#E1E4E8;">=10 </span></span>
<span class="line"><span style="color:#B392F0;">-XX:GCLogFileSize</span><span style="color:#E1E4E8;">=100M</span></span>
<span class="line"><span style="color:#B392F0;">-XX:+UseParNewGC</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+UseConcMarkSweepGC</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">-Xloggc:d:/gc-cms-%t.log</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-Xms50M</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-Xmx50M</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:MetaspaceSize</span><span style="color:#24292E;">=256M </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:MaxMetaspaceSize</span><span style="color:#24292E;">=256M </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCDetails</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCDateStamps</span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCTimeStamps</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCCause</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+UseGCLogFileRotation</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:NumberOfGCLogFiles</span><span style="color:#24292E;">=10 </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:GCLogFileSize</span><span style="color:#24292E;">=100M</span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+UseParNewGC</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+UseConcMarkSweepGC</span></span></code></pre></div><h4 id="g1" tabindex="-1">G1 <a class="header-anchor" href="#g1" aria-label="Permalink to &quot;G1&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">-Xloggc:d:/gc-g1-%t.log</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-Xms50M</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-Xmx50M</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:MetaspaceSize</span><span style="color:#E1E4E8;">=256M </span></span>
<span class="line"><span style="color:#B392F0;">-XX:MaxMetaspaceSize</span><span style="color:#E1E4E8;">=256M </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCDetails</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCDateStamps</span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCTimeStamps</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+PrintGCCause</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:+UseGCLogFileRotation</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-XX:NumberOfGCLogFiles</span><span style="color:#E1E4E8;">=10 </span></span>
<span class="line"><span style="color:#B392F0;">-XX:GCLogFileSize</span><span style="color:#E1E4E8;">=100M</span></span>
<span class="line"><span style="color:#B392F0;">-XX:+UseG1GC</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">-Xloggc:d:/gc-g1-%t.log</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-Xms50M</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-Xmx50M</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:MetaspaceSize</span><span style="color:#24292E;">=256M </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:MaxMetaspaceSize</span><span style="color:#24292E;">=256M </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCDetails</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCDateStamps</span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCTimeStamps</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+PrintGCCause</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+UseGCLogFileRotation</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:NumberOfGCLogFiles</span><span style="color:#24292E;">=10 </span></span>
<span class="line"><span style="color:#6F42C1;">-XX:GCLogFileSize</span><span style="color:#24292E;">=100M</span></span>
<span class="line"><span style="color:#6F42C1;">-XX:+UseG1GC</span></span></code></pre></div>`,37),E=[y];function i(d,F,g,u,C,X){return a(),n("div",null,E)}const b=s(r,[["render",i]]);export{h as __pageData,b as default};
